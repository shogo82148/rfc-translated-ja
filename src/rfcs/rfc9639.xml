<?xml version='1.0' encoding='utf-8'?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3" ipr="trust200902" docName="draft-ietf-cellar-flac-14" number="9639" submissionType="IETF" category="std" xml:lang="en" tocInclude="true" consensus="true" updates="" obsoletes="" sortRefs="true" symRefs="true" prepTime="2024-12-18T17:02:40" indexInclude="true" scripts="Common,Hebrew,Latin" tocDepth="3">
  <link href="https://datatracker.ietf.org/doc/draft-ietf-cellar-flac-14" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9639" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <front>
    <title abbrev="FLAC">Free Lossless Audio Codec (FLAC)</title>
    <seriesInfo name="RFC" value="9639" stream="IETF"/>
    <author initials="M.Q.C." surname="van Beurden" fullname="Martijn van Beurden">
      <address>
        <postal>
          <country>Netherlands</country>
        </postal>
        <email>mvanb1@gmail.com</email>
      </address>
    </author>
    <author initials="A" surname="Weaver" fullname="Andrew Weaver">
      <address>
        <email>theandrewjw@gmail.com</email>
      </address>
    </author>
    <date month="12" year="2024"/>
    <area>art</area>
    <workgroup>cellar</workgroup>
    <keyword>free</keyword>
    <keyword>lossless</keyword>
    <keyword>audio</keyword>
    <keyword>codec</keyword>
    <keyword>encoder</keyword>
    <keyword>decoder</keyword>
    <keyword>compression</keyword>
    <keyword>compressor</keyword>
    <keyword>archival</keyword>
    <keyword>archive</keyword>
    <keyword>archiving</keyword>
    <keyword>backup</keyword>
    <keyword>music</keyword>
    <abstract pn="section-abstract">
      <t indent="0" pn="section-abstract-1">This document defines the Free Lossless Audio Codec (FLAC) format and its streamable subset. FLAC is designed to reduce the amount of computer storage
   space needed to store digital audio signals. It does this losslessly,
   i.e., it does so without losing information. FLAC is free in the sense that its specification is open and its reference implementation is open source. 
   Compared to other lossless audio coding formats, FLAC is a format with low
   complexity and can be encoded and decoded with little computing
   resources. Decoding of FLAC has been implemented independently
   for many different platforms, and both encoding and decoding can
   be implemented without needing floating-point arithmetic. </t>
    </abstract>
    <boilerplate>
      <section anchor="status-of-memo" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.1">
        <name slugifiedName="name-status-of-this-memo">Status of This Memo</name>
        <t indent="0" pn="section-boilerplate.1-1">
            This is an Internet Standards Track document.
        </t>
        <t indent="0" pn="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
        </t>
        <t indent="0" pn="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <eref target="https://www.rfc-editor.org/info/rfc9639" brackets="none"/>.
        </t>
      </section>
      <section anchor="copyright" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.2">
        <name slugifiedName="name-copyright-notice">Copyright Notice</name>
        <t indent="0" pn="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.
        </t>
        <t indent="0" pn="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<eref target="https://trustee.ietf.org/license-info" brackets="none"/>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.
        </t>
      </section>
    </boilerplate>
    <toc>
      <section anchor="toc" numbered="false" removeInRFC="false" toc="exclude" pn="section-toc.1">
        <name slugifiedName="name-table-of-contents">Table of Contents</name>
        <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1">
          <li pn="section-toc.1-1.1">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.1"><xref derivedContent="1" format="counter" sectionFormat="of" target="section-1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-introduction">Introduction</xref></t>
          </li>
          <li pn="section-toc.1-1.2">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.2.1"><xref derivedContent="2" format="counter" sectionFormat="of" target="section-2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-notation-and-conventions">Notation and Conventions</xref></t>
          </li>
          <li pn="section-toc.1-1.3">
            <t indent="0" keepWithNext="true" pn="section-toc.1-1.3.1"><xref derivedContent="3" format="counter" sectionFormat="of" target="section-3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-definitions">Definitions</xref></t>
          </li>
          <li pn="section-toc.1-1.4">
            <t indent="0" pn="section-toc.1-1.4.1"><xref derivedContent="4" format="counter" sectionFormat="of" target="section-4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-conceptual-overview">Conceptual
Overview</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2">
              <li pn="section-toc.1-1.4.2.1">
                <t indent="0" pn="section-toc.1-1.4.2.1.1"><xref derivedContent="4.1" format="counter" sectionFormat="of" target="section-4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-blocking">Blocking</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.2">
                <t indent="0" pn="section-toc.1-1.4.2.2.1"><xref derivedContent="4.2" format="counter" sectionFormat="of" target="section-4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-interchannel-decorrelation">Interchannel Decorrelation</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.3">
                <t indent="0" pn="section-toc.1-1.4.2.3.1"><xref derivedContent="4.3" format="counter" sectionFormat="of" target="section-4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-prediction">Prediction</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.4">
                <t indent="0" pn="section-toc.1-1.4.2.4.1"><xref derivedContent="4.4" format="counter" sectionFormat="of" target="section-4.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-residual-coding">Residual Coding</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.5">
            <t indent="0" pn="section-toc.1-1.5.1"><xref derivedContent="5" format="counter" sectionFormat="of" target="section-5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-format-principles">Format Principles</xref></t>
          </li>
          <li pn="section-toc.1-1.6">
            <t indent="0" pn="section-toc.1-1.6.1"><xref derivedContent="6" format="counter" sectionFormat="of" target="section-6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-format-layout-overview">Format Layout Overview</xref></t>
          </li>
          <li pn="section-toc.1-1.7">
            <t indent="0" pn="section-toc.1-1.7.1"><xref derivedContent="7" format="counter" sectionFormat="of" target="section-7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-streamable-subset">Streamable Subset</xref></t>
          </li>
          <li pn="section-toc.1-1.8">
            <t indent="0" pn="section-toc.1-1.8.1"><xref derivedContent="8" format="counter" sectionFormat="of" target="section-8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-file-level-metadata">File-Level Metadata</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.8.2">
              <li pn="section-toc.1-1.8.2.1">
                <t indent="0" pn="section-toc.1-1.8.2.1.1"><xref derivedContent="8.1" format="counter" sectionFormat="of" target="section-8.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-metadata-block-header">Metadata Block Header</xref></t>
              </li>
              <li pn="section-toc.1-1.8.2.2">
                <t indent="0" pn="section-toc.1-1.8.2.2.1"><xref derivedContent="8.2" format="counter" sectionFormat="of" target="section-8.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-streaminfo">Streaminfo</xref></t>
              </li>
              <li pn="section-toc.1-1.8.2.3">
                <t indent="0" pn="section-toc.1-1.8.2.3.1"><xref derivedContent="8.3" format="counter" sectionFormat="of" target="section-8.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-padding">Padding</xref></t>
              </li>
              <li pn="section-toc.1-1.8.2.4">
                <t indent="0" pn="section-toc.1-1.8.2.4.1"><xref derivedContent="8.4" format="counter" sectionFormat="of" target="section-8.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-application">Application</xref></t>
              </li>
              <li pn="section-toc.1-1.8.2.5">
                <t indent="0" pn="section-toc.1-1.8.2.5.1"><xref derivedContent="8.5" format="counter" sectionFormat="of" target="section-8.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-seek-table">Seek Table</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.8.2.5.2">
                  <li pn="section-toc.1-1.8.2.5.2.1">
                    <t indent="0" pn="section-toc.1-1.8.2.5.2.1.1"><xref derivedContent="8.5.1" format="counter" sectionFormat="of" target="section-8.5.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-seek-point">Seek Point</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.8.2.6">
                <t indent="0" pn="section-toc.1-1.8.2.6.1"><xref derivedContent="8.6" format="counter" sectionFormat="of" target="section-8.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-vorbis-comment">Vorbis Comment</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.8.2.6.2">
                  <li pn="section-toc.1-1.8.2.6.2.1">
                    <t indent="0" pn="section-toc.1-1.8.2.6.2.1.1"><xref derivedContent="8.6.1" format="counter" sectionFormat="of" target="section-8.6.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-standard-field-names">Standard Field Names</xref></t>
                  </li>
                  <li pn="section-toc.1-1.8.2.6.2.2">
                    <t indent="0" pn="section-toc.1-1.8.2.6.2.2.1"><xref derivedContent="8.6.2" format="counter" sectionFormat="of" target="section-8.6.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-channel-mask">Channel Mask</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.8.2.7">
                <t indent="0" pn="section-toc.1-1.8.2.7.1"><xref derivedContent="8.7" format="counter" sectionFormat="of" target="section-8.7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-cuesheet">Cuesheet</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.8.2.7.2">
                  <li pn="section-toc.1-1.8.2.7.2.1">
                    <t indent="0" pn="section-toc.1-1.8.2.7.2.1.1"><xref derivedContent="8.7.1" format="counter" sectionFormat="of" target="section-8.7.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-cuesheet-track">Cuesheet Track</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.8.2.8">
                <t indent="0" pn="section-toc.1-1.8.2.8.1"><xref derivedContent="8.8" format="counter" sectionFormat="of" target="section-8.8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-picture">Picture</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.9">
            <t indent="0" pn="section-toc.1-1.9.1"><xref derivedContent="9" format="counter" sectionFormat="of" target="section-9"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-frame-structure">Frame Structure</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.9.2">
              <li pn="section-toc.1-1.9.2.1">
                <t indent="0" pn="section-toc.1-1.9.2.1.1"><xref derivedContent="9.1" format="counter" sectionFormat="of" target="section-9.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-frame-header">Frame Header</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.9.2.1.2">
                  <li pn="section-toc.1-1.9.2.1.2.1">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.1.1"><xref derivedContent="9.1.1" format="counter" sectionFormat="of" target="section-9.1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-block-size-bits">Block Size Bits</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.2">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.2.1"><xref derivedContent="9.1.2" format="counter" sectionFormat="of" target="section-9.1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-sample-rate-bits">Sample Rate Bits</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.3">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.3.1"><xref derivedContent="9.1.3" format="counter" sectionFormat="of" target="section-9.1.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-channels-bits">Channels Bits</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.4">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.4.1"><xref derivedContent="9.1.4" format="counter" sectionFormat="of" target="section-9.1.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-bit-depth-bits">Bit Depth Bits</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.5">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.5.1"><xref derivedContent="9.1.5" format="counter" sectionFormat="of" target="section-9.1.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-coded-number">Coded Number</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.6">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.6.1"><xref derivedContent="9.1.6" format="counter" sectionFormat="of" target="section-9.1.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-uncommon-block-size">Uncommon Block Size</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.7">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.7.1"><xref derivedContent="9.1.7" format="counter" sectionFormat="of" target="section-9.1.7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-uncommon-sample-rate">Uncommon Sample Rate</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.1.2.8">
                    <t indent="0" pn="section-toc.1-1.9.2.1.2.8.1"><xref derivedContent="9.1.8" format="counter" sectionFormat="of" target="section-9.1.8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-frame-header-crc">Frame Header CRC</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.9.2.2">
                <t indent="0" pn="section-toc.1-1.9.2.2.1"><xref derivedContent="9.2" format="counter" sectionFormat="of" target="section-9.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-subframes">Subframes</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.9.2.2.2">
                  <li pn="section-toc.1-1.9.2.2.2.1">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.1.1"><xref derivedContent="9.2.1" format="counter" sectionFormat="of" target="section-9.2.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-subframe-header">Subframe Header</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.2.2.2">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.2.1"><xref derivedContent="9.2.2" format="counter" sectionFormat="of" target="section-9.2.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-wasted-bits-per-sample">Wasted Bits per Sample</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.2.2.3">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.3.1"><xref derivedContent="9.2.3" format="counter" sectionFormat="of" target="section-9.2.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-constant-subframe">Constant Subframe</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.2.2.4">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.4.1"><xref derivedContent="9.2.4" format="counter" sectionFormat="of" target="section-9.2.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-verbatim-subframe">Verbatim Subframe</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.2.2.5">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.5.1"><xref derivedContent="9.2.5" format="counter" sectionFormat="of" target="section-9.2.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-fixed-predictor-subframe">Fixed Predictor
Subframe</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.2.2.6">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.6.1"><xref derivedContent="9.2.6" format="counter" sectionFormat="of" target="section-9.2.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-linear-predictor-subframe">Linear Predictor Subframe</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.2.2.7">
                    <t indent="0" pn="section-toc.1-1.9.2.2.2.7.1"><xref derivedContent="9.2.7" format="counter" sectionFormat="of" target="section-9.2.7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-coded-residual">Coded Residual</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.9.2.3">
                <t indent="0" pn="section-toc.1-1.9.2.3.1"><xref derivedContent="9.3" format="counter" sectionFormat="of" target="section-9.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-frame-footer">Frame Footer</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.10">
            <t indent="0" pn="section-toc.1-1.10.1"><xref derivedContent="10" format="counter" sectionFormat="of" target="section-10"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-container-mappings">Container Mappings</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.10.2">
              <li pn="section-toc.1-1.10.2.1">
                <t indent="0" pn="section-toc.1-1.10.2.1.1"><xref derivedContent="10.1" format="counter" sectionFormat="of" target="section-10.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-ogg-mapping">Ogg Mapping</xref></t>
              </li>
              <li pn="section-toc.1-1.10.2.2">
                <t indent="0" pn="section-toc.1-1.10.2.2.1"><xref derivedContent="10.2" format="counter" sectionFormat="of" target="section-10.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-matroska-mapping">Matroska Mapping</xref></t>
              </li>
              <li pn="section-toc.1-1.10.2.3">
                <t indent="0" pn="section-toc.1-1.10.2.3.1"><xref derivedContent="10.3" format="counter" sectionFormat="of" target="section-10.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-iso-base-media-file-format-">ISO Base Media File Format (MP4) Mapping</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.11">
            <t indent="0" pn="section-toc.1-1.11.1"><xref derivedContent="11" format="counter" sectionFormat="of" target="section-11"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-security-considerations">Security Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.12">
            <t indent="0" pn="section-toc.1-1.12.1"><xref derivedContent="12" format="counter" sectionFormat="of" target="section-12"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-iana-considerations">IANA Considerations</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.12.2">
              <li pn="section-toc.1-1.12.2.1">
                <t indent="0" pn="section-toc.1-1.12.2.1.1"><xref derivedContent="12.1" format="counter" sectionFormat="of" target="section-12.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-media-type-registration">Media Type Registration</xref></t>
              </li>
              <li pn="section-toc.1-1.12.2.2">
                <t indent="0" pn="section-toc.1-1.12.2.2.1"><xref derivedContent="12.2" format="counter" sectionFormat="of" target="section-12.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-flac-application-metadata-b">FLAC Application Metadata
Block IDs Registry</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.13">
            <t indent="0" pn="section-toc.1-1.13.1"><xref derivedContent="13" format="counter" sectionFormat="of" target="section-13"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-references">References</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.13.2">
              <li pn="section-toc.1-1.13.2.1">
                <t indent="0" pn="section-toc.1-1.13.2.1.1"><xref derivedContent="13.1" format="counter" sectionFormat="of" target="section-13.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-normative-references">Normative References</xref></t>
              </li>
              <li pn="section-toc.1-1.13.2.2">
                <t indent="0" pn="section-toc.1-1.13.2.2.1"><xref derivedContent="13.2" format="counter" sectionFormat="of" target="section-13.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-informative-references">Informative References</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.14">
            <t indent="0" pn="section-toc.1-1.14.1"><xref derivedContent="Appendix A" format="default" sectionFormat="of" target="section-appendix.a"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-numerical-considerations">Numerical Considerations</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.14.2">
              <li pn="section-toc.1-1.14.2.1">
                <t indent="0" pn="section-toc.1-1.14.2.1.1"><xref derivedContent="A.1" format="counter" sectionFormat="of" target="section-appendix.a.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-determining-the-necessary-d">Determining the Necessary Data Type Size</xref></t>
              </li>
              <li pn="section-toc.1-1.14.2.2">
                <t indent="0" pn="section-toc.1-1.14.2.2.1"><xref derivedContent="A.2" format="counter" sectionFormat="of" target="section-appendix.a.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-stereo-decorrelation">Stereo Decorrelation</xref></t>
              </li>
              <li pn="section-toc.1-1.14.2.3">
                <t indent="0" pn="section-toc.1-1.14.2.3.1"><xref derivedContent="A.3" format="counter" sectionFormat="of" target="section-appendix.a.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-prediction-2">Prediction</xref></t>
              </li>
              <li pn="section-toc.1-1.14.2.4">
                <t indent="0" pn="section-toc.1-1.14.2.4.1"><xref derivedContent="A.4" format="counter" sectionFormat="of" target="section-appendix.a.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-residual">Residual</xref></t>
              </li>
              <li pn="section-toc.1-1.14.2.5">
                <t indent="0" pn="section-toc.1-1.14.2.5.1"><xref derivedContent="A.5" format="counter" sectionFormat="of" target="section-appendix.a.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rice-coding">Rice Coding</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.15">
            <t indent="0" pn="section-toc.1-1.15.1"><xref derivedContent="Appendix B" format="default" sectionFormat="of" target="section-appendix.b"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-past-format-changes">Past Format Changes</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.15.2">
              <li pn="section-toc.1-1.15.2.1">
                <t indent="0" pn="section-toc.1-1.15.2.1.1"><xref derivedContent="B.1" format="counter" sectionFormat="of" target="section-appendix.b.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-addition-of-blocking-strate">Addition of Blocking Strategy Bit</xref></t>
              </li>
              <li pn="section-toc.1-1.15.2.2">
                <t indent="0" pn="section-toc.1-1.15.2.2.1"><xref derivedContent="B.2" format="counter" sectionFormat="of" target="section-appendix.b.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-restriction-of-encoded-resi">Restriction of Encoded Residual Samples</xref></t>
              </li>
              <li pn="section-toc.1-1.15.2.3">
                <t indent="0" pn="section-toc.1-1.15.2.3.1"><xref derivedContent="B.3" format="counter" sectionFormat="of" target="section-appendix.b.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-addition-of-5-bit-rice-para">Addition of 5-Bit Rice Parameters</xref></t>
              </li>
              <li pn="section-toc.1-1.15.2.4">
                <t indent="0" pn="section-toc.1-1.15.2.4.1"><xref derivedContent="B.4" format="counter" sectionFormat="of" target="section-appendix.b.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-restriction-of-lpc-shift-to">Restriction of LPC Shift to Non-negative Values</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.16">
            <t indent="0" pn="section-toc.1-1.16.1"><xref derivedContent="Appendix C" format="default" sectionFormat="of" target="section-appendix.c"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-interoperability-considerat">Interoperability
Considerations</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.16.2">
              <li pn="section-toc.1-1.16.2.1">
                <t indent="0" pn="section-toc.1-1.16.2.1.1"><xref derivedContent="C.1" format="counter" sectionFormat="of" target="section-appendix.c.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-features-outside-of-the-str">Features outside of the Streamable Subset</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.2">
                <t indent="0" pn="section-toc.1-1.16.2.2.1"><xref derivedContent="C.2" format="counter" sectionFormat="of" target="section-appendix.c.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-variable-block-size">Variable Block Size</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.3">
                <t indent="0" pn="section-toc.1-1.16.2.3.1"><xref derivedContent="C.3" format="counter" sectionFormat="of" target="section-appendix.c.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-5-bit-rice-parameters">5-Bit Rice Parameters</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.4">
                <t indent="0" pn="section-toc.1-1.16.2.4.1"><xref derivedContent="C.4" format="counter" sectionFormat="of" target="section-appendix.c.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-rice-escape-code">Rice Escape Code</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.5">
                <t indent="0" pn="section-toc.1-1.16.2.5.1"><xref derivedContent="C.5" format="counter" sectionFormat="of" target="section-appendix.c.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-uncommon-block-size-2">Uncommon Block Size</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.6">
                <t indent="0" pn="section-toc.1-1.16.2.6.1"><xref derivedContent="C.6" format="counter" sectionFormat="of" target="section-appendix.c.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-uncommon-bit-depth">Uncommon Bit Depth</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.7">
                <t indent="0" pn="section-toc.1-1.16.2.7.1"><xref derivedContent="C.7" format="counter" sectionFormat="of" target="section-appendix.c.7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multi-channel-audio-and-unc">Multi-Channel Audio and Uncommon Sample Rates</xref></t>
              </li>
              <li pn="section-toc.1-1.16.2.8">
                <t indent="0" pn="section-toc.1-1.16.2.8.1"><xref derivedContent="C.8" format="counter" sectionFormat="of" target="section-appendix.c.8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-changing-audio-properties-m">Changing Audio Properties Mid-Stream</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.17">
            <t indent="0" pn="section-toc.1-1.17.1"><xref derivedContent="Appendix D" format="default" sectionFormat="of" target="section-appendix.d"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-examples">Examples</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.17.2">
              <li pn="section-toc.1-1.17.2.1">
                <t indent="0" pn="section-toc.1-1.17.2.1.1"><xref derivedContent="D.1" format="counter" sectionFormat="of" target="section-appendix.d.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-decoding-example-1">Decoding Example 1</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.17.2.1.2">
                  <li pn="section-toc.1-1.17.2.1.2.1">
                    <t indent="0" pn="section-toc.1-1.17.2.1.2.1.1"><xref derivedContent="D.1.1" format="counter" sectionFormat="of" target="section-appendix.d.1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-file-1-in-hexadecim">Example File 1 in Hexadecimal Representation</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.1.2.2">
                    <t indent="0" pn="section-toc.1-1.17.2.1.2.2.1"><xref derivedContent="D.1.2" format="counter" sectionFormat="of" target="section-appendix.d.1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-file-1-in-binary-re">Example File 1 in Binary Representation</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.1.2.3">
                    <t indent="0" pn="section-toc.1-1.17.2.1.2.3.1"><xref derivedContent="D.1.3" format="counter" sectionFormat="of" target="section-appendix.d.1.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-signature-and-streaminfo">Signature and Streaminfo</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.1.2.4">
                    <t indent="0" pn="section-toc.1-1.17.2.1.2.4.1"><xref derivedContent="D.1.4" format="counter" sectionFormat="of" target="section-appendix.d.1.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-audio-frames">Audio Frames</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.17.2.2">
                <t indent="0" pn="section-toc.1-1.17.2.2.1"><xref derivedContent="D.2" format="counter" sectionFormat="of" target="section-appendix.d.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-decoding-example-2">Decoding Example 2</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.17.2.2.2">
                  <li pn="section-toc.1-1.17.2.2.2.1">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.1.1"><xref derivedContent="D.2.1" format="counter" sectionFormat="of" target="section-appendix.d.2.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-file-2-in-hexadecim">Example File 2 in Hexadecimal Representation</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.2">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.2.1"><xref derivedContent="D.2.2" format="counter" sectionFormat="of" target="section-appendix.d.2.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-file-2-in-binary-re">Example File 2 in Binary Representation (Only Audio Frames)</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.3">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.3.1"><xref derivedContent="D.2.3" format="counter" sectionFormat="of" target="section-appendix.d.2.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-streaminfo-metadata-block">Streaminfo Metadata Block</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.4">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.4.1"><xref derivedContent="D.2.4" format="counter" sectionFormat="of" target="section-appendix.d.2.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-seek-table-2">Seek Table</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.5">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.5.1"><xref derivedContent="D.2.5" format="counter" sectionFormat="of" target="section-appendix.d.2.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-vorbis-comment-2">Vorbis Comment</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.6">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.6.1"><xref derivedContent="D.2.6" format="counter" sectionFormat="of" target="section-appendix.d.2.6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-padding-2">Padding</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.7">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.7.1"><xref derivedContent="D.2.7" format="counter" sectionFormat="of" target="section-appendix.d.2.7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-first-audio-frame">First Audio Frame</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.8">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.8.1"><xref derivedContent="D.2.8" format="counter" sectionFormat="of" target="section-appendix.d.2.8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-second-audio-frame">Second Audio Frame</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.2.2.9">
                    <t indent="0" pn="section-toc.1-1.17.2.2.2.9.1"><xref derivedContent="D.2.9" format="counter" sectionFormat="of" target="section-appendix.d.2.9"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-md5-checksum-verification">MD5 Checksum Verification</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.17.2.3">
                <t indent="0" pn="section-toc.1-1.17.2.3.1"><xref derivedContent="D.3" format="counter" sectionFormat="of" target="section-appendix.d.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-decoding-example-3">Decoding Example 3</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.17.2.3.2">
                  <li pn="section-toc.1-1.17.2.3.2.1">
                    <t indent="0" pn="section-toc.1-1.17.2.3.2.1.1"><xref derivedContent="D.3.1" format="counter" sectionFormat="of" target="section-appendix.d.3.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-file-3-in-hexadecim">Example File 3 in Hexadecimal Representation</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.3.2.2">
                    <t indent="0" pn="section-toc.1-1.17.2.3.2.2.1"><xref derivedContent="D.3.2" format="counter" sectionFormat="of" target="section-appendix.d.3.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-example-file-3-in-binary-re">Example File 3 in Binary Representation (Only Audio Frame)</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.3.2.3">
                    <t indent="0" pn="section-toc.1-1.17.2.3.2.3.1"><xref derivedContent="D.3.3" format="counter" sectionFormat="of" target="section-appendix.d.3.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-streaminfo-metadata-block-2">Streaminfo Metadata Block</xref></t>
                  </li>
                  <li pn="section-toc.1-1.17.2.3.2.4">
                    <t indent="0" pn="section-toc.1-1.17.2.3.2.4.1"><xref derivedContent="D.3.4" format="counter" sectionFormat="of" target="section-appendix.d.3.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-audio-frame">Audio Frame</xref></t>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.18">
            <t indent="0" pn="section-toc.1-1.18.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.e"/><xref derivedContent="" format="title" sectionFormat="of" target="name-acknowledgments">Acknowledgments</xref></t>
          </li>
          <li pn="section-toc.1-1.19">
            <t indent="0" pn="section-toc.1-1.19.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.f"/><xref derivedContent="" format="title" sectionFormat="of" target="name-authors-addresses">Authors' Addresses</xref></t>
          </li>
        </ul>
      </section>
    </toc>
  </front>
  <middle>
    <section anchor="introduction" numbered="true" removeInRFC="false" toc="include" pn="section-1">
      <name slugifiedName="name-introduction">Introduction</name>
      <t indent="0" pn="section-1-1">This document defines the Free Lossless Audio Codec (FLAC) format and its streamable subset. FLAC files and streams can code for pulse-code modulated (PCM) audio with 1 to 8 channels, sample rates from 1 to 1048575 hertz, and bit depths from 4 to 32 bits. Most tools for coding to and decoding from the FLAC format have been optimized for CD-audio, which is PCM audio with 2 channels, a sample rate of 44.1 kHz, and a bit depth of 16 bits.</t>
      <t indent="0" pn="section-1-2">FLAC is able to achieve lossless compression because samples in audio signals tend to be highly correlated with their close neighbors. In contrast with general-purpose compressors, which often use dictionaries, do run-length coding, or exploit long-term repetition, FLAC removes redundancy solely in the very short term, looking back at 32 samples at most.</t>
      <t indent="0" pn="section-1-3"> The coding methods provided by the FLAC format work best on PCM audio
signals with samples that have a signed representation and are centered around
zero. Audio signals in which samples have an unsigned representation must be
transformed to a signed representation as described in this document in order
to achieve reasonable compression. The FLAC format is not suited for
compressing audio that is not PCM.</t>
    </section>
    <section anchor="notation-and-conventions" numbered="true" removeInRFC="false" toc="include" pn="section-2">
      <name slugifiedName="name-notation-and-conventions">Notation and Conventions</name>
      <t indent="0" pn="section-2-1">
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>",
    "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>",
    "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>",
    "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be
    interpreted as described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> when, and only when, they appear in all capitals, as
    shown here.
      </t>
      <t indent="0" pn="section-2-2">Values expressed as <tt>u(n)</tt> represent an unsigned big-endian integer using <tt>n</tt> bits. Values expressed as <tt>s(n)</tt> represent a signed big-endian integer using <tt>n</tt> bits, signed two's complement. Where necessary, <tt>n</tt> is expressed as an equation using <tt>*</tt> (multiplication), <tt>/</tt> (division), <tt>+</tt> (addition), or <tt>-</tt> (subtraction). An inclusive range of the number of bits expressed is represented with an ellipsis, such as <tt>u(m...n)</tt>.</t>
      <t indent="0" pn="section-2-3">All shifts mentioned in this document are arithmetic shifts.</t>
      <t indent="0" pn="section-2-4">While the FLAC format can store digital audio as well as other digital signals, this document uses terminology specific to digital audio. The use of more generic terminology was deemed less clear, so a reader interested in non-audio use of the FLAC format is expected to make the translation from audio-specific terms to more generic terminology.</t>
    </section>
    <section anchor="definitions" numbered="true" removeInRFC="false" toc="include" pn="section-3">
      <name slugifiedName="name-definitions">Definitions</name>
      <dl indent="3" newline="false" spacing="normal" pn="section-3-1">
        <dt pn="section-3-1.1"><strong>Lossless compression</strong>:</dt>
        <dd pn="section-3-1.2">Reducing the amount of computer storage space needed to store data without needing to remove or irreversibly alter any of this data in doing so. In other words, decompressing losslessly compressed information returns exactly the original data.</dd>
        <dt pn="section-3-1.3"><strong>Lossy compression</strong>:</dt>
        <dd pn="section-3-1.4">Like lossless compression, but
instead removing, irreversibly altering, or only approximating information for
the purpose of further reducing the amount of computer storage space
needed. In other words, decompressing lossy compressed information returns an
approximation of the original data.</dd>
        <dt pn="section-3-1.5"><strong>Block</strong>:</dt>
        <dd pn="section-3-1.6">A (short) section of linear PCM audio with one or more channels.</dd>
        <dt pn="section-3-1.7"><strong>Subblock</strong>:</dt>
        <dd pn="section-3-1.8">All samples within a corresponding block for one channel. One or more subblocks form a block, and all subblocks in a certain block contain the same number of samples.</dd>
        <dt pn="section-3-1.9"><strong>Frame</strong>:</dt>
        <dd pn="section-3-1.10">A frame header, one or more subframes, and a frame footer. It encodes the contents of a corresponding block.</dd>
        <dt pn="section-3-1.11"><strong>Subframe</strong>:</dt>
        <dd pn="section-3-1.12">An encoded subblock. All subframes within a frame code for the same number of samples. When interchannel decorrelation is used, a subframe can correspond to either the (per-sample) average of two subblocks or the (per-sample) difference between two subblocks, instead of to a subblock directly; see <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/>.</dd>
        <dt pn="section-3-1.13"><strong>Interchannel samples</strong>:</dt>
        <dd pn="section-3-1.14">A sample count that applies to all channels. For example, one second of 44.1 kHz audio has 44100 interchannel samples, meaning each channel has that number of samples.</dd>
        <dt pn="section-3-1.15"><strong>Block size</strong>:</dt>
        <dd pn="section-3-1.16">The number of interchannel samples contained in a block or coded in a frame.</dd>
        <dt pn="section-3-1.17"><strong>Bit depth</strong> or <strong>bits per sample</strong>:</dt>
        <dd pn="section-3-1.18">The number of bits used to contain each sample. This <bcp14>MUST</bcp14> be the same for all subblocks in a block but <bcp14>MAY</bcp14> be different for different subframes in a frame because of interchannel decorrelation. (See <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/> for details on interchannel decorrelation.)</dd>
        <dt pn="section-3-1.19"><strong>Predictor</strong>:</dt>
        <dd pn="section-3-1.20">A model used to predict samples in an audio signal based on past samples. FLAC uses such predictors to remove redundancy in a signal in order to be able to compress it.</dd>
        <dt pn="section-3-1.21"><strong>Linear predictor</strong>:</dt>
        <dd pn="section-3-1.22"> A predictor using linear prediction (see <xref target="LinearPrediction" format="default" sectionFormat="of" derivedContent="LinearPrediction"/>). This is also called <strong>linear predictive coding (LPC)</strong>. With a linear predictor, each prediction is a linear combination of past samples (hence the name). A linear predictor has a causal discrete-time finite impulse response (see <xref target="FIR" format="default" sectionFormat="of" derivedContent="FIR"/>).</dd>
        <dt pn="section-3-1.23"><strong>Fixed predictor</strong>:</dt>
        <dd pn="section-3-1.24">A linear predictor in which the model parameters are the same across all FLAC files and thus do not need to be stored.</dd>
        <dt pn="section-3-1.25"><strong>Predictor order</strong>:</dt>
        <dd pn="section-3-1.26">The number of past samples that a predictor uses. For example, a 4th order predictor uses the 4 samples directly preceding a certain sample to predict it. In FLAC, samples used in a predictor are always consecutive and are always the samples directly before the sample that is being predicted.</dd>
        <dt pn="section-3-1.27"><strong>Residual</strong>:</dt>
        <dd pn="section-3-1.28">The audio signal that remains after a
predictor has been subtracted from a subblock. If the predictor has been able
to remove redundancy from the signal, the samples of the remaining signal (the
<strong>residual samples</strong>) will have, on average, a numerical value
closer to zero than the original signal.</dd>
        <dt pn="section-3-1.29"><strong>Rice
code</strong>:</dt>
        <dd pn="section-3-1.30">A variable-length code (see <xref target="VarLengthCode" format="default" sectionFormat="of" derivedContent="VarLengthCode"/>). It uses a short code for samples close to
zero and a progressively longer code for samples further away from zero. This
makes use of the observation that residual samples are often close to zero.
</dd>
        <dt pn="section-3-1.31"><strong>Muxing</strong>:</dt>
        <dd pn="section-3-1.32">Short for multiplexing. Combining several streams or files into a single stream or file. In 
the context of this document, muxing specifically refers to embedding a FLAC stream in a container as described in <xref target="container-mappings" format="default" sectionFormat="of" derivedContent="Section 10"/>.</dd>
      </dl>
    </section>
    <section anchor="conceptual-overview" numbered="true" removeInRFC="false" toc="include" pn="section-4">
      <name slugifiedName="name-conceptual-overview">Conceptual
Overview</name>
      <t indent="0" pn="section-4-1">Similar to many other audio coders, a FLAC file is encoded following the steps below. To decode a FLAC file, these steps are performed in reverse order, i.e., from bottom to top.</t>
      <ol indent="adaptive" spacing="normal" start="1" type="1" pn="section-4-2">
<li pn="section-4-2.1" derivedCounter="1.">
          <t indent="0" pn="section-4-2.1.1"><strong>Blocking</strong> (see <xref target="blocking" format="default" sectionFormat="of" derivedContent="Section 4.1"/>). The input is split up into many contiguous blocks.</t>
        </li>
        <li pn="section-4-2.2" derivedCounter="2.">
          <t indent="0" pn="section-4-2.2.1"><strong>Interchannel Decorrelation</strong> (see <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/>). In the case of stereo streams, the FLAC format allows for transforming the left-right signal into a mid-side signal, a left-side signal, or a side-right signal to remove redundancy between channels. Choosing between any of these transformations is done independently for each block.</t>
        </li>
        <li pn="section-4-2.3" derivedCounter="3.">
          <t indent="0" pn="section-4-2.3.1"><strong>Prediction</strong> (see <xref target="prediction" format="default" sectionFormat="of" derivedContent="Section 4.3"/>). To remove redundancy in a signal, a predictor is stored for each subblock or its transformation as formed in the previous step. A predictor consists of a simple mathematical description that can be used, as the name implies, to predict a certain sample from the samples that preceded it. As this prediction is rarely exact, the error of this prediction is passed on to the next stage. The predictor of each subblock is completely independent from other subblocks. Since the methods of prediction are known to both the encoder and decoder, only the parameters of the predictor need to be included in the compressed stream. If no usable predictor can be found for a certain subblock, the signal is stored uncompressed, and the next stage is skipped.</t>
        </li>
        <li pn="section-4-2.4" derivedCounter="4.">
          <t indent="0" pn="section-4-2.4.1"><strong>Residual Coding</strong> (see <xref target="residual-coding" format="default" sectionFormat="of" derivedContent="Section 4.4"/>). As the predictor does not describe the signal exactly, the difference between the original signal and the predicted signal (called the error or residual signal) is coded losslessly. If the predictor is effective, the residual signal will require fewer bits per sample than the original signal. FLAC uses Rice coding, a subset of Golomb coding, with either 4-bit or 5-bit parameters to code the residual signal.</t>
        </li>
      </ol>
      <t indent="0" pn="section-4-3">In addition, FLAC specifies a metadata system (see <xref target="file-level-metadata" format="default" sectionFormat="of" derivedContent="Section 8"/>) that allows arbitrary information about the stream to be included at the beginning of the stream.</t>
      <section anchor="blocking" numbered="true" removeInRFC="false" toc="include" pn="section-4.1">
        <name slugifiedName="name-blocking">Blocking</name>
        <t indent="0" pn="section-4.1-1">The block size used for audio data has a direct effect on the compression ratio. If the block size is too small, the resulting large number of frames means that a disproportionate number of bytes will be spent on frame headers. If the block size is too large, the characteristics of the signal may vary so much that the encoder will be unable to find a good predictor. In order to simplify encoder/decoder design, FLAC imposes a minimum block size of 16 samples, except for the last block, and a maximum block size of 65535 samples. The last block is allowed to be smaller than 16 samples to be able to match the length of the encoded audio without using padding.</t>
        <t indent="0" pn="section-4.1-2">While the block size does not have to be constant in a FLAC file, it is often difficult to find the optimal arrangement of block sizes for maximum compression. Because of this, a FLAC stream has explicitly either a constant or variable
   block size throughout and stores a block number instead of a sample number
   to slightly improve compression if a stream has a constant block size.</t>
      </section>
      <section anchor="interchannel-decorrelation" numbered="true" removeInRFC="false" toc="include" pn="section-4.2">
        <name slugifiedName="name-interchannel-decorrelation">Interchannel Decorrelation</name>
        <t indent="0" pn="section-4.2-1">Channels are correlated in many audio files. The FLAC format can exploit this correlation in stereo files by coding an average of all samples in both          
subblocks (a mid channel) or the difference between all samples in both subblocks (a side channel) instead of directly coding subblocks into subframes. The following combinations are possible:</t>
        <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-4.2-2">
          <li pn="section-4.2-2.1">
            <t indent="0" pn="section-4.2-2.1.1"><strong>Independent</strong>. All channels are coded independently. All non-stereo files <bcp14>MUST</bcp14> be encoded this way.</t>
          </li>
          <li pn="section-4.2-2.2">
            <t indent="0" pn="section-4.2-2.2.1"><strong>Mid-side</strong>. A left and right subblock are converted to mid and side subframes. To calculate a sample for a mid subframe, the corresponding left and right samples are summed, and the result is shifted right by 1 bit. To calculate a sample for a side subframe, the corresponding right sample is subtracted from the corresponding left sample. On decoding, all mid channel samples have to be shifted left by 1 bit. Also, if a side channel sample is odd, 1 has to be added to the corresponding mid channel sample after it has been shifted left by 1 bit. To reconstruct the left channel, the corresponding samples in the mid and side subframes are added and the result shifted right by 1 bit. For the right channel, the side channel has to be subtracted from the mid channel and the result shifted right by 1 bit.</t>
          </li>
          <li pn="section-4.2-2.3">
            <t indent="0" pn="section-4.2-2.3.1"><strong>Left-side</strong>. The left subblock is coded, and the left and right subblocks are used to code a side subframe. The side subframe is constructed in the same way as for mid-side. To decode, the right subblock is restored by subtracting the samples in the side subframe from the corresponding samples in the left subframe.</t>
          </li>
          <li pn="section-4.2-2.4">
            <t indent="0" pn="section-4.2-2.4.1"><strong>Side-right</strong>. The left and right subblocks are used to code a side subframe, and the right subblock is coded. The side subframe is constructed in the same way as for mid-side. To decode, the left subblock is restored by adding the samples in the side subframe to the corresponding samples in the right subframe.</t>
          </li>
        </ul>
        <t indent="0" pn="section-4.2-3">The side channel needs one extra bit of bit depth, as the subtraction can produce sample values twice as large as the maximum possible in any given bit depth. The mid channel in mid-side stereo does not need one extra bit, as it is shifted right 1 bit. The right shift of the mid channel does not lead to lossy behavior because an odd sample in the mid subframe must always be accompanied by a corresponding odd sample in the side subframe, which means the lost least-significant bit can be restored by taking it from the sample in the side subframe.</t>
      </section>
      <section anchor="prediction" numbered="true" removeInRFC="false" toc="include" pn="section-4.3">
        <name slugifiedName="name-prediction">Prediction</name>
        <t indent="0" pn="section-4.3-1">The FLAC format has four methods for modeling the input signal:</t>
        <ol indent="adaptive" spacing="normal" start="1" type="1" pn="section-4.3-2">
<li pn="section-4.3-2.1" derivedCounter="1.">
            <t indent="0" pn="section-4.3-2.1.1"><strong>Verbatim</strong>. Samples are stored directly, without any modeling. This method is used for inputs with little correlation. Since the raw signal is not actually passed through the residual coding stage (it is added to the stream "verbatim"), this method is different from using a zero-order fixed predictor.</t>
          </li>
          <li pn="section-4.3-2.2" derivedCounter="2.">
            <t indent="0" pn="section-4.3-2.2.1"><strong>Constant</strong>. A single sample value is stored. This method is used whenever a signal is pure DC ("digital silence"), i.e., a constant value throughout.</t>
          </li>
          <li pn="section-4.3-2.3" derivedCounter="3.">
            <t indent="0" pn="section-4.3-2.3.1"><strong>Fixed predictor</strong>. Samples are predicted with one of five fixed (i.e., predefined) predictors, and the error of this prediction is processed by the residual coder. These fixed predictors are well suited for predicting simple waveforms. Since the predictors are fixed, no predictor coefficients are stored. From a mathematical point of view, the predictors work by extrapolating the signal from the previous samples. The number of previous samples used is equal to the predictor order. For more information, see <xref target="fixed-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.5"/>.</t>
          </li>
          <li pn="section-4.3-2.4" derivedCounter="4.">
            <t indent="0" pn="section-4.3-2.4.1"><strong>Linear predictor</strong>. Samples are predicted using past samples and a set of predictor coefficients, and the error of this prediction is processed by the residual coder. Compared to a fixed predictor, using a generic linear predictor adds overhead as predictor coefficients need to be stored. Therefore, this method of prediction is best suited for predicting more complex waveforms, where the added overhead is offset by space savings in the residual coding stage resulting from more accurate prediction. A linear predictor in FLAC has two parameters besides the predictor coefficients and the predictor order: the number of bits with which each coefficient is stored (the coefficient precision) and a prediction right shift. A prediction is formed by taking the sum of multiplying each predictor coefficient with the corresponding past sample and dividing that sum by applying the specified right shift. For more information, see <xref target="linear-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.6"/>.</t>
          </li>
        </ol>
        <t indent="0" pn="section-4.3-3">A FLAC encoder is free to select any of the above methods to model the input. However, to ensure lossless coding, the following exceptions apply:</t>
        <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-4.3-4">
          <li pn="section-4.3-4.1">When the samples that need to be stored do not all have the same value (i.e., the signal is not constant), a constant subframe cannot be used.</li>
          <li pn="section-4.3-4.2">When an encoder is unable to find a fixed or linear predictor for which all residual samples are representable in 32-bit signed integers as stated in <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/>, a verbatim subframe is used.</li>
        </ul>
        <t indent="0" pn="section-4.3-5">For more information on fixed and linear predictors, see <xref target="Lossless-Compression" format="default" sectionFormat="of" derivedContent="Lossless-Compression"/> and <xref target="Robinson-TR156" format="default" sectionFormat="of" derivedContent="Robinson-TR156"/>.</t>
      </section>
      <section anchor="residual-coding" numbered="true" removeInRFC="false" toc="include" pn="section-4.4">
        <name slugifiedName="name-residual-coding">Residual Coding</name>
        <t indent="0" pn="section-4.4-1">If a subframe uses a predictor to approximate the audio signal, a residual is stored to "correct" the approximation to the exact value. When an effective predictor is used, the average numerical value of the residual samples is smaller than that of the samples before prediction. While having smaller values on average, it is possible that a few "outlier" residual samples are much larger than any of the original samples. 
Sometimes these outliers even exceed the range that the bit depth of the original audio offers.</t>
        <t indent="0" pn="section-4.4-2">To efficiently code such a stream of relatively small numbers with an occasional outlier, Rice coding (a subset of Golomb coding) is used. Depending on how small the numbers are that have to be coded, a Rice parameter is chosen. The numerical value of each residual sample is split into two parts by dividing it by 2<sup>(Rice parameter)</sup>, creating a quotient and a remainder. 

The quotient is stored in unary form and the remainder in binary form. If indeed most residual samples are close to zero and a suitable Rice parameter is chosen, this form of coding, with a so-called variable-length code, uses fewer bits than the residual in unencoded form.</t>
        <t indent="0" pn="section-4.4-3">As Rice codes can only handle unsigned numbers, signed numbers are zigzag encoded to a so-called folded residual. See <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/> for a more thorough explanation.</t>
        <t indent="0" pn="section-4.4-4">Quite often, the optimal Rice parameter varies over the course of a subframe. To accommodate this, the residual can be split up into partitions, where each partition has its own Rice parameter. To keep overhead and complexity low, the number of partitions used in a subframe is limited to powers of two.</t>
        <t indent="0" pn="section-4.4-5">The FLAC format uses two forms of Rice coding, which only differ in the number of bits used for encoding the Rice parameter, either 4 or 5 bits.</t>
      </section>
    </section>
    <section anchor="format-principles" numbered="true" removeInRFC="false" toc="include" pn="section-5">
      <name slugifiedName="name-format-principles">Format Principles</name>
      <t indent="0" pn="section-5-1">FLAC has no format version information, but it does contain reserved space in several places. Future versions of the format <bcp14>MAY</bcp14> use this reserved space safely without breaking the format of older streams. Older decoders <bcp14>MAY</bcp14> choose to abort decoding when encountering data that is encoded using methods they do not recognize. Apart from reserved patterns, the format specifies forbidden patterns in certain places, meaning that the patterns <bcp14>MUST NOT</bcp14> appear in any bitstream. They are listed in the following table.</t>
      <table anchor="tableforbiddenpatterns" align="center" pn="table-1">
        <thead>
          <tr>
            <th align="left" colspan="1" rowspan="1">Description</th>
            <th align="left" colspan="1" rowspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td align="left" colspan="1" rowspan="1">Metadata block type 127</td>
            <td align="left" colspan="1" rowspan="1">
              <xref target="metadata-block-header" format="default" sectionFormat="of" derivedContent="Section 8.1"/></td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">Minimum and maximum block sizes smaller than 16 in streaminfo metadata block</td>
            <td align="left" colspan="1" rowspan="1">
              <xref target="streaminfo" format="default" sectionFormat="of" derivedContent="Section 8.2"/></td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">Sample rate bits 0b1111</td>
            <td align="left" colspan="1" rowspan="1">
              <xref target="sample-rate-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.2"/></td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">Uncommon block size 65536</td>
            <td align="left" colspan="1" rowspan="1">
              <xref target="uncommon-block-size" format="default" sectionFormat="of" derivedContent="Section 9.1.6"/></td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">Predictor coefficient precision bits 0b1111</td>
            <td align="left" colspan="1" rowspan="1">
              <xref target="linear-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.6"/></td>
          </tr>
          <tr>
            <td align="left" colspan="1" rowspan="1">Negative predictor right shift</td>
            <td align="left" colspan="1" rowspan="1">
              <xref target="linear-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.6"/></td>
          </tr>
        </tbody>
      </table>
      <t indent="0" pn="section-5-3">All numbers used in a FLAC bitstream are integers; there are no floating-point representations. All numbers are big-endian coded, except the field lengths used in Vorbis comments (see <xref target="vorbis-comment" format="default" sectionFormat="of" derivedContent="Section 8.6"/>), which are little-endian coded. This exception for Vorbis comments is to keep as much commonality as possible with Vorbis comments as used by the Vorbis codec (see <xref target="Vorbis" format="default" sectionFormat="of" derivedContent="Vorbis"/>). All numbers are unsigned except linear predictor coefficients, the linear prediction shift (see <xref target="linear-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.6"/>), and numbers that directly represent samples, which are signed. None of these restrictions apply to application metadata blocks or to Vorbis comment field contents.</t>
      <t indent="0" pn="section-5-4">All samples encoded to and decoded from the FLAC format <bcp14>MUST</bcp14> be in a signed representation.</t>
      <t indent="0" pn="section-5-5">There are several ways to convert unsigned sample representations to
signed sample representations, but the coding methods provided by the
FLAC format work best on samples that have numerical values that are
centered around zero, i.e., have no DC offset.
In most unsigned audio formats, signals are centered around halfway within the range of the unsigned integer type used. If that is the case, converting sample representations by first copying the number to a signed integer with a sufficient range and then subtracting half of the range of the unsigned integer type results in a signal with samples centered around 0.</t>
      <t indent="0" pn="section-5-6">Unary coding in a FLAC bitstream is done with zero bits terminated with a one bit, e.g., the number 5 is coded unary as 0b000001. This prevents the frame sync code from appearing in unary-coded numbers.</t>
      <t indent="0" pn="section-5-7">When a FLAC file contains data that is forbidden or otherwise not valid, decoder behavior is left unspecified. A decoder <bcp14>MAY</bcp14> choose to stop decoding upon encountering such data. Examples of such data include the following:</t>
      <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-5-8">
        <li pn="section-5-8.1">One or more decoded sample values exceed the range offered by the bit depth as coded for that frame. For example, in a frame with a bit depth of 8 bits, any samples not in the inclusive range from -128 to 127 are not valid.</li>
        <li pn="section-5-8.2">The number of wasted bits (see <xref target="wasted-bits-per-sample" format="default" sectionFormat="of" derivedContent="Section 9.2.2"/>) used by a subframe is such that the bit depth of that subframe (see <xref target="constant-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.3"/> for a description of subframe bit depth) equals zero or is negative.</li>
        <li pn="section-5-8.3">A frame header Cyclic Redundancy Check (CRC) (see <xref target="frame-header-crc" format="default" sectionFormat="of" derivedContent="Section 9.1.8"/>) or frame footer CRC (see <xref target="frame-footer" format="default" sectionFormat="of" derivedContent="Section 9.3"/>) does not validate.</li>
        <li pn="section-5-8.4">One of the forbidden bit patterns described in <xref target="tableforbiddenpatterns" format="default" sectionFormat="of" derivedContent="Table 1"/> is used.</li>
      </ul>
    </section>
    <section anchor="format-layout-overview" numbered="true" removeInRFC="false" toc="include" pn="section-6">
      <name slugifiedName="name-format-layout-overview">Format Layout Overview</name>
      <t indent="0" pn="section-6-1">A FLAC bitstream consists of the <tt>fLaC</tt> (i.e., 0x664C6143) marker at the beginning of the stream, followed by a mandatory metadata block (called the streaminfo metadata block), any number of other metadata blocks, and then the audio frames.</t>
      <t indent="0" pn="section-6-2">FLAC supports 127 kinds of metadata blocks; currently, 7 kinds are defined in <xref target="file-level-metadata" format="default" sectionFormat="of" derivedContent="Section 8"/>.</t>
      <t indent="0" pn="section-6-3">The audio data is composed of one or more audio frames. Each frame consists of a frame header that contains a sync code, information about the frame (like the block size, sample rate, and number of channels), and an 8-bit CRC. The frame header also contains either the sample number of the first sample in the frame (for variable block size streams) or the frame number (for fixed block size streams). This allows for fast, sample-accurate seeking to be performed. 
Following the frame header are encoded subframes, one for each channel. The frame is then zero-padded to a byte boundary and finished with a frame footer containing a checksum for the frame. Each subframe has its own header that specifies how the subframe is encoded.</t>
      <t indent="0" pn="section-6-4">In order to allow a decoder to start decoding at any place in the stream, each frame starts with a byte-aligned 15-bit sync code. However, since it is not guaranteed that the sync code does not appear elsewhere in the frame, the decoder can check that it synced correctly by parsing the rest of the frame header and validating the frame header CRC.</t>
      <t indent="0" pn="section-6-5">Furthermore, to allow a decoder to start decoding at any place in the stream even without having received a streaminfo metadata block, each frame header contains some basic information about the stream. This information includes sample rate, bits per sample, number of channels, etc. Since the frame header is overhead, it has a direct effect on the compression ratio. To keep the frame header as small as possible, FLAC uses lookup tables for the most commonly used values for frame properties. When a certain property has a value that is not covered by the lookup table, the decoder is directed to find the value of that property (for example, the sample rate) at the end of the frame header or in the streaminfo metadata block. If a frame header refers to the streaminfo metadata block, the file is not "streamable"; see <xref target="streamable-subset" format="default" sectionFormat="of" derivedContent="Section 7"/> for details. By using lookup tables, the file is streamable and the frame header size is small for the most common forms of audio data.</t>
      <t indent="0" pn="section-6-6">Individual subframes (one for each channel) are coded separately within a frame and appear serially in the stream. In other words, the encoded audio data is NOT channel-interleaved. This reduces decoder complexity at the cost of requiring larger decode buffers. Each subframe has its own header specifying the attributes of the subframe, like prediction method and order, residual coding parameters, etc. Each subframe header is followed by the encoded audio data for that channel.</t>
    </section>
    <section anchor="streamable-subset" numbered="true" removeInRFC="false" toc="include" pn="section-7">
      <name slugifiedName="name-streamable-subset">Streamable Subset</name>
      <t indent="0" pn="section-7-1">The FLAC format specifies a subset of itself as the FLAC streamable subset. The purpose of this is to ensure that any streams encoded according to this subset are truly "streamable", meaning that a decoder that cannot seek within the stream can still pick up in the middle of the stream and start decoding. It also makes hardware decoder implementations more practical by limiting the encoding parameters in such a way that decoder buffer sizes and other resource requirements can be easily determined. The streamable subset makes the following limitations on what <bcp14>MAY</bcp14> be used in the stream:</t>
      <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-7-2">
        <li pn="section-7-2.1">The sample rate bits (see <xref target="sample-rate-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.2"/>) in the frame header <bcp14>MUST</bcp14> be 0b0001-0b1110, i.e., the frame header <bcp14>MUST NOT</bcp14> refer to the streaminfo metadata block to describe the sample rate.</li>
        <li pn="section-7-2.2">The bit depth bits (see <xref target="bit-depth-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.4"/>) in the frame header <bcp14>MUST</bcp14> be 0b001-0b111, i.e., the frame header <bcp14>MUST NOT</bcp14> refer to the streaminfo metadata block to describe the bit depth.</li>
        <li pn="section-7-2.3">The stream <bcp14>MUST NOT</bcp14> contain blocks with more than 16384 interchannel samples, i.e., the maximum block size must not be larger than 16384.</li>
        <li pn="section-7-2.4">Audio with a sample rate less than or equal to 48000 Hz <bcp14>MUST NOT</bcp14> be contained in blocks with more than 4608 interchannel samples, i.e., the maximum block size used for this audio must not be larger than 4608.</li>
        <li pn="section-7-2.5">Linear prediction subframes (see <xref target="linear-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.6"/>) containing audio with a sample rate less than or equal to 48000 Hz <bcp14>MUST</bcp14> have a predictor order less than or equal to 12, i.e., the subframe type bits in the subframe header (see <xref target="subframe-header" format="default" sectionFormat="of" derivedContent="Section 9.2.1"/>) <bcp14>MUST NOT</bcp14> be 0b101100-0b111111.</li>
        <li pn="section-7-2.6">The Rice partition order (see <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/>) <bcp14>MUST</bcp14> be less than or equal to 8.</li>
        <li pn="section-7-2.7">The channel ordering <bcp14>MUST</bcp14> be equal to one defined in <xref target="channels-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.3"/>, i.e., the FLAC file <bcp14>MUST NOT</bcp14> need a WAVEFORMATEXTENSIBLE_CHANNEL_MASK tag to describe the channel ordering. See <xref target="channel-mask" format="default" sectionFormat="of" derivedContent="Section 8.6.2"/> for details.</li>
      </ul>
    </section>
    <section anchor="file-level-metadata" numbered="true" removeInRFC="false" toc="include" pn="section-8">
      <name slugifiedName="name-file-level-metadata">File-Level Metadata</name>
      <t indent="0" pn="section-8-1">At the start of a FLAC file or stream, following the <tt>fLaC</tt> ASCII file signature, one or more metadata blocks <bcp14>MUST</bcp14> be present before any audio frames appear. The first metadata block <bcp14>MUST</bcp14> be a streaminfo metadata block.</t>
      <section anchor="metadata-block-header" numbered="true" removeInRFC="false" toc="include" pn="section-8.1">
        <name slugifiedName="name-metadata-block-header">Metadata Block Header</name>
        <t indent="0" pn="section-8.1-1">Each metadata block starts with a 4-byte header. The first bit in this header flags whether a metadata block is the last one. It is 0 when other metadata blocks follow; otherwise, it is 1. The 7 remaining bits of the first header byte contain the type of the metadata block as an unsigned number between 0 and 126, according to the following table. A value of 127 (i.e., 0b1111111) is forbidden. The three bytes that follow code for the size of the metadata block in bytes, excluding the 4 header bytes, as an unsigned number coded big-endian.</t>
        <table align="center" pn="table-2">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Value</th>
              <th align="left" colspan="1" rowspan="1">Metadata Block Type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">0</td>
              <td align="left" colspan="1" rowspan="1">Streaminfo</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">1</td>
              <td align="left" colspan="1" rowspan="1">Padding</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">2</td>
              <td align="left" colspan="1" rowspan="1">Application</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">3</td>
              <td align="left" colspan="1" rowspan="1">Seek table</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">4</td>
              <td align="left" colspan="1" rowspan="1">Vorbis comment</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">5</td>
              <td align="left" colspan="1" rowspan="1">Cuesheet</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">6</td>
              <td align="left" colspan="1" rowspan="1">Picture</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">7 - 126</td>
              <td align="left" colspan="1" rowspan="1">Reserved</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">127</td>
              <td align="left" colspan="1" rowspan="1">Forbidden (to avoid confusion with a frame sync code)</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section anchor="streaminfo" numbered="true" removeInRFC="false" toc="include" pn="section-8.2">
        <name slugifiedName="name-streaminfo">Streaminfo</name>
        <t indent="0" pn="section-8.2-1">The streaminfo metadata block has information about the whole stream, such as sample rate, number of channels, total number of samples, etc. It <bcp14>MUST</bcp14> be present as the first metadata block in the stream. Other metadata blocks <bcp14>MAY</bcp14> follow. There <bcp14>MUST</bcp14> be no more than one streaminfo metadata block per FLAC stream.</t>
        <t indent="0" pn="section-8.2-2">If the streaminfo metadata block contains incorrect or incomplete information, decoder behavior is left unspecified (i.e., it is up to the decoder implementation). A decoder <bcp14>MAY</bcp14> choose to stop further decoding when the information supplied by the streaminfo metadata block turns out to be incorrect or contains forbidden values. A decoder accepting information from the streaminfo metadata block (most significantly, the maximum frame size, maximum block size, number of audio channels, number of bits per sample, and total number of samples) without doing further checks during decoding of audio frames could be vulnerable to buffer overflows. See also <xref target="security-considerations" format="default" sectionFormat="of" derivedContent="Section 11"/>.</t>
        <t indent="0" pn="section-8.2-3">The following table describes the streaminfo metadata block in order, excluding the metadata block header.</t>
        <table align="center" pn="table-3">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(16)</tt></td>
              <td align="left" colspan="1" rowspan="1">The minimum block size (in samples) used in the stream, excluding the last block.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(16)</tt></td>
              <td align="left" colspan="1" rowspan="1">The maximum block size (in samples) used in the stream.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(24)</tt></td>
              <td align="left" colspan="1" rowspan="1">The minimum frame size (in bytes) used in the stream. A value of <tt>0</tt> signifies that the value is not known.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(24)</tt></td>
              <td align="left" colspan="1" rowspan="1">The maximum frame size (in bytes) used in the stream. A value of <tt>0</tt> signifies that the value is not known.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(20)</tt></td>
              <td align="left" colspan="1" rowspan="1">Sample rate in Hz.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(3)</tt></td>
              <td align="left" colspan="1" rowspan="1">(number of channels)-1. FLAC supports from 1 to 8 channels.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(5)</tt></td>
              <td align="left" colspan="1" rowspan="1">(bits per sample)-1. FLAC supports from 4 to 32 bits per sample.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(36)</tt></td>
              <td align="left" colspan="1" rowspan="1">Total number of interchannel samples in the stream. A value of 0 here means the number of total samples is unknown.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(128)</tt></td>
              <td align="left" colspan="1" rowspan="1">MD5 checksum of the unencoded audio data. This allows the decoder to determine if an error exists in the audio data even when, despite the error, the bitstream itself is valid. A value of <tt>0</tt> signifies that the value is not known.</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-8.2-5">The minimum block size and the maximum block size <bcp14>MUST</bcp14> be in the 16-65535 range. The minimum block size <bcp14>MUST</bcp14> be equal to or less than the maximum block size.</t>
        <t indent="0" pn="section-8.2-6">Any frame but the last one <bcp14>MUST</bcp14> have a block size equal to or greater than the minimum block size and <bcp14>MUST</bcp14> have a block size equal to or less than the maximum block size. The last frame <bcp14>MUST</bcp14> have a block size equal to or less than the maximum block size; it does not have to comply to the minimum block size because the block size of that frame must be able to accommodate the length of the audio data the stream contains.</t>
        <t indent="0" pn="section-8.2-7">If the minimum block size is equal to the maximum block size, the file contains a fixed block size stream, as the minimum block size excludes the last block. Note that in the case of a stream with a variable block size, the actual maximum block size <bcp14>MAY</bcp14> be smaller than the maximum block size listed in the streaminfo metadata block, and the actual smallest block size excluding the last block <bcp14>MAY</bcp14> be larger than the minimum block size listed in the streaminfo metadata block. 
This is because the encoder has to write these fields before receiving any input audio data and cannot know beforehand what block sizes it will use, only between what bounds the block sizes will be chosen.</t>
        <t indent="0" pn="section-8.2-8">The sample rate <bcp14>MUST NOT</bcp14> be 0 when the FLAC file contains audio. A sample rate of 0 <bcp14>MAY</bcp14> be used when non-audio is represented. This is useful if data is encoded that is not along a time axis or when the sample rate of the data lies outside the range that FLAC can represent in the streaminfo metadata block. If a sample rate of 0 is used, it is recommended to store the meaning of the encoded content in a Vorbis comment field (see <xref target="vorbis-comment" format="default" sectionFormat="of" derivedContent="Section 8.6"/>) or an application metadata block (see <xref target="application" format="default" sectionFormat="of" derivedContent="Section 8.4"/>). This document does not define such metadata.</t>
        <t indent="0" pn="section-8.2-9">The MD5 checksum is computed by applying the MD5 message-digest algorithm in <xref target="RFC1321" format="default" sectionFormat="of" derivedContent="RFC1321"/>. The message to this algorithm consists of all the samples of all channels interleaved, represented in signed, little-endian form. 
This interleaving is on a per-sample basis, so for a stereo file, this means
the first sample of the first channel, then the first sample of the
second channel, then the second sample of the first channel, etc. Before
computing the checksum, all samples must be byte-aligned. If the bit depth is
not a whole number of bytes, the value of each sample is sign-extended to the
next whole number of bytes.</t>
        <t indent="0" pn="section-8.2-10">In the case of a 2-channel stream with 6-bit samples, bits will be lined up as follows:</t>
        <artwork type="ascii-art" align="left" pn="section-8.2-11">
SSAAAAAASSBBBBBBSSCCCCCC
^   ^   ^   ^   ^   ^
|   |   |   |   |  Bits of 2nd sample of 1st channel
|   |   |   |  Sign extension bits of 2nd sample of 2nd channel
|   |   |  Bits of 1st sample of 2nd channel
|   |  Sign extension bits of 1st sample of 2nd channel
|  Bits of 1st sample of 1st channel
Sign extension bits of 1st sample of 1st channel
</artwork>
        <t indent="0" pn="section-8.2-12">In the case of a 1-channel stream with 12-bit samples, bits are lined up in little-endian byte order as follows:</t>
        <artwork type="ascii-art" align="left" pn="section-8.2-13">
AAAAAAAASSSSAAAABBBBBBBBSSSSBBBB
   ^     ^   ^   ^       ^   ^
   |     |   |   |       |  Most-significant 4 bits of 2nd sample
   |     |   |   | Sign extension bits of 2nd sample
   |     |   |  Least-significant 8 bits of 2nd sample
   |     |  Most-significant 4 bits of 1st sample
   |    Sign extension bits of 1st sample
  Least-significant 8 bits of 1st sample
</artwork>
      </section>
      <section anchor="padding" numbered="true" removeInRFC="false" toc="include" pn="section-8.3">
        <name slugifiedName="name-padding">Padding</name>
        <t indent="0" pn="section-8.3-1">The padding metadata block allows for an arbitrary amount of padding. This block is useful when it is known that metadata will be edited after encoding; the user can instruct the encoder to reserve a padding block of sufficient size so that when metadata is added, it will simply overwrite the padding (which is relatively quick) instead of having to insert it into the existing file (which would normally require rewriting the entire file). There <bcp14>MAY</bcp14> be one or more padding metadata blocks per FLAC stream.</t>
        <table align="center" pn="table-4">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(n)</tt></td>
              <td align="left" colspan="1" rowspan="1">n "0" bits (n <bcp14>MUST</bcp14> be a multiple of 8, i.e., a whole number of bytes, and <bcp14>MAY</bcp14> be zero). n is 8 times the size described in the metadata block header.</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section anchor="application" numbered="true" removeInRFC="false" toc="include" pn="section-8.4">
        <name slugifiedName="name-application">Application</name>
        <t indent="0" pn="section-8.4-1">The application metadata block is for use by third-party applications. The only mandatory field is a 32-bit application identifier (application ID). Application IDs are registered in the IANA "FLAC Application Metadata Block IDs" registry (see <xref target="application-id-registry" format="default" sectionFormat="of" derivedContent="Section 12.2"/>).</t>
        <table align="center" pn="table-5">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">Registered application ID.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(n)</tt></td>
              <td align="left" colspan="1" rowspan="1">Application data (n <bcp14>MUST</bcp14> be a multiple of 8, i.e., a whole number of bytes). n is 8 times the size described in the metadata block header minus the 32 bits already used for the application ID.</td>
            </tr>
          </tbody>
        </table>
      </section>
      <section anchor="seektable" numbered="true" removeInRFC="false" toc="include" pn="section-8.5">
        <name slugifiedName="name-seek-table">Seek Table</name>
        <t indent="0" pn="section-8.5-1">The seek table metadata block can be used to store seek points. It is possible to seek to any given sample in a FLAC stream without a seek table, but the delay can be unpredictable since the bitrate may vary widely within a stream. By adding seek points to a stream, this delay can be significantly reduced. There <bcp14>MUST NOT</bcp14> be more than one seek table metadata block in a stream, but the table can have any number of seek points.</t>
        <t indent="0" pn="section-8.5-2">Each seek point takes 18 bytes, so a seek table with 1% resolution within a stream adds less than 2 kilobytes of data. The number of seek points is implied by the size described in the metadata block header, i.e., equal to size / 18. There is also a special "placeholder" seek point that will be ignored by decoders but can be used to reserve space for future seek point insertion.</t>
        <table align="center" pn="table-6">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">Seek points</td>
              <td align="left" colspan="1" rowspan="1">Zero or more seek points as defined in <xref target="seekpoint" format="default" sectionFormat="of" derivedContent="Section 8.5.1"/>.</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-8.5-4">A seek table is generally not usable for seeking in a FLAC file embedded in a container (see <xref target="container-mappings" format="default" sectionFormat="of" derivedContent="Section 10"/>), as such containers usually interleave FLAC data with other data and the offsets used in seek points are those of an unmuxed FLAC stream. Also, containers often provide their own seeking methods. However, it is possible to store the seek table in the container along with other metadata when muxing a FLAC file, so this stored seek table can be restored when demuxing the FLAC stream into a standalone FLAC file.</t>
        <section anchor="seekpoint" numbered="true" removeInRFC="false" toc="include" pn="section-8.5.1">
          <name slugifiedName="name-seek-point">Seek Point</name>
          <table align="center" pn="table-7">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Data</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(64)</tt></td>
                <td align="left" colspan="1" rowspan="1">Sample number of the first sample in the target frame or <tt>0xFFFFFFFFFFFFFFFF</tt> for a placeholder point.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(64)</tt></td>
                <td align="left" colspan="1" rowspan="1">Offset (in bytes) from the first byte of the first frame header to the first byte of the target frame's header.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(16)</tt></td>
                <td align="left" colspan="1" rowspan="1">Number of samples in the target frame.</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-8.5.1-2">Notes:</t>
          <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-8.5.1-3">
            <li pn="section-8.5.1-3.1">For placeholder points, the second and third field values are undefined.</li>
            <li pn="section-8.5.1-3.2">Seek points within a table <bcp14>MUST</bcp14> be sorted in ascending order by sample number.</li>
            <li pn="section-8.5.1-3.3">Seek points within a table <bcp14>MUST</bcp14> be unique by sample number, with the exception of placeholder points.</li>
            <li pn="section-8.5.1-3.4">The previous two notes imply that there <bcp14>MAY</bcp14> be any number of placeholder points, but they <bcp14>MUST</bcp14> all occur at the end of the table.</li>
            <li pn="section-8.5.1-3.5">The sample offsets are those of an unmuxed FLAC stream. The offsets <bcp14>MUST NOT</bcp14> be updated on muxing to reflect the new offsets of FLAC frames in a container.</li>
          </ul>
        </section>
      </section>
      <section anchor="vorbis-comment" numbered="true" removeInRFC="false" toc="include" pn="section-8.6">
        <name slugifiedName="name-vorbis-comment">Vorbis Comment</name>
        <t indent="0" pn="section-8.6-1">A Vorbis comment metadata block contains human-readable information coded
in UTF-8. The name "Vorbis comment" points to the fact that the Vorbis codec
stores such metadata in almost the same way (see <xref target="Vorbis" format="default" sectionFormat="of" derivedContent="Vorbis"/>). A Vorbis comment metadata block consists of a vendor
string optionally followed by a number of fields, which are pairs of field
names and field contents. The vendor string contains the name of the program
that generated the file or stream.  The fields contain metadata describing
various aspects of the contained audio. Many users refer to these fields as
"FLAC tags" or simply as "tags". A FLAC file <bcp14>MUST NOT</bcp14> contain
more than one Vorbis comment metadata block.</t>
        <t indent="0" pn="section-8.6-2">In a Vorbis comment metadata block, the metadata block header is directly
followed by 4 bytes containing the length in bytes of the vendor string as an
unsigned number coded little-endian. The vendor string follows, is UTF-8 coded
and is not terminated in any way.
</t>
        <t indent="0" pn="section-8.6-3">Following the vendor string are 4 bytes containing the number of fields
that are in the Vorbis comment block, stored as an unsigned number coded
little-endian. If this number is non-zero, it is followed by the fields
themselves, each of which is stored with a 4-byte length. For each field, the
field length in bytes is stored as a 4-byte unsigned number coded
little-endian. The field itself follows it. Like the vendor string, the field
is UTF-8 coded and not terminated in any way.</t>
        <t indent="0" pn="section-8.6-4">Each field consists of a field name and field contents, separated by an = character. The field name <bcp14>MUST</bcp14> only consist of UTF-8 code points U+0020 through U+007E, excluding U+003D, which is the = character. In other words, the field name can contain all printable ASCII characters except the equals sign. The evaluation of the field names <bcp14>MUST</bcp14> be case insensitive, so U+0041 through 0+005A (A-Z) <bcp14>MUST</bcp14> be considered equivalent to U+0061 through U+007A (a-z). The field contents can contain any UTF-8 character.</t>
        <t indent="0" pn="section-8.6-5">Note that the Vorbis comment as used in Vorbis allows for 2<sup>64</sup> bytes of data whereas the FLAC metadata block is limited to 2<sup>24</sup> bytes. Given the stated purpose of Vorbis comments, i.e., human-readable textual information, the FLAC metadata block limit is unlikely to be restrictive. Also, note that the 32-bit field lengths are coded little-endian as opposed to the usual big-endian coding of fixed-length integers in the rest of the FLAC format.</t>
        <section anchor="standard-field-names" numbered="true" removeInRFC="false" toc="include" pn="section-8.6.1">
          <name slugifiedName="name-standard-field-names">Standard Field Names</name>
          <t indent="0" pn="section-8.6.1-1">Only one standard field name is defined: the channel mask field (see <xref target="channel-mask" format="default" sectionFormat="of" derivedContent="Section 8.6.2"/>). No other field names are defined because the applicability of any field name is strongly tied to the content it is associated with. For example, field names that are useful for describing files that contain a single work of music would be unusable when labeling archived broadcasts, recordings of any kind, or a collection of music works. Even when describing a single work of music, different conventions exist depending on the kind of music: orchestral music differs from music by solo artists or bands.</t>
          <t indent="0" pn="section-8.6.1-2">Despite the fact that no field names are formally defined, there is a general trend among devices and software capable of FLAC playback that are meant to play music. Most of those recognize at least the following field names:</t>
          <dl indent="3" newline="false" spacing="normal" pn="section-8.6.1-3">
            <dt pn="section-8.6.1-3.1">Title:</dt>
            <dd pn="section-8.6.1-3.2">Name of the current work.</dd>
            <dt pn="section-8.6.1-3.3">Artist:</dt>
            <dd pn="section-8.6.1-3.4">Name of the artist generally responsible for the current work. For orchestral works, this is usually the composer; otherwise, it is often the performer.</dd>
            <dt pn="section-8.6.1-3.5">Album:</dt>
            <dd pn="section-8.6.1-3.6">Name of the collection the current work belongs to.</dd>
          </dl>
          <t indent="0" pn="section-8.6.1-4">For a more comprehensive list of possible field names suited for describing a single work of music in various genres, the list of tags used in the MusicBrainz project is suggested; see <xref target="MusicBrainz" format="default" sectionFormat="of" derivedContent="MusicBrainz"/>.</t>
        </section>
        <section anchor="channel-mask" numbered="true" removeInRFC="false" toc="include" pn="section-8.6.2">
          <name slugifiedName="name-channel-mask">Channel Mask</name>
          <t indent="0" pn="section-8.6.2-1">Besides fields containing information about the work itself, one field is defined for technical reasons: WAVEFORMATEXTENSIBLE_CHANNEL_MASK. This field is used to communicate that the channels in a file differ from the default channels defined in <xref target="channels-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.3"/>. For example, by default, a FLAC file containing two channels is interpreted to contain a left and right channel, but with this field, it is possible to describe different channel contents.</t>
          <t indent="0" pn="section-8.6.2-2">The channel mask consists of flag bits indicating which channels are
present. The flags only signal which channels are present, not in which order,
so if a file to be encoded has channels that are ordered differently, they
have to be reordered. This mask is stored with a hexadecimal representation
preceded by 0x; see the examples below. Please note that a file in which the channel
order is defined through the WAVEFORMATEXTENSIBLE_CHANNEL_MASK is not
streamable (see <xref target="streamable-subset" format="default" sectionFormat="of" derivedContent="Section 7"/>), as the field is not
found in each frame header. The mask bits can be found in the following
table.</t>
          <table anchor="mask-bits-table" align="center" pn="table-8">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Bit Number</th>
                <th align="left" colspan="1" rowspan="1">Channel Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">Front left</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">Front right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">Front center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">3</td>
                <td align="left" colspan="1" rowspan="1">Low-frequency effects (LFE)</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">4</td>
                <td align="left" colspan="1" rowspan="1">Back left</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">5</td>
                <td align="left" colspan="1" rowspan="1">Back right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">6</td>
                <td align="left" colspan="1" rowspan="1">Front left of center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7</td>
                <td align="left" colspan="1" rowspan="1">Front right of center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">8</td>
                <td align="left" colspan="1" rowspan="1">Back center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">9</td>
                <td align="left" colspan="1" rowspan="1">Side left</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">10</td>
                <td align="left" colspan="1" rowspan="1">Side right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">11</td>
                <td align="left" colspan="1" rowspan="1">Top center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">12</td>
                <td align="left" colspan="1" rowspan="1">Top front left</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">13</td>
                <td align="left" colspan="1" rowspan="1">Top front center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">14</td>
                <td align="left" colspan="1" rowspan="1">Top front right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">15</td>
                <td align="left" colspan="1" rowspan="1">Top rear left</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">16</td>
                <td align="left" colspan="1" rowspan="1">Top rear center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">17</td>
                <td align="left" colspan="1" rowspan="1">Top rear right</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-8.6.2-4">Following are three examples:</t>
          <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-8.6.2-5">
            <li pn="section-8.6.2-5.1">A file has a single channel -- an LFE channel. The Vorbis comment field is WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x8.</li>
            <li pn="section-8.6.2-5.2">A file has four channels -- front left, front right, top front left, and top front right. The Vorbis comment field is WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x5003.</li>
            <li pn="section-8.6.2-5.3">An input has four channels -- back center, top front center, front center, and top rear center in that order. These have to be reordered to front center, back center, top front center, and top rear center. The Vorbis comment field added is WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x12104.</li>
          </ul>
          <t indent="0" pn="section-8.6.2-6">WAVEFORMATEXTENSIBLE_CHANNEL_MASK fields <bcp14>MAY</bcp14> be padded with zeros, for example, 0x0008 for a single LFE channel. Parsing of WAVEFORMATEXTENSIBLE_CHANNEL_MASK fields <bcp14>MUST</bcp14> be case-insensitive for both the field name and the field contents.</t>
          <t indent="0" pn="section-8.6.2-7">A WAVEFORMATEXTENSIBLE_CHANNEL_MASK field of 0x0 can be used to indicate that none of the audio channels of a file correlate with speaker positions. This is the case when audio needs to be decoded into speaker positions (e.g., Ambisonics B-format audio) or when a multitrack recording is contained.</t>
          <t indent="0" pn="section-8.6.2-8">It is possible for a WAVEFORMATEXTENSIBLE_CHANNEL_MASK field to code for fewer channels than are present in the audio. If that is the case, the remaining channels <bcp14>SHOULD NOT</bcp14> be rendered by a playback application unfamiliar with their purpose. 

For example, the Ambisonics UHJ format is compatible with stereo playback: its first two channels can be played back on stereo equipment, but all four channels together can be decoded into surround sound. For that example, the Vorbis comment field WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x3 would be set, indicating that the first two channels are front left and front right and other channels do not correlate with speaker positions directly.</t>
          <t indent="0" pn="section-8.6.2-9">If audio channels not assigned to any speaker are contained and decoding to speaker positions is possible, it is recommended to provide metadata on how this decoding should take place in another Vorbis comment field or an application metadata block. This document does not define such metadata.</t>
        </section>
      </section>
      <section anchor="cuesheet" numbered="true" removeInRFC="false" toc="include" pn="section-8.7">
        <name slugifiedName="name-cuesheet">Cuesheet</name>
        <t indent="0" pn="section-8.7-1">A cuesheet metadata block can be used either to store the track and index point structure of a Compact Disc Digital Audio (CD-DA) along with its audio or to provide a mechanism to store locations of interest within a FLAC file. Certain aspects of this metadata block come directly from the CD-DA specification (called Red Book), which is standardized as <xref target="IEC.60908.1999" format="default" sectionFormat="of" derivedContent="IEC.60908.1999"/>.  The description below is complete, and further reference to <xref target="IEC.60908.1999" format="default" sectionFormat="of" derivedContent="IEC.60908.1999"/> is not needed to implement this metadata block.</t>
        <t indent="0" pn="section-8.7-2">The structure of a cuesheet metadata block is enumerated in the following table.</t>
        <table align="center" pn="table-9">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(128*8)</tt></td>
              <td align="left" colspan="1" rowspan="1">Media catalog number in ASCII printable characters 0x20-0x7E.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(64)</tt></td>
              <td align="left" colspan="1" rowspan="1">Number of lead-in samples.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(1)</tt></td>
              <td align="left" colspan="1" rowspan="1">
                <tt>1</tt> if the cuesheet corresponds to a CD-DA; else <tt>0</tt>.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(7+258*8)</tt></td>
              <td align="left" colspan="1" rowspan="1">Reserved. All bits <bcp14>MUST</bcp14> be set to zero.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(8)</tt></td>
              <td align="left" colspan="1" rowspan="1">Number of tracks in this cuesheet.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">Cuesheet tracks</td>
              <td align="left" colspan="1" rowspan="1">A number of structures as specified in <xref target="cuesheet-track" format="default" sectionFormat="of" derivedContent="Section 8.7.1"/> equal to the number of tracks specified previously.</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-8.7-4">If the media catalog number is less than 128 bytes long, it is right-padded with 0x00 bytes. For CD-DA, this is a 13-digit number followed by 115 0x00 bytes.</t>
        <t indent="0" pn="section-8.7-5">The number of lead-in samples has meaning only for CD-DA cuesheets; for other uses, it should be 0. For CD-DA, the lead-in is the TRACK 00 area where the table of contents is stored; more precisely, it is the number of samples from the first sample of the media to the first sample of the first index point of the first track. According to <xref target="IEC.60908.1999" format="default" sectionFormat="of" derivedContent="IEC.60908.1999"/>, the lead-in <bcp14>MUST</bcp14> be silent, and CD grabbing software does not usually store it; additionally, the lead-in <bcp14>MUST</bcp14> be at least two seconds but <bcp14>MAY</bcp14> be longer. For these reasons, the lead-in length is stored here so that the absolute position of the first track can be computed. Note that the lead-in stored here is the number of samples up to the first index point of the first track, not necessarily to INDEX 01 of the first track; even the first track <bcp14>MAY</bcp14> have INDEX 00 data.</t>
        <t indent="0" pn="section-8.7-6">The number of tracks <bcp14>MUST</bcp14> be at least 1, as a cuesheet block <bcp14>MUST</bcp14> have a lead-out track. For CD-DA, this number <bcp14>MUST</bcp14> be no more than 100 (99 regular tracks and one lead-out track). The lead-out track is always the last track in the cuesheet. For CD-DA, the lead-out track number <bcp14>MUST</bcp14> be 170 as specified by <xref target="IEC.60908.1999" format="default" sectionFormat="of" derivedContent="IEC.60908.1999"/>; otherwise, it <bcp14>MUST</bcp14> be 255.</t>
        <section anchor="cuesheet-track" numbered="true" removeInRFC="false" toc="include" pn="section-8.7.1">
          <name slugifiedName="name-cuesheet-track">Cuesheet Track</name>
          <table align="center" pn="table-10">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Data</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(64)</tt></td>
                <td align="left" colspan="1" rowspan="1">Track offset of the first index point in samples, relative to the beginning of the FLAC audio stream.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(8)</tt></td>
                <td align="left" colspan="1" rowspan="1">Track number.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(12*8)</tt></td>
                <td align="left" colspan="1" rowspan="1">Track ISRC.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(1)</tt></td>
                <td align="left" colspan="1" rowspan="1">The track type: 0 for audio, 1 for non-audio. This corresponds to the CD-DA Q-channel control bit 3.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(1)</tt></td>
                <td align="left" colspan="1" rowspan="1">The pre-emphasis flag: 0 for no pre-emphasis, 1 for pre-emphasis. This corresponds to the CD-DA Q-channel control bit 5.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(6+13*8)</tt></td>
                <td align="left" colspan="1" rowspan="1">Reserved. All bits <bcp14>MUST</bcp14> be set to zero.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(8)</tt></td>
                <td align="left" colspan="1" rowspan="1">The number of track index points.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">Cuesheet track index points</td>
                <td align="left" colspan="1" rowspan="1">For all tracks except the lead-out track, a number of structures as specified in <xref target="cuesheet-track-index-point" format="default" sectionFormat="of" derivedContent="Section 8.7.1.1"/> equal to the number of index points specified previously.</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-8.7.1-2">Note that the track offset differs from the one in CD-DA, where the track's offset in the table of contents (TOC) is that of the track's INDEX 01 even if there is an INDEX 00. For CD-DA, the track offset <bcp14>MUST</bcp14> be evenly divisible by 588 samples (588 samples = 44100 samples/s * 1/75 s).</t>
          <t indent="0" pn="section-8.7.1-3">A track number of 0 is not allowed because the CD-DA specification reserves this for the lead-in. For CD-DA, the number <bcp14>MUST</bcp14> be 1-99 or 170 for the lead-out; for non-CD-DA, the track number <bcp14>MUST</bcp14> be 255 for the lead-out. It is recommended to start with track 1 and increase sequentially. Track numbers <bcp14>MUST</bcp14> be unique within a cuesheet.</t>
          <t indent="0" pn="section-8.7.1-4">The track ISRC (International Standard Recording Code) is a 12-digit alphanumeric code; see <xref target="ISRC-handbook" format="default" sectionFormat="of" derivedContent="ISRC-handbook"/>. A value of 12 ASCII 0x00 characters <bcp14>MAY</bcp14> be used to denote the absence of an ISRC.</t>
          <t indent="0" pn="section-8.7.1-5">There <bcp14>MUST</bcp14> be at least one index point in every track in a cuesheet except for the lead-out track, which <bcp14>MUST</bcp14> have zero. For CD-DA, the number of index points <bcp14>MUST NOT</bcp14> be more than 100.</t>
          <section anchor="cuesheet-track-index-point" numbered="true" removeInRFC="false" toc="exclude" pn="section-8.7.1.1">
            <name slugifiedName="name-cuesheet-track-index-point">Cuesheet Track Index Point</name>
            <table align="center" pn="table-11">
              <thead>
                <tr>
                  <th align="left" colspan="1" rowspan="1">Data</th>
                  <th align="left" colspan="1" rowspan="1">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td align="left" colspan="1" rowspan="1">
                    <tt>u(64)</tt></td>
                  <td align="left" colspan="1" rowspan="1">Offset in samples, relative to the track offset, of the index point.</td>
                </tr>
                <tr>
                  <td align="left" colspan="1" rowspan="1">
                    <tt>u(8)</tt></td>
                  <td align="left" colspan="1" rowspan="1">The track index point number.</td>
                </tr>
                <tr>
                  <td align="left" colspan="1" rowspan="1">
                    <tt>u(3*8)</tt></td>
                  <td align="left" colspan="1" rowspan="1">Reserved. All bits <bcp14>MUST</bcp14> be set to zero.</td>
                </tr>
              </tbody>
            </table>
            <t indent="0" pn="section-8.7.1.1-2">For CD-DA, the track index point offset <bcp14>MUST</bcp14> be evenly divisible by 588 samples (588 samples = 44100 samples/s * 1/75 s). Note that the offset is from the beginning of the track, not the beginning of the audio data.</t>
            <t indent="0" pn="section-8.7.1.1-3">For CD-DA, a track index point number of 0 corresponds to the track pre-gap. The first index point in a track <bcp14>MUST</bcp14> have a number of 0 or 1, and subsequently, index point numbers <bcp14>MUST</bcp14> increase by 1. Index point numbers <bcp14>MUST</bcp14> be unique within a track.</t>
          </section>
        </section>
      </section>
      <section anchor="picture" numbered="true" removeInRFC="false" toc="include" pn="section-8.8">
        <name slugifiedName="name-picture">Picture</name>
        <t indent="0" pn="section-8.8-1">The picture metadata block contains image data of a picture in some way belonging to the audio contained in the FLAC file. Its format is derived from the Attached Picture (APIC) frame in the ID3v2 specification; see <xref target="ID3v2" format="default" sectionFormat="of" derivedContent="ID3v2"/>. However, contrary to the APIC frame in ID3v2, the media type and description are prepended with a 4-byte length field instead of being 0x00 delimited strings. A FLAC file <bcp14>MAY</bcp14> contain one or more picture metadata blocks.</t>
        <t indent="0" pn="section-8.8-2">Note that while the length fields for media type, description, and picture data are 4 bytes in length and could code for a size up to 4 GiB in theory, the total metadata block size cannot exceed what can be described by the metadata block header, i.e., 16 MiB.</t>
        <t indent="0" pn="section-8.8-3">Instead of picture data, the picture metadata block can also contain a URI as described in <xref target="RFC3986" format="default" sectionFormat="of" derivedContent="RFC3986"/>.</t>
        <t indent="0" pn="section-8.8-4">The structure of a picture metadata block is enumerated in the following table.</t>
        <table align="center" pn="table-12">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The picture type according to <xref target="table13" format="default" sectionFormat="of" derivedContent="Table 13"/>.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The length of the media type string in bytes.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(n*8)</tt></td>
              <td align="left" colspan="1" rowspan="1">The media type string as specified by <xref target="RFC2046" format="default" sectionFormat="of" derivedContent="RFC2046"/>, or the text string <tt>--&gt;</tt> to signify that the data part is a URI of the picture instead of the picture data itself. This field must be in printable ASCII characters 0x20-0x7E.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The length of the description string in bytes.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(n*8)</tt></td>
              <td align="left" colspan="1" rowspan="1">The description of the picture in UTF-8.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The width of the picture in pixels.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The height of the picture in pixels.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The color depth of the picture in bits per pixel.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">For indexed-color pictures (e.g., GIF), the number of colors used; <tt>0</tt> for non-indexed pictures.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(32)</tt></td>
              <td align="left" colspan="1" rowspan="1">The length of the picture data in bytes.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">
                <tt>u(n*8)</tt></td>
              <td align="left" colspan="1" rowspan="1">The binary picture data.</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-8.8-6">The height, width, color depth, and "number of colors" fields are for informational purposes only. Applications <bcp14>MUST NOT</bcp14> use them in decoding the picture or deciding how to display it, but applications <bcp14>MAY</bcp14> use them to decide whether or not to process a block (e.g., when selecting between different picture blocks) and <bcp14>MAY</bcp14> show them to the user. If a picture has no concept for any of these fields (e.g., vector images may not have a height or width in pixels) or the content of any field is unknown, the affected fields <bcp14>MUST</bcp14> be set to zero.</t>
        <t indent="0" pn="section-8.8-7">The following table contains all the defined picture types. Values other than those listed in the table are reserved. There <bcp14>MAY</bcp14> only be one each of picture types 1 and 2 in a file. In general practice, many FLAC playback devices and software display the contents of a picture metadata block, if present, with picture type 3 (front cover) during playback.</t>
        <table anchor="table13" align="center" pn="table-13">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Value</th>
              <th align="left" colspan="1" rowspan="1">Picture Type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">0</td>
              <td align="left" colspan="1" rowspan="1">Other</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">1</td>
              <td align="left" colspan="1" rowspan="1">PNG file icon of 32x32 pixels (see <xref target="RFC2083" format="default" sectionFormat="of" derivedContent="RFC2083"/>)</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">2</td>
              <td align="left" colspan="1" rowspan="1">General file icon</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">3</td>
              <td align="left" colspan="1" rowspan="1">Front cover</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">4</td>
              <td align="left" colspan="1" rowspan="1">Back cover</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">5</td>
              <td align="left" colspan="1" rowspan="1">Liner notes page</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">6</td>
              <td align="left" colspan="1" rowspan="1">Media label (e.g., CD, Vinyl or Cassette label)</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">7</td>
              <td align="left" colspan="1" rowspan="1">Lead artist, lead performer, or soloist</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">8</td>
              <td align="left" colspan="1" rowspan="1">Artist or performer</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">9</td>
              <td align="left" colspan="1" rowspan="1">Conductor</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">10</td>
              <td align="left" colspan="1" rowspan="1">Band or orchestra</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">11</td>
              <td align="left" colspan="1" rowspan="1">Composer</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">12</td>
              <td align="left" colspan="1" rowspan="1">Lyricist or text writer</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">13</td>
              <td align="left" colspan="1" rowspan="1">Recording location</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">14</td>
              <td align="left" colspan="1" rowspan="1">During recording</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">15</td>
              <td align="left" colspan="1" rowspan="1">During performance</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">16</td>
              <td align="left" colspan="1" rowspan="1">Movie or video screen capture</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">17</td>
              <td align="left" colspan="1" rowspan="1">A bright colored fish</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">18</td>
              <td align="left" colspan="1" rowspan="1">Illustration</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">19</td>
              <td align="left" colspan="1" rowspan="1">Band or artist logotype</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">20</td>
              <td align="left" colspan="1" rowspan="1">Publisher or studio logotype</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-8.8-9">The origin and use of value 17 ("A bright colored fish") is unclear. This was copied to maintain compatibility with ID3v2. Applications are discouraged from offering this value to users when embedding a picture.</t>
        <t indent="0" pn="section-8.8-10">If a URI (not a picture) is contained in this block, the following points apply:</t>
        <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-8.8-11">
          <li pn="section-8.8-11.1">The URI can be in either absolute or relative form. If a URI is in relative form, it is related to the URI of the FLAC content processed.</li>
          <li pn="section-8.8-11.2">Applications <bcp14>MUST</bcp14> obtain explicit user approval to retrieve images via remote protocols and to retrieve local images that are not located in the same directory as the FLAC file being processed.</li>
          <li pn="section-8.8-11.3">Applications supporting linked images <bcp14>MUST</bcp14> handle unavailability of URIs gracefully. They <bcp14>MAY</bcp14> report unavailability to the user.</li>
          <li pn="section-8.8-11.4">Applications <bcp14>MAY</bcp14> reject processing URIs for any reason, particularly for security or privacy reasons.</li>
        </ul>
      </section>
    </section>
    <section anchor="frame-structure" numbered="true" removeInRFC="false" toc="include" pn="section-9">
      <name slugifiedName="name-frame-structure">Frame Structure</name>
      <t indent="0" pn="section-9-1">One or more frames follow directly after the last metadata block. Each frame consists of a frame header, one or more subframes, padding zero bits to achieve byte alignment, and a frame footer. The number of subframes in each frame is equal to the number of audio channels.</t>
      <t indent="0" pn="section-9-2">Each frame header stores the audio sample rate, number of bits per sample, and number of channels independently of the streaminfo metadata block and other frame headers. This was done to permit multicasting of FLAC files, but it also allows these properties to change mid-stream. Because not all environments in which FLAC decoders are used are able to cope with changes to these properties during playback, a decoder <bcp14>MAY</bcp14> choose to stop decoding on such a change. A decoder that does not check for such a change could be vulnerable to buffer overflows. See also <xref target="security-considerations" format="default" sectionFormat="of" derivedContent="Section 11"/>.</t>
      <t indent="0" pn="section-9-3">Note that storing audio with changing audio properties in FLAC results in various practical problems. For example, these changes of audio properties must happen on a frame boundary or the process will not be lossless. When a variable block size is chosen to accommodate this, note that blocks smaller than 16 samples are not allowed; therefore, it is not possible to store an audio stream in which these properties change within 16 samples of the last change or the start of the file. Also, since the streaminfo metadata block can only accommodate a single set of properties, it is only valid for part of such an audio stream. Instead, it is <bcp14>RECOMMENDED</bcp14> to store an audio stream with changing properties in FLAC encapsulated in a container capable of handling such changes, as these do not suffer from the mentioned limitations. See <xref target="container-mappings" format="default" sectionFormat="of" derivedContent="Section 10"/> for details.</t>
      <section anchor="frame-header" numbered="true" removeInRFC="false" toc="include" pn="section-9.1">
        <name slugifiedName="name-frame-header">Frame Header</name>
        <t indent="0" pn="section-9.1-1">Each frame <bcp14>MUST</bcp14> start on a byte boundary and start with the 15-bit frame sync code 0b111111111111100. Following the sync code is the blocking strategy bit, which <bcp14>MUST NOT</bcp14> change during the audio stream. The blocking strategy bit is 0 for a fixed block size stream or 1 for a variable block size stream. If the blocking strategy is known, a decoder can include this bit when searching for the start of a frame to reduce the possibility of encountering a false positive, as the first two bytes of a frame are either 0xFFF8 for a fixed block size stream or 0xFFF9 for a variable block size stream.</t>
        <section anchor="block-size-bits" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.1">
          <name slugifiedName="name-block-size-bits">Block Size Bits</name>
          <t indent="0" pn="section-9.1.1-1">Following the frame sync code and blocking strategy bit are 4 bits (the first 4 bits of the third byte of each frame) referred to as the block size bits. Their value relates to the block size according to the following table, where v is the value of the 4 bits as an unsigned number. If the block size bits code for an uncommon block size, this is stored after the coded number; see <xref target="uncommon-block-size" format="default" sectionFormat="of" derivedContent="Section 9.1.6"/>.</t>
          <table align="center" pn="table-14">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Value</th>
                <th align="left" colspan="1" rowspan="1">Block Size</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0000</td>
                <td align="left" colspan="1" rowspan="1">Reserved</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">192</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0010 - 0b0101</td>
                <td align="left" colspan="1" rowspan="1">144 * (2<sup>v</sup>), i.e., 576, 1152, 2304, or 4608</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">Uncommon block size minus 1, stored as an 8-bit number</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0111</td>
                <td align="left" colspan="1" rowspan="1">Uncommon block size minus 1, stored as a 16-bit number</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1000 - 0b1111</td>
                <td align="left" colspan="1" rowspan="1">2<sup>v</sup>, i.e., 256, 512, 1024, 2048, 4096, 8192, 16384, or 32768</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="sample-rate-bits" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.2">
          <name slugifiedName="name-sample-rate-bits">Sample Rate Bits</name>
          <t indent="0" pn="section-9.1.2-1">The next 4 bits (the last 4 bits of the third byte of each frame), referred to as the sample rate bits, contain the sample rate of the audio according to the following table. If the sample rate bits code for an uncommon sample rate, this is stored after the uncommon block size; if no uncommon block size was used, this is stored after the coded number. See <xref target="uncommon-sample-rate" format="default" sectionFormat="of" derivedContent="Section 9.1.7"/>.</t>
          <table align="center" pn="table-15">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Value</th>
                <th align="left" colspan="1" rowspan="1">Sample Rate</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0000</td>
                <td align="left" colspan="1" rowspan="1">Sample rate only stored in the streaminfo metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">88.2 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0010</td>
                <td align="left" colspan="1" rowspan="1">176.4 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0011</td>
                <td align="left" colspan="1" rowspan="1">192 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0100</td>
                <td align="left" colspan="1" rowspan="1">8 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0101</td>
                <td align="left" colspan="1" rowspan="1">16 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">22.05 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0111</td>
                <td align="left" colspan="1" rowspan="1">24 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1000</td>
                <td align="left" colspan="1" rowspan="1">32 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1001</td>
                <td align="left" colspan="1" rowspan="1">44.1 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1010</td>
                <td align="left" colspan="1" rowspan="1">48 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1011</td>
                <td align="left" colspan="1" rowspan="1">96 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1100</td>
                <td align="left" colspan="1" rowspan="1">Uncommon sample rate in kHz, stored as an 8-bit number</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1101</td>
                <td align="left" colspan="1" rowspan="1">Uncommon sample rate in Hz, stored as a 16-bit number</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1110</td>
                <td align="left" colspan="1" rowspan="1">Uncommon sample rate in Hz divided by 10, stored as a 16-bit number</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1111</td>
                <td align="left" colspan="1" rowspan="1">Forbidden</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="channels-bits" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.3">
          <name slugifiedName="name-channels-bits">Channels Bits</name>
          <t indent="0" pn="section-9.1.3-1">The next 4 bits (the first 4 bits of the fourth byte of each frame), referred to as the channels bits, contain both the number of channels of the audio as well as any stereo decorrelation used according to the following table.</t>
          <t indent="0" pn="section-9.1.3-2">If a channel layout different than the ones listed in the following table is used, this can be signaled with a WAVEFORMATEXTENSIBLE_CHANNEL_MASK tag in a Vorbis comment metadata block; see <xref target="channel-mask" format="default" sectionFormat="of" derivedContent="Section 8.6.2"/> for details. Note that even when such a different channel layout is specified with a WAVEFORMATEXTENSIBLE_CHANNEL_MASK and the channel ordering in the following table is overridden, the channels bits still contain the actual number of channels coded in the frame. For details on the way left-side, side-right, and mid-side stereo are coded, see <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/>.</t>
          <table align="center" pn="table-16">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Value</th>
                <th align="left" colspan="1" rowspan="1">Channels</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0000</td>
                <td align="left" colspan="1" rowspan="1">1 channel: mono</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">2 channels: left, right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0010</td>
                <td align="left" colspan="1" rowspan="1">3 channels: left, right, center</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0011</td>
                <td align="left" colspan="1" rowspan="1">4 channels: front left, front right, back left, back right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0100</td>
                <td align="left" colspan="1" rowspan="1">5 channels: front left, front right, front center, back/surround left, back/surround right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0101</td>
                <td align="left" colspan="1" rowspan="1">6 channels: front left, front right, front center, LFE, back/surround left, back/surround right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">7 channels: front left, front right, front center, LFE, back center, side left, side right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b0111</td>
                <td align="left" colspan="1" rowspan="1">8 channels: front left, front right, front center, LFE, back left, back right, side left, side right</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1000</td>
                <td align="left" colspan="1" rowspan="1">2 channels: left, right; stored as left-side stereo</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1001</td>
                <td align="left" colspan="1" rowspan="1">2 channels: left, right; stored as side-right stereo</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1010</td>
                <td align="left" colspan="1" rowspan="1">2 channels: left, right; stored as mid-side stereo</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b1011 - 0b1111</td>
                <td align="left" colspan="1" rowspan="1">Reserved</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="bit-depth-bits" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.4">
          <name slugifiedName="name-bit-depth-bits">Bit Depth Bits</name>
          <t indent="0" pn="section-9.1.4-1">The next 3 bits (bits 5, 6, and 7 of each fourth byte of each frame) contain the bit depth of the audio according to the following table. The next bit is reserved and <bcp14>MUST</bcp14> be zero.</t>
          <table align="center" pn="table-17">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Value</th>
                <th align="left" colspan="1" rowspan="1">Bit Depth</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b000</td>
                <td align="left" colspan="1" rowspan="1">Bit depth only stored in the streaminfo metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b001</td>
                <td align="left" colspan="1" rowspan="1">8 bits per sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b010</td>
                <td align="left" colspan="1" rowspan="1">12 bits per sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b011</td>
                <td align="left" colspan="1" rowspan="1">Reserved</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b100</td>
                <td align="left" colspan="1" rowspan="1">16 bits per sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b101</td>
                <td align="left" colspan="1" rowspan="1">20 bits per sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b110</td>
                <td align="left" colspan="1" rowspan="1">24 bits per sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b111</td>
                <td align="left" colspan="1" rowspan="1">32 bits per sample</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="coded-number" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.5">
          <name slugifiedName="name-coded-number">Coded Number</name>
          <t indent="0" pn="section-9.1.5-1">Following the reserved bit (starting at the fifth byte of the frame) is either a sample or a frame number, which will be referred to as the coded number. When dealing with variable block size streams, the sample number of the first sample in the frame is encoded. When the file contains a fixed block size stream, the frame number is encoded. See <xref target="frame-header" format="default" sectionFormat="of" derivedContent="Section 9.1"/> on the blocking strategy bit, which signals whether a stream is a fixed block size stream or a variable block size stream. See also <xref target="addition-of-blocking-strategy-bit" format="default" sectionFormat="of" derivedContent="Appendix B.1"/>.</t>
          <t indent="0" pn="section-9.1.5-2">The coded number is stored in a variable-length code like UTF-8 as defined in <xref target="RFC3629" format="default" sectionFormat="of" derivedContent="RFC3629"/> but extended to a maximum of 36 bits unencoded or 7 bytes encoded.</t>
          <t indent="0" pn="section-9.1.5-3">When a frame number is encoded, the value <bcp14>MUST NOT</bcp14> be larger than what fits a value of 31 bits unencoded or 6 bytes encoded. Please note that as most general purpose UTF-8 encoders and decoders follow <xref target="RFC3629" format="default" sectionFormat="of" derivedContent="RFC3629"/>, they will not be able to handle these extended codes. Furthermore, while UTF-8 is specifically used to encode characters, FLAC uses it to encode numbers instead. To encode or decode a coded number, follow the procedures in <xref target="RFC3629" sectionFormat="of" section="3" format="default" derivedLink="https://rfc-editor.org/rfc/rfc3629#section-3" derivedContent="RFC3629"/>, but instead of using a character number, use a frame or sample number. In addition, use the extended table below instead of the table in <xref target="RFC3629" sectionFormat="of" section="3" format="default" derivedLink="https://rfc-editor.org/rfc/rfc3629#section-3" derivedContent="RFC3629"/>.</t>
          <table align="center" pn="table-18">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Number Range (Hexadecimal)</th>
                <th align="left" colspan="1" rowspan="1">Octet Sequence (Binary)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 0000 0000 -<br/>
0000 0000 007F</td>
                <td align="left" colspan="1" rowspan="1">0xxxxxxx</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 0000 0080 -<br/>
0000 0000 07FF</td>
                <td align="left" colspan="1" rowspan="1">110xxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 0000 0800 -<br/>
0000 0000 FFFF</td>
                <td align="left" colspan="1" rowspan="1">1110xxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 0001 0000 -<br/>
0000 001F FFFF</td>
                <td align="left" colspan="1" rowspan="1">11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 0020 0000 -<br/>
0000 03FF FFFF</td>
                <td align="left" colspan="1" rowspan="1">111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 0400 0000 -<br/>
0000 7FFF FFFF</td>
                <td align="left" colspan="1" rowspan="1">1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0000 8000 0000 -<br/>
000F FFFF FFFF</td>
                <td align="left" colspan="1" rowspan="1">11111110 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-9.1.5-5">If the coded number is a frame number, it <bcp14>MUST</bcp14> be equal to the number of frames preceding the current frame. If the coded number is a sample number, it <bcp14>MUST</bcp14> be equal to the number of samples preceding the current frame. In a stream where these requirements are not met, seeking is not (reliably) possible.</t>
          <t indent="0" pn="section-9.1.5-6">For example, for a frame that belongs to a variable block size stream and has exactly 51 billion samples preceding it, the coded number is constructed as follows:</t>
          <artwork type="ascii-art" align="left" pn="section-9.1.5-7">
Octets 1-5
0b11111110 0b10101111 0b10011111 0b10110101 0b10100011
               ^^^^^^     ^^^^^^     ^^^^^^     ^^^^^^
                 |          |          |      Bits 18-13
                 |          |      Bits 24-19
                 |      Bits 30-25
             Bits 36-31

Octets 6-7
0b10111000 0b10000000
    ^^^^^^     ^^^^^^
      |       Bits 6-1
  Bits 12-7
</artwork>
          <t indent="0" pn="section-9.1.5-8">A decoder that relies on the coded number during seeking could be vulnerable to buffer overflows or getting stuck in an infinite loop if it seeks in a stream where the coded numbers are not strictly increasing or are otherwise not valid. See also <xref target="security-considerations" format="default" sectionFormat="of" derivedContent="Section 11"/>.</t>
        </section>
        <section anchor="uncommon-block-size" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.6">
          <name slugifiedName="name-uncommon-block-size">Uncommon Block Size</name>
          <t indent="0" pn="section-9.1.6-1">If the block size bits defined earlier in this section are 0b0110 or
   0b0111 (uncommon block size minus 1 stored), the block size minus 1 follows the
   coded number as either an 8-bit or 16-bit unsigned number coded big-endian. A value of 65535 (corresponding to a block size of 65536) is forbidden and <bcp14>MUST NOT</bcp14> be used, because such a block size cannot be represented in the streaminfo metadata block. A value from 0 up to (and including) 14, which corresponds to a block size from 1 to 15, is only valid for the last frame in a stream and <bcp14>MUST NOT</bcp14> be used for any other frame. See also <xref target="streaminfo" format="default" sectionFormat="of" derivedContent="Section 8.2"/>.</t>
        </section>
        <section anchor="uncommon-sample-rate" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.7">
          <name slugifiedName="name-uncommon-sample-rate">Uncommon Sample Rate</name>
          <t indent="0" pn="section-9.1.7-1"> If the sample rate bits are 0b1100, 0b1101, or 0b1110 (uncommon sample
rate stored), the sample rate follows the uncommon block size (or the coded
number if no uncommon block size is stored) as either an 8-bit or a 16-bit
unsigned number coded big-endian.</t>
          <t indent="0" pn="section-9.1.7-2">The sample rate <bcp14>MUST NOT</bcp14> be 0 when the subframe contains audio. A sample rate of 0 <bcp14>MAY</bcp14> be used when non-audio is represented. See <xref target="streaminfo" format="default" sectionFormat="of" derivedContent="Section 8.2"/> for details.</t>
        </section>
        <section anchor="frame-header-crc" numbered="true" removeInRFC="false" toc="include" pn="section-9.1.8">
          <name slugifiedName="name-frame-header-crc">Frame Header CRC</name>
          <t indent="0" pn="section-9.1.8-1">Finally, an 8-bit CRC follows the frame/sample number, an uncommon block size, or an uncommon sample rate (depending on whether the latter two are stored). This CRC is initialized with 0 and has the polynomial x<sup>8</sup> + x<sup>2</sup> + x<sup>1</sup> + x<sup>0</sup>. This CRC covers the whole frame header before the CRC, including the sync code.</t>
        </section>
      </section>
      <section anchor="subframes" numbered="true" removeInRFC="false" toc="include" pn="section-9.2">
        <name slugifiedName="name-subframes">Subframes</name>
        <t indent="0" pn="section-9.2-1">Following the frame header are a number of subframes equal to the number of audio channels. 
Note that subframes contain a bitstream that does not necessarily have to be a whole number of bytes, so only the first subframe starts at a byte boundary.</t>
        <section anchor="subframe-header" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.1">
          <name slugifiedName="name-subframe-header">Subframe Header</name>
          <t indent="0" pn="section-9.2.1-1">Each subframe starts with a header. The first bit of the header <bcp14>MUST</bcp14> be 0, followed by 6 bits that describe which subframe type is used according to the following table, where v is the value of the 6 bits as an unsigned number.</t>
          <table align="center" pn="table-19">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Value</th>
                <th align="left" colspan="1" rowspan="1">Subframe Type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b000000</td>
                <td align="left" colspan="1" rowspan="1">Constant subframe</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b000001</td>
                <td align="left" colspan="1" rowspan="1">Verbatim subframe</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b000010 - 0b000111</td>
                <td align="left" colspan="1" rowspan="1">Reserved</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b001000 - 0b001100</td>
                <td align="left" colspan="1" rowspan="1">Subframe with a fixed predictor of order v-8; i.e., 0, 1, 2, 3 or 4</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b001101 - 0b011111</td>
                <td align="left" colspan="1" rowspan="1">Reserved</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b100000 - 0b111111</td>
                <td align="left" colspan="1" rowspan="1">Subframe with a linear predictor of order v-31; i.e., 1 through 32 (inclusive)</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-9.2.1-3">Following the subframe type bits is a bit that flags whether the subframe uses any wasted bits (see <xref target="wasted-bits-per-sample" format="default" sectionFormat="of" derivedContent="Section 9.2.2"/>). If the flag bit is 0, the subframe doesn't use any wasted bits and the subframe header is complete. If the flag bit is 1, the subframe uses wasted bits
   and the number of used wasted bits minus 1 appears
   in unary form, directly following the flag bit.</t>
        </section>
        <section anchor="wasted-bits-per-sample" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.2">
          <name slugifiedName="name-wasted-bits-per-sample">Wasted Bits per Sample</name>
          <t indent="0" pn="section-9.2.2-1">Most uncompressed audio file formats can only store audio samples with a bit depth that is an integer number of bytes. Samples in which the bit depth is not an integer number of bytes are usually stored in such formats by padding them with least-significant zero bits to a bit depth that is an integer number of bytes. For example, shifting a 14-bit sample right by 2 pads it to a 16-bit sample, which then has two zero least-significant bits. In this specification, these least-significant zero bits are referred to as wasted bits per sample or simply wasted bits. They are wasted in the sense that they contain no information but are stored anyway.</t>
          <t indent="0" pn="section-9.2.2-2">The FLAC format can optionally take advantage of these wasted bits by signaling their presence and coding the subframe without them. To do this, the wasted bits per sample flag in a subframe
   header is set to 1 and the number of wasted bits per sample
   (k) minus 1 follows the flag in an unary encoding. For example, if k is 3, 0b001 follows. If k = 0, the wasted bits per sample flag is 0 and no unary-coded k follows. In this document, if a subframe header signals a certain number of wasted bits, it is said it "uses" these wasted bits.</t>
          <t indent="0" pn="section-9.2.2-3">If a subframe uses wasted bits (i.e., k is not equal to 0), samples are coded ignoring k least-significant bits. For example, if a frame not employing stereo decorrelation specifies a sample size of 16 bits per sample in the frame header and k of a subframe is 3, samples in the subframe are coded as 13 bits per sample. For more details, see <xref target="constant-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.3"/> on how the bit depth of a subframe is calculated. A decoder <bcp14>MUST</bcp14> add k least-significant zero bits by shifting left (padding) after decoding a subframe sample. If the frame has left-side, side-right, or mid-side stereo, a decoder <bcp14>MUST</bcp14> perform padding on the subframes before restoring the channels to left and right. The number of wasted bits per sample <bcp14>MUST</bcp14> be such that the resulting number of bits per sample (of which the calculation is explained in <xref target="constant-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.3"/>) is larger than zero.</t>
          <t indent="0" pn="section-9.2.2-4">Besides audio files that have a certain number of wasted bits for the whole file, audio files exist in which the number of wasted bits varies. There are DVD-Audio discs in which blocks of samples have had their least-significant bits selectively zeroed to slightly improve the compression of their otherwise lossless Meridian Lossless Packing codec; see <xref target="MLP" format="default" sectionFormat="of" derivedContent="MLP"/>. There are also audio processors like lossyWAV (see <xref target="lossyWAV" format="default" sectionFormat="of" derivedContent="lossyWAV"/>) that zero a number of least-significant bits for a block of samples, increasing the compression in a non-lossless way. Because of this, the number of wasted bits k <bcp14>MAY</bcp14> change between frames and <bcp14>MAY</bcp14> differ between subframes. If the number of wasted bits changes halfway through a subframe (e.g., the first part has 2 wasted bits and the second part has 4 wasted bits), the subframe uses the lowest number of wasted bits; otherwise, non-zero bits would be discarded, and the process would not be lossless.</t>
        </section>
        <section anchor="constant-subframe" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.3">
          <name slugifiedName="name-constant-subframe">Constant Subframe</name>
          <t indent="0" pn="section-9.2.3-1">In a constant subframe, only a single sample is stored. This sample is stored as an integer number coded big-endian, signed two's complement. The number of bits used to store this sample depends on the bit depth of the current subframe. The bit depth of a subframe is equal to the bit depth as coded in the frame header (see <xref target="bit-depth-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.4"/>) minus the number of used wasted bits coded in the subframe header (see <xref target="wasted-bits-per-sample" format="default" sectionFormat="of" derivedContent="Section 9.2.2"/>). If a subframe is a side subframe (see <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/>), the bit depth of that subframe is increased by 1 bit.</t>
        </section>
        <section anchor="verbatim-subframe" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.4">
          <name slugifiedName="name-verbatim-subframe">Verbatim Subframe</name>
          <t indent="0" pn="section-9.2.4-1">A verbatim subframe stores all samples unencoded in sequential order. See <xref target="constant-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.3"/> on how a sample is stored unencoded. The number of samples that need to be stored in a subframe is provided by the block size in the frame header.</t>
        </section>
        <section anchor="fixed-predictor-subframe" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.5">
          <name slugifiedName="name-fixed-predictor-subframe">Fixed Predictor
Subframe</name>
          <t indent="0" pn="section-9.2.5-1">Five different fixed predictors are defined in the following table, one for each prediction order 0 through 4. The table also contains a derivation that explains the rationale for choosing these fixed predictors.</t>
          <table align="center" pn="table-20">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Order</th>
                <th align="left" colspan="1" rowspan="1">Prediction</th>
                <th align="left" colspan="1" rowspan="1">Derivation</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">a(n-1)</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">2 * a(n-1) - a(n-2)</td>
                <td align="left" colspan="1" rowspan="1">a(n-1) + a'(n-1)</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">3</td>
                <td align="left" colspan="1" rowspan="1">3 * a(n-1) - 3 * a(n-2) + a(n-3)</td>
                <td align="left" colspan="1" rowspan="1">a(n-1) + a'(n-1) + a''(n-1)</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">4</td>
                <td align="left" colspan="1" rowspan="1">4 * a(n-1) - 6 * a(n-2) + 4 * a(n-3) - a(n-4)</td>
                <td align="left" colspan="1" rowspan="1">a(n-1) + a'(n-1) + a''(n-1) + a'''(n-1)</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-9.2.5-3">Where:</t>
          <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-9.2.5-4">
            <li pn="section-9.2.5-4.1">n is the number of the sample being predicted.</li>
            <li pn="section-9.2.5-4.2">a(n) is the sample being predicted.</li>
            <li pn="section-9.2.5-4.3">a(n-1) is the sample before the one being predicted.</li>
            <li pn="section-9.2.5-4.4">a'(n-1) is the difference between the previous sample and the sample before that, i.e., a(n-1) - a(n-2). This is the closest available first-order discrete derivative.</li>
            <li pn="section-9.2.5-4.5">a''(n-1) is a'(n-1) - a'(n-2) or the closest available second-order discrete derivative.</li>
            <li pn="section-9.2.5-4.6">a'''(n-1) is a''(n-1) - a''(n-2) or the closest available third-order discrete derivative.</li>
          </ul>
          <t indent="0" pn="section-9.2.5-5">As a predictor makes use of samples preceding the sample that is predicted, it can only be used when enough samples are known. As each subframe in FLAC is coded completely independently, the first few samples in each subframe cannot be predicted. Therefore, a number of so-called warm-up samples equal to the predictor order is stored. These are stored unencoded, bypassing the predictor and residual coding stages. See <xref target="constant-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.3"/> on how samples are stored unencoded. The table below defines how a fixed predictor subframe appears in the bitstream.</t>
          <table align="center" pn="table-21">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Data</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>s(n)</tt></td>
                <td align="left" colspan="1" rowspan="1">Unencoded warm-up samples (n = subframe's bits per sample * predictor order).</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">Coded residual</td>
                <td align="left" colspan="1" rowspan="1">Coded residual as defined in <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/></td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-9.2.5-7">Because fixed predictors are specified, they do not have to be stored. The fixed predictor order, which is stored in the subframe header, specifies which predictor is used.</t>
          <t indent="0" pn="section-9.2.5-8">To encode a signal with a fixed predictor, each sample has the corresponding prediction subtracted and sent to the residual coder. To decode a signal with a fixed predictor, the residual is decoded, and then the prediction can be added for each sample. This means that decoding is necessarily a sequential process within a subframe, as for each sample, enough fully decoded previous samples are needed to calculate the prediction.</t>
          <t indent="0" pn="section-9.2.5-9">For fixed predictor order 0, the prediction is always 0; thus, each residual sample is equal to its corresponding input or decoded sample. The difference between a fixed predictor with order 0 and a verbatim subframe is that a verbatim subframe stores all samples unencoded while a fixed predictor with order 0 has all its samples processed by the residual coder.</t>
          <t indent="0" pn="section-9.2.5-10">The first-order fixed predictor is comparable to how differential pulse-code modulation (DPCM) encoding works, as the resulting residual sample is the difference between the corresponding sample and the sample before it. The higher-order fixed predictors can be understood as polynomials fitted to the previous samples.</t>
        </section>
        <section anchor="linear-predictor-subframe" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.6">
          <name slugifiedName="name-linear-predictor-subframe">Linear Predictor Subframe</name>
          <t indent="0" pn="section-9.2.6-1">Whereas fixed predictors are well suited for simple signals, using a (non-fixed) linear predictor on more complex signals can improve compression by making the residual samples even smaller. There is a certain trade-off, however, as storing the predictor coefficients takes up space as well.</t>
          <t indent="0" pn="section-9.2.6-2">In the FLAC format, a predictor is defined by up to 32 predictor coefficients and a shift. To form a prediction, each coefficient is multiplied by its corresponding past sample, the results are summed, and this sum is then shifted. To encode a signal with a linear predictor, each sample has the corresponding prediction subtracted and sent to the residual coder. To decode a signal with a linear predictor, the residual is decoded, and then the prediction can be added for each sample. This means that decoding <bcp14>MUST</bcp14> be a sequential process within a subframe, as enough decoded samples are needed to calculate the prediction for each sample.</t>
          <t indent="0" pn="section-9.2.6-3">The table below defines how a linear predictor subframe appears in the bitstream.</t>
          <table align="center" pn="table-22">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Data</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>s(n)</tt></td>
                <td align="left" colspan="1" rowspan="1">Unencoded warm-up samples (n = subframe's bits per sample * LPC order).</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>u(4)</tt></td>
                <td align="left" colspan="1" rowspan="1">(Predictor coefficient precision in bits)-1 (Note: 0b1111 is forbidden).</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>s(5)</tt></td>
                <td align="left" colspan="1" rowspan="1">Prediction right shift needed in bits.</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">
                  <tt>s(n)</tt></td>
                <td align="left" colspan="1" rowspan="1">Predictor coefficients (n = predictor coefficient precision * LPC order).</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">Coded residual</td>
                <td align="left" colspan="1" rowspan="1">Coded residual as defined in <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/>.</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-9.2.6-5">See <xref target="constant-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.3"/> on how the warm-up samples are stored unencoded. The predictor coefficients are stored as an integer number coded big-endian, signed two's complement, where the number of bits needed for each coefficient is defined by the predictor coefficient precision. While the prediction right shift is signed two's complement, this number <bcp14>MUST NOT</bcp14> be negative; see <xref target="restriction-of-lpc-shift-to-non-negative-values" format="default" sectionFormat="of" derivedContent="Appendix B.4"/> for an explanation why this is.</t>
          <t indent="0" pn="section-9.2.6-6">Please note that the order in which the predictor coefficients appear in the bitstream corresponds to which <strong>past</strong> sample they belong to. In other words, the order of the predictor coefficients is opposite to the chronological order of the samples. So, the first predictor coefficient has to be multiplied with the sample directly before the sample that is being predicted, the second predictor coefficient has to be multiplied with the sample before that, etc.</t>
        </section>
        <section anchor="coded-residual" numbered="true" removeInRFC="false" toc="include" pn="section-9.2.7">
          <name slugifiedName="name-coded-residual">Coded Residual</name>
          <t indent="0" pn="section-9.2.7-1">The first two bits in a coded residual indicate which coding method is used. See the table below.</t>
          <table anchor="coded-residual-table" align="center" pn="table-23">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Value</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b00</td>
                <td align="left" colspan="1" rowspan="1">Partitioned Rice code with 4-bit parameters</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b01</td>
                <td align="left" colspan="1" rowspan="1">Partitioned Rice code with 5-bit parameters</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0b10 - 0b11</td>
                <td align="left" colspan="1" rowspan="1">Reserved</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-9.2.7-3">Both defined coding methods work the same way but differ in the number of bits used for Rice parameters. The 4 bits that directly follow the coding method bits form the partition order, which is an unsigned number. The rest of the coded residual consists of 2<sup>(partition order)</sup> partitions. For example, if the 4 bits are 0b1000, the partition order is 8, and the residual is split up into 2<sup>8</sup> = 256 partitions.</t>
          <t indent="0" pn="section-9.2.7-4">Each partition contains a certain number of residual samples. The number of residual samples in the first partition is equal to (block size &gt;&gt; partition order) - predictor order, i.e., the block size divided by the number of partitions minus the predictor order. In all other partitions, the number of residual samples is equal to (block size &gt;&gt; partition order).</t>
          <t indent="0" pn="section-9.2.7-5">The partition order <bcp14>MUST</bcp14> be such that the block size is evenly divisible by the number of partitions. 
This means, for example, that only partition order 0 is allowed for all odd block sizes. 
The partition order also <bcp14>MUST</bcp14> be such that the (block size &gt;&gt; partition order) is larger than the predictor order. This means, for example, that with a block size of 4096 and a predictor order of 4, the partition order cannot be larger than 9.</t>
          <t indent="0" pn="section-9.2.7-6">Each partition starts with a parameter. If the coded residual of a subframe is one with 4-bit Rice parameters (see <xref target="coded-residual-table" format="default" sectionFormat="of" derivedContent="Table 23"/>), the first 4 bits of each partition are either a Rice parameter or an escape code. These 4 bits indicate an escape code if they are 0b1111; otherwise, they contain the Rice parameter as an unsigned number. If the coded residual of the current subframe is one with 5-bit Rice parameters, the first 5 bits of each partition indicate an escape code if they are 0b11111; otherwise, they contain the Rice parameter as an unsigned number as well.</t>
          <section anchor="escaped-partition" numbered="true" removeInRFC="false" toc="exclude" pn="section-9.2.7.1">
            <name slugifiedName="name-escaped-partition">Escaped Partition</name>
            <t indent="0" pn="section-9.2.7.1-1">If an escape code was used, the partition does not contain a variable-length Rice-coded residual; rather, it contains a fixed-length unencoded residual. Directly following the escape code are 5 bits containing the number of bits with which each residual sample is stored, as an unsigned number. The residual samples themselves are stored signed two's complement. For example, when a partition is escaped and each residual sample is stored with 3 bits, the number -1 is represented as 0b111.</t>
            <t indent="0" pn="section-9.2.7.1-2">Note that it is possible that the number of bits with which each sample is stored is 0, which means that all residual samples in that partition have a value of 0 and that no bits are used to store the samples. In that case, the partition contains nothing except the escape code and 0b00000.</t>
          </section>
          <section anchor="rice-code" numbered="true" removeInRFC="false" toc="exclude" pn="section-9.2.7.2">
            <name slugifiedName="name-rice-code">Rice Code</name>
            <t indent="0" pn="section-9.2.7.2-1">If a Rice parameter was provided for a certain partition, that partition contains a Rice-coded residual. The residual samples, which are signed numbers, are represented by unsigned numbers in the Rice code. For positive numbers, the representation is the number doubled. For negative numbers, the representation is the number multiplied by -2 and with 1 subtracted. This representation of signed numbers is also known as zigzag encoding. The zigzag-encoded residual is called the folded residual.</t>
            <t indent="0" pn="section-9.2.7.2-2">Each folded residual sample is then split into two parts, a most-significant part and a least-significant part. The Rice parameter at the start of each partition determines where that split lies: it is the number of bits in the least-significant part. Each residual sample is then stored by coding the most-significant part as unary, followed by the least-significant part as binary.</t>
            <t indent="0" pn="section-9.2.7.2-3">For example, take a partition with Rice parameter 3 containing a folded residual sample with 38 as its value, which is 0b100110 in binary. 
The most-significant part is 0b100 (4) and is stored in unary form as 0b00001. The least-significant part is 0b110 (6) and is stored as is. The Rice code word is thus 0b00001110. The Rice code words for all residual samples in a partition are stored consecutively.</t>
            <t indent="0" pn="section-9.2.7.2-4">To decode a Rice code word, zero bits must be counted until encountering a one bit, after which a number of bits given by the Rice parameter must be read. 
The count of zero bits is shifted left by the Rice parameter (i.e., multiplied by 2 raised to the power Rice parameter) and bitwise ORed with (i.e., added to) the read value. This is the folded residual value. An even folded residual value is shifted right 1 bit (i.e., divided by 2) to get the (unfolded) residual value. An odd folded residual value is shifted right 1 bit and then has all bits flipped (1 added to and divided by -2) to get the (unfolded) residual value, subject to negative numbers being signed two's complement on the decoding machine.</t>
            <t indent="0" pn="section-9.2.7.2-5"><xref target="examples" format="default" sectionFormat="of" derivedContent="Appendix D"/> shows decoding of a complete coded residual.</t>
          </section>
          <section anchor="residual-sample-value-limit" numbered="true" removeInRFC="false" toc="exclude" pn="section-9.2.7.3">
            <name slugifiedName="name-residual-sample-value-limit">Residual Sample Value Limit</name>
            <t indent="0" pn="section-9.2.7.3-1">All residual sample values <bcp14>MUST</bcp14> be representable in the range offered by a 32-bit integer, signed one's complement. Equivalently, all residual sample values <bcp14>MUST</bcp14> fall in the range offered by a 32-bit integer signed two's complement, excluding the most negative possible value of that range. This means residual sample values <bcp14>MUST NOT</bcp14> have an absolute value equal to, or larger than, 2 to the power 31. A FLAC encoder <bcp14>MUST</bcp14> make sure of this. If a FLAC encoder is, for a certain subframe, unable to find a suitable predictor for which all residual samples fall within said range, it <bcp14>MUST</bcp14> default to writing a verbatim subframe. <xref target="numerical-considerations" format="default" sectionFormat="of" derivedContent="Appendix A"/> explains in which circumstances residual samples are already implicitly representable in said range; thus, an additional check is not needed.</t>
            <t indent="0" pn="section-9.2.7.3-2">The reason for this limit is to ensure that decoders can use 32-bit integers when processing residuals, simplifying decoding. The reason the most negative value of a 32-bit integer signed two's complement is specifically excluded is to prevent decoders from having to implement specific handling of that value, as it cannot be negated within a 32-bit signed integer, and most library routines calculating an absolute value have undefined behavior for processing that value.</t>
          </section>
        </section>
      </section>
      <section anchor="frame-footer" numbered="true" removeInRFC="false" toc="include" pn="section-9.3">
        <name slugifiedName="name-frame-footer">Frame Footer</name>
        <t indent="0" pn="section-9.3-1">Following the last subframe is the frame footer. If the last subframe is not byte aligned (i.e., the number of bits required to store all subframes put together is not divisible by 8), zero bits are added until byte alignment is reached. Following this is a 16-bit CRC, initialized with 0, with the polynomial x<sup>16</sup> + x<sup>15</sup> + x<sup>2</sup> + x<sup>0</sup>. This CRC covers the whole frame, excluding the 16-bit CRC but including the sync code.</t>
      </section>
    </section>
    <section anchor="container-mappings" numbered="true" removeInRFC="false" toc="include" pn="section-10">
      <name slugifiedName="name-container-mappings">Container Mappings</name>
      <t indent="0" pn="section-10-1">The FLAC format can be used without any container, as it already provides for the most basic features normally associated with a container. However, the functionality this basic container provides is rather limited, and for more advanced features (such as combining FLAC audio with video), it needs to be encapsulated by a more capable container. This presents a problem: because of these container features, the FLAC format mixes data that belongs to the encoded data (like block size and sample rate) with data that belongs to the container (like checksum and timecode). The choice was made to encapsulate FLAC frames as they are, which means some data will be duplicated and potentially deviating between the FLAC frames and the encapsulating container.</t>
      <t indent="0" pn="section-10-2">As FLAC frames are completely independent of each other, container format features handling dependencies do not need to be used. For example, all FLAC frames embedded in Matroska are marked as keyframes when they are stored in a SimpleBlock, and tracks in an MP4 file containing only FLAC frames do not need a sync sample box.</t>
      <section anchor="ogg-mapping" numbered="true" removeInRFC="false" toc="include" pn="section-10.1">
        <name slugifiedName="name-ogg-mapping">Ogg Mapping</name>
        <t indent="0" pn="section-10.1-1">The Ogg container format is defined in <xref target="RFC3533" format="default" sectionFormat="of" derivedContent="RFC3533"/>. The first packet of a logical bitstream carrying FLAC data is structured according to the following table.</t>
        <table align="center" pn="table-24">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Data</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">5 bytes</td>
              <td align="left" colspan="1" rowspan="1">Bytes <tt>0x7F 0x46 0x4C 0x41 0x43</tt> (as also defined by <xref target="RFC5334" format="default" sectionFormat="of" derivedContent="RFC5334"/>).</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">2 bytes</td>
              <td align="left" colspan="1" rowspan="1">Version number of the FLAC-in-Ogg mapping. These bytes are <tt>0x01 0x00</tt>, meaning version 1.0 of the mapping.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">2 bytes</td>
              <td align="left" colspan="1" rowspan="1">Number of header packets (excluding the first header packet) as an unsigned number coded big-endian.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">4 bytes</td>
              <td align="left" colspan="1" rowspan="1">The <tt>fLaC</tt> signature.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">4 bytes</td>
              <td align="left" colspan="1" rowspan="1">A metadata block header for the streaminfo metadata block.</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">34 bytes</td>
              <td align="left" colspan="1" rowspan="1">A streaminfo metadata block.</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-10.1-3">The number of header packets <bcp14>MAY</bcp14> be 0, which means the number of packets that follow is unknown. This first packet <bcp14>MUST NOT</bcp14> share a Ogg page with any other packets. This means the first page of a logical stream of FLAC-in-Ogg is always 79 bytes.</t>
        <t indent="0" pn="section-10.1-4">Following the first packet are one or more header packets, each of which contains a single metadata block. The first of these packets <bcp14>SHOULD</bcp14> be a Vorbis comment metadata block for historic reasons. This is contrary to unencapsulated FLAC streams, where the order of metadata blocks is not important except for the streaminfo metadata block and where a Vorbis comment metadata block is optional.</t>
        <t indent="0" pn="section-10.1-5">Following the header packets are audio packets. Each audio packet contains a single FLAC frame. The first audio packet <bcp14>MUST</bcp14> start on a new Ogg page, i.e., the last metadata block <bcp14>MUST</bcp14> finish its page before any audio packets are encapsulated.</t>
        <t indent="0" pn="section-10.1-6">The granule position of all pages containing header packets <bcp14>MUST</bcp14> be 0. For pages containing audio packets, the granule position is the number of the last sample contained in the last completed packet in the frame. The sample numbering considers interchannel samples. If a page contains no packet end (e.g., when it only contains the start of a large packet that continues on the next page), then the granule position is set to the maximum value possible, i.e., <tt>0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF</tt>.</t>
        <t indent="0" pn="section-10.1-7">The granule position of the first audio data page with a completed packet <bcp14>MAY</bcp14> be larger than the number of samples contained in packets that complete on that page. In other words, the apparent sample number of the first sample in the stream following from the granule position and the audio data <bcp14>MAY</bcp14> be larger than 0.  This allows, for example, a server to cast a live stream to several clients that joined at different moments without rewriting the granule position for each client.</t>
        <t indent="0" pn="section-10.1-8">If an audio stream is encoded where audio properties (sample rate, number of channels, or bit depth) change at some point in the stream, this should be dealt with by finishing encoding of the current Ogg stream and starting a new Ogg stream, concatenated to the previous one. This is called chaining in Ogg. See the Ogg specification <xref target="RFC3533" format="default" sectionFormat="of" derivedContent="RFC3533"/> for details.</t>
      </section>
      <section anchor="matroska-mapping" numbered="true" removeInRFC="false" toc="include" pn="section-10.2">
        <name slugifiedName="name-matroska-mapping">Matroska Mapping</name>
        <t indent="0" pn="section-10.2-1">The Matroska container format is defined in <xref target="RFC9559" format="default" sectionFormat="of" derivedContent="RFC9559"/>. The codec ID (EBML path <tt>\Segment\Tracks\TrackEntry\CodecID</tt>) assigned to signal tracks carrying FLAC data is <tt>A_FLAC</tt> in ASCII. All FLAC data before the first audio frame (i.e., the <tt>fLaC</tt> ASCII signature and all metadata blocks) is stored as CodecPrivate data (EBML path <tt>\Segment\Tracks\TrackEntry\CodecPrivate</tt>).</t>
        <t indent="0" pn="section-10.2-2">Each FLAC frame (including all of its subframes) is treated as a single frame in the context of Matroska.</t>
        <t indent="0" pn="section-10.2-3">If an audio stream is encoded where audio properties (sample rate, number of channels, or bit depth) change at some point in the stream, this should be dealt with by finishing the current Matroska segment and starting a new one with the new properties.</t>
      </section>
      <section anchor="iso-base-media-file-format-mp4-mapping" numbered="true" removeInRFC="false" toc="include" pn="section-10.3">
        <name slugifiedName="name-iso-base-media-file-format-">ISO Base Media File Format (MP4) Mapping</name>
        <t indent="0" pn="section-10.3-1">The full encapsulation definition of FLAC audio in MP4 files was deemed too extensive to include in this document. A definition document can be found at <xref target="FLAC-in-MP4-specification" format="default" sectionFormat="of" derivedContent="FLAC-in-MP4-specification"/>.</t>
      </section>
    </section>
    <section anchor="security-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-11">
      <name slugifiedName="name-security-considerations">Security Considerations</name>
      <t indent="0" pn="section-11-1">Like any other codec (such as <xref target="RFC6716" format="default" sectionFormat="of" derivedContent="RFC6716"/>), FLAC should not be used with insecure ciphers or cipher modes that are vulnerable to known plaintext attacks. Some of the header bits, as well as the padding, are easily predictable.</t>
      <t indent="0" pn="section-11-2">Implementations of the FLAC codec need to take appropriate security considerations into account. <xref target="RFC4732" sectionFormat="of" section="2.1" format="default" derivedLink="https://rfc-editor.org/rfc/rfc4732#section-2.1" derivedContent="RFC4732"/> provides general information on DoS attacks on end systems and describes some mitigation strategies. Areas of concern specific to FLAC follow.</t>
      <t indent="0" pn="section-11-3">It is extremely important for the decoder to be robust against malformed payloads. Payloads that do not conform to this specification <bcp14>MUST NOT</bcp14> cause the decoder to overrun its allocated memory or take an excessive amount of resources to decode. An overrun in allocated memory could lead to arbitrary code execution by an attacker. The same applies to the encoder, even though problems with encoders are typically rarer. Malformed audio streams <bcp14>MUST NOT</bcp14> cause the encoder to misbehave because this would allow an attacker to attack transcoding gateways.</t>
      <t indent="0" pn="section-11-4">As with all compression algorithms, both encoding and decoding can produce an output much larger than the input. For decoding, the most extreme possible case of this is a frame with eight constant subframes of block size 65535 and coding for 32-bit PCM. This frame is only 49 bytes in size but codes for more than 2 megabytes of uncompressed PCM data. For encoding, it is possible to have an even larger size increase, although such behavior is generally considered faulty. This happens if the encoder chooses a Rice parameter that does not fit with the residual that has to be encoded. In such a case, very long unary-coded symbols can appear (in the most extreme case, more than 4 gigabytes per sample). Decoder and encoder implementors are advised to take precautions to prevent excessive resource utilization in such cases.</t>
      <t indent="0" pn="section-11-5">Where metadata is handled, implementors are advised to either thoroughly test the handling of extreme cases or impose reasonable limits beyond the limits of this specification. For example, a single Vorbis comment metadata block can contain millions of valid fields. It is unlikely such a limit is ever reached except in a potentially malicious file. Likewise, the media type and description of a picture metadata block can be millions of characters long, despite there being no reasonable use of such contents. One possible use case for very long character strings is in lyrics, which can be stored in Vorbis comment metadata block fields.</t>
      <t indent="0" pn="section-11-6">Various kinds of metadata blocks contain length fields or field counts. While reading a block following these lengths or counts, a decoder <bcp14>MUST</bcp14> make sure higher-level lengths or counts (most importantly, the length field of the metadata block itself) are not exceeded. 
As some of these length fields code string lengths and memory must be allocated for that, parsers <bcp14>MUST</bcp14> first verify that a block is valid before allocating memory based on its contents, except when explicitly instructed to salvage data from a malformed file.</t>
      <t indent="0" pn="section-11-7">Metadata blocks can also contain references, e.g., the picture metadata block can contain a URI. When following a URI, the security considerations of <xref target="RFC3986" format="default" sectionFormat="of" derivedContent="RFC3986"/> apply. Applications <bcp14>MUST</bcp14> obtain explicit user approval to retrieve resources via remote protocols. Following external URIs introduces a tracking risk from on-path observers and the operator of the service hosting the URI. Likewise, the choice of scheme, if it isn't protected like https, could also introduce integrity attacks by an on-path observer. A malicious operator of the service hosting the URI can return arbitrary content that the parser will read. Also, such retrievals can be used in a DDoS attack when the URI points to a potential victim. Therefore, applications need to ask user approval for each retrieval individually, take extra precautions when parsing retrieved data, and cache retrieved resources. Applications <bcp14>MUST</bcp14> obtain explicit user approval to retrieve local resources not located in the same directory as the FLAC file being processed. Since relative URIs are permitted, applications <bcp14>MUST</bcp14> guard against directory traversal attacks and guard against a violation of a same-origin policy if such a policy is being enforced.</t>
      <t indent="0" pn="section-11-8">Seeking in a FLAC stream that is not in a container relies on the coded number in frame headers and optionally a seek table metadata block. Parsers <bcp14>MUST</bcp14> employ thorough checks on whether a found coded number or seek point is at all possible, e.g., whether it is within bounds and not directly contradicting any other coded number or seek point that the seeking process relies on. Without these checks, seeking might get stuck in an infinite loop when numbers in frames are non-consecutive or otherwise not valid, which could be used in DoS attacks.</t>
      <t indent="0" pn="section-11-9">Implementors are advised to employ fuzz testing combined with different sanitizers on FLAC decoders to find security problems. Ignoring the results of CRC checks improves the efficiency of decoder fuzz testing.</t>
      <t indent="0" pn="section-11-10">See <xref target="FLAC-decoder-testbench" format="default" sectionFormat="of" derivedContent="FLAC-decoder-testbench"/> for a non-exhaustive list of FLAC files with extreme configurations that lead to crashes or reboots on some known implementations. Besides providing a starting point for security testing, this set of files can also be used to test conformance with this specification.</t>
      <t indent="0" pn="section-11-11">FLAC files may contain executable code, although the FLAC format is not designed for it and it is uncommon. One use case where FLAC is occasionally used to store executable code is when compressing images of mixed-mode CDs, which contain both audio and non-audio data, the non-audio portion of which can contain executable code. In that case, the executable code is stored as if it were audio and is potentially obscured. Of course, it is also possible to store executable code as metadata, for example, as a Vorbis comment with help of a binary-to-text encoding or directly in an application metadata block. Applications <bcp14>MUST NOT</bcp14> execute code contained in FLAC files or present parts of FLAC files as executable code to the user, except when an application has that explicit purpose, e.g., applications reading FLAC files as disc images and presenting it as a virtual disc drive.</t>
    </section>
    <section anchor="iana-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-12">
      <name slugifiedName="name-iana-considerations">IANA Considerations</name>
      <t indent="0" pn="section-12-1"> Per this document, IANA has registered one new media type ("audio/flac") and created a new IANA registry, as described in the subsections below.</t>
      <section anchor="media-type-registration" numbered="true" removeInRFC="false" toc="include" pn="section-12.1">
        <name slugifiedName="name-media-type-registration">Media Type Registration</name>
        <t indent="0" pn="section-12.1-1">IANA has registered the "audio/flac" media type as follows. This media type is applicable for FLAC audio that is not packaged in a container as described in <xref target="container-mappings" format="default" sectionFormat="of" derivedContent="Section 10"/>. FLAC audio packaged in such a container will take on the media type of that container, for example, "audio/ogg" when packaged in an Ogg container or "video/mp4" when packaged in an MP4 container alongside a video track.</t>
        <dl indent="3" newline="false" spacing="normal" pn="section-12.1-2">
          <dt pn="section-12.1-2.1">Type name:</dt>
          <dd pn="section-12.1-2.2">audio</dd>
          <dt pn="section-12.1-2.3">Subtype name:</dt>
          <dd pn="section-12.1-2.4">flac</dd>
          <dt pn="section-12.1-2.5">Required parameters:</dt>
          <dd pn="section-12.1-2.6">N/A</dd>
          <dt pn="section-12.1-2.7">Optional parameters:</dt>
          <dd pn="section-12.1-2.8">N/A</dd>
          <dt pn="section-12.1-2.9">Encoding considerations:</dt>
          <dd pn="section-12.1-2.10">as per RFC 9639</dd>
          <dt pn="section-12.1-2.11">Security considerations:</dt>
          <dd pn="section-12.1-2.12">See the security considerations in
   <xref target="security-considerations" format="default" sectionFormat="of" derivedContent="Section 11"/> of RFC 9639.</dd>
          <dt pn="section-12.1-2.13">Interoperability considerations:</dt>
          <dd pn="section-12.1-2.14">See the descriptions of past
   format changes in <xref target="past-format-changes" format="default" sectionFormat="of" derivedContent="Appendix B"/> of RFC 9639.</dd>
          <dt pn="section-12.1-2.15">Published specification:</dt>
          <dd pn="section-12.1-2.16">RFC 9639</dd>
          <dt pn="section-12.1-2.17">Applications that use this media type:</dt>
          <dd pn="section-12.1-2.18">FFmpeg, Apache,
   Firefox</dd>
          <dt pn="section-12.1-2.19">Fragment identifier considerations:</dt>
          <dd pn="section-12.1-2.20">N/A</dd>
          <dt pn="section-12.1-2.21">Additional information:</dt>
          <dd pn="section-12.1-2.22">
            <t indent="0" pn="section-12.1-2.22.1"><br/></t>
            <dl spacing="compact" indent="3" newline="false" pn="section-12.1-2.22.2">
              <dt pn="section-12.1-2.22.2.1">Deprecated alias names for this type:</dt>
              <dd pn="section-12.1-2.22.2.2">audio/x-flac</dd>
              <dt pn="section-12.1-2.22.2.3">Magic number(s):</dt>
              <dd pn="section-12.1-2.22.2.4">fLaC</dd>
              <dt pn="section-12.1-2.22.2.5">File extension(s):</dt>
              <dd pn="section-12.1-2.22.2.6">flac</dd>
              <dt pn="section-12.1-2.22.2.7">Macintosh file type code(s):</dt>
              <dd pn="section-12.1-2.22.2.8">N/A</dd>
              <dt pn="section-12.1-2.22.2.9">Uniform Type Identifier:</dt>
              <dd pn="section-12.1-2.22.2.10">org.xiph.flac conforms to public.audio</dd>
              <dt pn="section-12.1-2.22.2.11">Windows Clipboard Format Name:</dt>
              <dd pn="section-12.1-2.22.2.12">audio/flac</dd>
            </dl>
          </dd>
          <dt pn="section-12.1-2.23">Person &amp; email address to contact for further
   information:</dt>
          <dd pn="section-12.1-2.24">IETF CELLAR Working Group (cellar@ietf.org)</dd>
          <dt pn="section-12.1-2.25">Intended usage:</dt>
          <dd pn="section-12.1-2.26">COMMON</dd>
          <dt pn="section-12.1-2.27">Restrictions on usage:</dt>
          <dd pn="section-12.1-2.28">N/A</dd>
          <dt pn="section-12.1-2.29">Author:</dt>
          <dd pn="section-12.1-2.30">IETF CELLAR Working Group</dd>
          <dt pn="section-12.1-2.31">Change controller:</dt>
          <dd pn="section-12.1-2.32">Internet Engineering Task Force
   (iesg@ietf.org)</dd>
        </dl>
      </section>
      <section anchor="application-id-registry" numbered="true" removeInRFC="false" toc="include" pn="section-12.2">
        <name slugifiedName="name-flac-application-metadata-b">FLAC Application Metadata
Block IDs Registry</name>
        <t indent="0" pn="section-12.2-1">IANA has created a new registry called the "FLAC Application Metadata Block IDs" registry. The values correspond to the 32-bit identifier described in <xref target="application" format="default" sectionFormat="of" derivedContent="Section 8.4"/>.</t>
        <t indent="0" pn="section-12.2-2">To register a new application ID in this registry, one needs an application ID, a description, an optional reference to a document describing the application ID, and a Change Controller (IETF or email of registrant). The application IDs are  allocated according to the "First Come First Served" policy <xref target="RFC8126" format="default" sectionFormat="of" derivedContent="RFC8126"/> so that there is no impediment to registering any application IDs the FLAC community encounters, especially if they were used in audio files but were not registered when the audio files were encoded. An application ID can be any 32-bit value but is often composed of 4 ASCII characters that are human-readable.</t>
        <t indent="0" pn="section-12.2-3">The initial contents of "FLAC Application Metadata Block IDs" registry are shown in the table below. These initial values were taken from the registration page at xiph.org (see <xref target="ID-registration-page" format="default" sectionFormat="of" derivedContent="ID-registration-page"/>), which is no longer being maintained as it has been replaced by this registry.</t>
        <table align="center" pn="table-25">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Application ID</th>
              <th align="left" colspan="1" rowspan="1">ASCII Rendition (If Available)</th>
              <th align="left" colspan="1" rowspan="1">Description</th>
              <th align="left" colspan="1" rowspan="1">Reference</th>
              <th align="left" colspan="1" rowspan="1">Change Controller</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x41544348</td>
              <td align="left" colspan="1" rowspan="1">ATCH</td>
              <td align="left" colspan="1" rowspan="1">FlacFile</td>
              <td align="left" colspan="1" rowspan="1">
                <xref target="FlacFile" format="default" sectionFormat="of" derivedContent="FlacFile"/>, RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x42534F4C</td>
              <td align="left" colspan="1" rowspan="1">BSOL</td>
              <td align="left" colspan="1" rowspan="1">beSolo</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x42554753</td>
              <td align="left" colspan="1" rowspan="1">BUGS</td>
              <td align="left" colspan="1" rowspan="1">Bugs Player</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x43756573</td>
              <td align="left" colspan="1" rowspan="1">Cues</td>
              <td align="left" colspan="1" rowspan="1">GoldWave cue points</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x46696361</td>
              <td align="left" colspan="1" rowspan="1">Fica</td>
              <td align="left" colspan="1" rowspan="1">CUE Splitter</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x46746F6C</td>
              <td align="left" colspan="1" rowspan="1">Ftol</td>
              <td align="left" colspan="1" rowspan="1">flac-tools</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x4D4F5442</td>
              <td align="left" colspan="1" rowspan="1">MOTB</td>
              <td align="left" colspan="1" rowspan="1">MOTB MetaCzar</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x4D505345</td>
              <td align="left" colspan="1" rowspan="1">MPSE</td>
              <td align="left" colspan="1" rowspan="1">MP3 Stream Editor</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x4D754D4C</td>
              <td align="left" colspan="1" rowspan="1">MuML</td>
              <td align="left" colspan="1" rowspan="1">MusicML: Music Metadata Language</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x52494646</td>
              <td align="left" colspan="1" rowspan="1">RIFF</td>
              <td align="left" colspan="1" rowspan="1">Sound Devices RIFF chunk storage</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x5346464C</td>
              <td align="left" colspan="1" rowspan="1">SFFL</td>
              <td align="left" colspan="1" rowspan="1">Sound Font FLAC</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x534F4E59</td>
              <td align="left" colspan="1" rowspan="1">SONY</td>
              <td align="left" colspan="1" rowspan="1">Sony Creative Software</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x5351455A</td>
              <td align="left" colspan="1" rowspan="1">SQEZ</td>
              <td align="left" colspan="1" rowspan="1">flacsqueeze</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x54745776</td>
              <td align="left" colspan="1" rowspan="1">TtWv</td>
              <td align="left" colspan="1" rowspan="1">TwistedWave</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x55495453</td>
              <td align="left" colspan="1" rowspan="1">UITS</td>
              <td align="left" colspan="1" rowspan="1">UITS Embedding tools</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x61696666</td>
              <td align="left" colspan="1" rowspan="1">aiff</td>
              <td align="left" colspan="1" rowspan="1">FLAC AIFF chunk storage</td>
              <td align="left" colspan="1" rowspan="1">
                <xref target="Foreign-metadata" format="default" sectionFormat="of" derivedContent="Foreign-metadata"/>, RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x696D6167</td>
              <td align="left" colspan="1" rowspan="1">imag</td>
              <td align="left" colspan="1" rowspan="1">flac-image</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x7065656D</td>
              <td align="left" colspan="1" rowspan="1">peem</td>
              <td align="left" colspan="1" rowspan="1">Parseable Embedded Extensible Metadata</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x71667374</td>
              <td align="left" colspan="1" rowspan="1">qfst</td>
              <td align="left" colspan="1" rowspan="1">QFLAC Studio</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x72696666</td>
              <td align="left" colspan="1" rowspan="1">riff</td>
              <td align="left" colspan="1" rowspan="1">FLAC RIFF chunk storage</td>
              <td align="left" colspan="1" rowspan="1">
                <xref target="Foreign-metadata" format="default" sectionFormat="of" derivedContent="Foreign-metadata"/>, RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x74756E65</td>
              <td align="left" colspan="1" rowspan="1">tune</td>
              <td align="left" colspan="1" rowspan="1">TagTuner</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x77363420</td>
              <td align="left" colspan="1" rowspan="1">w64 </td>
              <td align="left" colspan="1" rowspan="1">FLAC Wave64 chunk storage</td>
              <td align="left" colspan="1" rowspan="1">
                <xref target="Foreign-metadata" format="default" sectionFormat="of" derivedContent="Foreign-metadata"/>, RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x78626174</td>
              <td align="left" colspan="1" rowspan="1">xbat</td>
              <td align="left" colspan="1" rowspan="1">XBAT</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">0x786D6364</td>
              <td align="left" colspan="1" rowspan="1">xmcd</td>
              <td align="left" colspan="1" rowspan="1">xmcd</td>
              <td align="left" colspan="1" rowspan="1">RFC 9639</td>
              <td align="left" colspan="1" rowspan="1">IETF</td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
  </middle>
  <back>
    <references pn="section-13">
      <name slugifiedName="name-references">References</name>
      <references pn="section-13.1">
        <name slugifiedName="name-normative-references">Normative References</name>
        <reference anchor="ISRC-handbook" target="https://www.ifpi.org/isrc_handbook/" quoteTitle="true" derivedAnchor="ISRC-handbook">
          <front>
            <title>International Standard Recording Code (ISRC) Handbook</title>
            <author>
              <organization showOnFrontPage="true">International ISRC Registration Authority</organization>
            </author>
            <date year="2021"/>
          </front>
          <refcontent>4th edition</refcontent>
        </reference>
        <reference anchor="RFC1321" target="https://www.rfc-editor.org/info/rfc1321" quoteTitle="true" derivedAnchor="RFC1321">
          <front>
            <title>The MD5 Message-Digest Algorithm</title>
            <author fullname="R. Rivest" initials="R." surname="Rivest"/>
            <date month="April" year="1992"/>
            <abstract>
              <t indent="0">This document describes the MD5 message-digest algorithm. The algorithm takes as input a message of arbitrary length and produces as output a 128-bit "fingerprint" or "message digest" of the input. This memo provides information for the Internet community. It does not specify an Internet standard.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="1321"/>
          <seriesInfo name="DOI" value="10.17487/RFC1321"/>
        </reference>
        <reference anchor="RFC2046" target="https://www.rfc-editor.org/info/rfc2046" quoteTitle="true" derivedAnchor="RFC2046">
          <front>
            <title>Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</title>
            <author fullname="N. Freed" initials="N." surname="Freed"/>
            <author fullname="N. Borenstein" initials="N." surname="Borenstein"/>
            <date month="November" year="1996"/>
            <abstract>
              <t indent="0">This second document defines the general structure of the MIME media typing system and defines an initial set of media types. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="2046"/>
          <seriesInfo name="DOI" value="10.17487/RFC2046"/>
        </reference>
        <reference anchor="RFC2083" target="https://www.rfc-editor.org/info/rfc2083" quoteTitle="true" derivedAnchor="RFC2083">
          <front>
            <title>PNG (Portable Network Graphics) Specification Version 1.0</title>
            <author fullname="T. Boutell" initials="T." surname="Boutell"/>
            <date month="March" year="1997"/>
            <abstract>
              <t indent="0">This document describes PNG (Portable Network Graphics), an extensible file format for the lossless, portable, well-compressed storage of raster images. This memo provides information for the Internet community. This memo does not specify an Internet standard of any kind.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="2083"/>
          <seriesInfo name="DOI" value="10.17487/RFC2083"/>
        </reference>
        <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" quoteTitle="true" derivedAnchor="RFC2119">
          <front>
            <title>Key words for use in RFCs to Indicate Requirement Levels</title>
            <author fullname="S. Bradner" initials="S." surname="Bradner"/>
            <date month="March" year="1997"/>
            <abstract>
              <t indent="0">In many standards track documents several words are used to signify the requirements in the specification. These words are often capitalized. This document defines these words as they should be interpreted in IETF documents. This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="2119"/>
          <seriesInfo name="DOI" value="10.17487/RFC2119"/>
        </reference>
        <reference anchor="RFC3533" target="https://www.rfc-editor.org/info/rfc3533" quoteTitle="true" derivedAnchor="RFC3533">
          <front>
            <title>The Ogg Encapsulation Format Version 0</title>
            <author fullname="S. Pfeiffer" initials="S." surname="Pfeiffer"/>
            <date month="May" year="2003"/>
            <abstract>
              <t indent="0">This document describes the Ogg bitstream format version 0, which is a general, freely-available encapsulation format for media streams. It is able to encapsulate any kind and number of video and audio encoding formats as well as other data streams in a single bitstream. This memo provides information for the Internet community. This memo provides information for the Internet community.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="3533"/>
          <seriesInfo name="DOI" value="10.17487/RFC3533"/>
        </reference>
        <reference anchor="RFC3629" target="https://www.rfc-editor.org/info/rfc3629" quoteTitle="true" derivedAnchor="RFC3629">
          <front>
            <title>UTF-8, a transformation format of ISO 10646</title>
            <author fullname="F. Yergeau" initials="F." surname="Yergeau"/>
            <date month="November" year="2003"/>
            <abstract>
              <t indent="0">ISO/IEC 10646-1 defines a large character set called the Universal Character Set (UCS) which encompasses most of the world's writing systems. The originally proposed encodings of the UCS, however, were not compatible with many current applications and protocols, and this has led to the development of UTF-8, the object of this memo. UTF-8 has the characteristic of preserving the full US-ASCII range, providing compatibility with file systems, parsers and other software that rely on US-ASCII values but are transparent to other values. This memo obsoletes and replaces RFC 2279.</t>
            </abstract>
          </front>
          <seriesInfo name="STD" value="63"/>
          <seriesInfo name="RFC" value="3629"/>
          <seriesInfo name="DOI" value="10.17487/RFC3629"/>
        </reference>
        <reference anchor="RFC3986" target="https://www.rfc-editor.org/info/rfc3986" quoteTitle="true" derivedAnchor="RFC3986">
          <front>
            <title>Uniform Resource Identifier (URI): Generic Syntax</title>
            <author fullname="T. Berners-Lee" initials="T." surname="Berners-Lee"/>
            <author fullname="R. Fielding" initials="R." surname="Fielding"/>
            <author fullname="L. Masinter" initials="L." surname="Masinter"/>
            <date month="January" year="2005"/>
            <abstract>
              <t indent="0">A Uniform Resource Identifier (URI) is a compact sequence of characters that identifies an abstract or physical resource. This specification defines the generic URI syntax and a process for resolving URI references that might be in relative form, along with guidelines and security considerations for the use of URIs on the Internet. The URI syntax defines a grammar that is a superset of all valid URIs, allowing an implementation to parse the common components of a URI reference without knowing the scheme-specific requirements of every possible identifier. This specification does not define a generative grammar for URIs; that task is performed by the individual specifications of each URI scheme. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="STD" value="66"/>
          <seriesInfo name="RFC" value="3986"/>
          <seriesInfo name="DOI" value="10.17487/RFC3986"/>
        </reference>
        <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" quoteTitle="true" derivedAnchor="RFC8174">
          <front>
            <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
            <author fullname="B. Leiba" initials="B." surname="Leiba"/>
            <date month="May" year="2017"/>
            <abstract>
              <t indent="0">RFC 2119 specifies common key words that may be used in protocol specifications. This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the defined special meanings.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="8174"/>
          <seriesInfo name="DOI" value="10.17487/RFC8174"/>
        </reference>
        <reference anchor="RFC9559" target="https://www.rfc-editor.org/info/rfc9559" quoteTitle="true" derivedAnchor="RFC9559">
          <front>
            <title>Matroska Media Container Format Specification</title>
            <author fullname="S. Lhomme" initials="S." surname="Lhomme"/>
            <author fullname="M. Bunkus" initials="M." surname="Bunkus"/>
            <author fullname="D. Rice" initials="D." surname="Rice"/>
            <date month="October" year="2024"/>
            <abstract>
              <t indent="0">This document defines the Matroska audiovisual data container structure, including definitions of its structural elements, terminology, vocabulary, and application.</t>
              <t indent="0">This document updates RFC 8794 to permit the use of a previously reserved Extensible Binary Meta Language (EBML) Element ID.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="9559"/>
          <seriesInfo name="DOI" value="10.17487/RFC9559"/>
        </reference>
      </references>
      <references pn="section-13.2">
        <name slugifiedName="name-informative-references">Informative References</name>
        <reference anchor="Durbin" target="https://www.jstor.org/stable/1401322" quoteTitle="true" derivedAnchor="Durbin">
          <front>
            <title>The Fitting of Time-Series Models</title>
            <author fullname="James Durbin" initials="J" surname="Durbin">
              <organization showOnFrontPage="true">University of London</organization>
            </author>
            <date year="1960"/>
          </front>
          <seriesInfo name="DOI" value="10.2307/1401322"/>
          <refcontent>Revue de l'Institut International de Statistique / Review of the International Statistical Institute, vol. 28, no. 3, pp. 233-44</refcontent>
        </reference>
        <reference anchor="FIR" target="https://en.wikipedia.org/w/index.php?title=Finite_impulse_response&amp;oldid=1240945295" quoteTitle="true" derivedAnchor="FIR">
          <front>
            <title>Finite impulse response</title>
            <author>
              <organization showOnFrontPage="true">Wikipedia</organization>
            </author>
            <date month="August" year="2024"/>
          </front>
        </reference>
        <reference anchor="FLAC-decoder-testbench" target="https://github.com/ietf-wg-cellar/flac-test-files" quoteTitle="true" derivedAnchor="FLAC-decoder-testbench">
          <front>
            <title>The Free Lossless Audio Codec (FLAC) test files</title>
            <author/>
            <date year="2023" month="08"/>
          </front>
          <refcontent>commit aa7b0c6</refcontent>
        </reference>
        <reference anchor="FLAC-implementation" target="https://xiph.org/flac/" quoteTitle="true" derivedAnchor="FLAC-implementation">
          <front>
            <title>FLAC</title>
            <author/>
            <date/>
          </front>
        </reference>
        <reference anchor="FLAC-in-MP4-specification" target="https://github.com/xiph/flac/blob/master/doc/isoflac.txt" quoteTitle="true" derivedAnchor="FLAC-in-MP4-specification">
          <front>
            <title>Encapsulation of FLAC in ISO Base Media File Format</title>
            <author/>
            <date year="2022" month="07"/>
          </front>
          <refcontent>commit 78d85dd</refcontent>
        </reference>
        <reference anchor="FLAC-specification-github" target="https://github.com/ietf-wg-cellar/flac-specification" quoteTitle="true" derivedAnchor="FLAC-specification-github">
          <front>
            <title>The Free Lossless Audio Codec (FLAC) Specification</title>
            <author/>
            <date/>
          </front>
        </reference>
        <reference anchor="FLAC-wiki-interoperability" target="https://github.com/ietf-wg-cellar/flac-specification/wiki/Interoperability-considerations" quoteTitle="true" derivedAnchor="FLAC-wiki-interoperability">
          <front>
            <title>Interoperability considerations</title>
            <author/>
          </front>
          <refcontent>commit 58a06d6</refcontent>
        </reference>
        <reference anchor="FlacFile" target="https://web.archive.org/web/20071023070305/http://firestuff.org:80/flacfile/" quoteTitle="true" derivedAnchor="FlacFile">
          <front>
            <title>FlacFile</title>
            <author/>
            <date year="2007" month="10"/>
          </front>
          <refcontent>Wayback Machine archive</refcontent>
        </reference>
        <reference anchor="Foreign-metadata" target="https://github.com/xiph/flac/blob/master/doc/foreign_metadata_storage.md" quoteTitle="true" derivedAnchor="Foreign-metadata">
          <front>
            <title>Specification of foreign metadata storage in FLAC</title>
            <author/>
            <date year="2023" month="11"/>
          </front>
          <refcontent>commit 72787c3</refcontent>
        </reference>
        <reference anchor="ID-registration-page" target="https://xiph.org/flac/id.html" quoteTitle="true" derivedAnchor="ID-registration-page">
          <front>
            <title>ID registry</title>
            <author>
              <organization showOnFrontPage="true">Xiph.Org</organization>
            </author>
          </front>
        </reference>
        <reference anchor="ID3v2" target="https://web.archive.org/web/20220903174949/https://id3.org/id3v2.4.0-frames" quoteTitle="true" derivedAnchor="ID3v2">
          <front>
            <title>ID3 tag version 2.4.0 - Native Frames</title>
            <author fullname="Martin Nilsson" initials="M" surname="Nilsson"/>
            <date year="2000" month="11"/>
          </front>
          <refcontent>Wayback Machine archive</refcontent>
        </reference>
        <reference anchor="IEC.60908.1999" target="https://webstore.iec.ch/publication/3885" quoteTitle="true" derivedAnchor="IEC.60908.1999">
          <front>
            <title>Audio recording - Compact disc digital audio system</title>
            <author>
              <organization showOnFrontPage="true">International Electrotechnical Commission</organization>
            </author>
            <date year="1999"/>
          </front>
          <seriesInfo name="IEC" value="60908:1999-02"/>
        </reference>
        <reference anchor="LinearPrediction" target="https://en.wikipedia.org/w/index.php?title=Linear_prediction&amp;oldid=1169015573" quoteTitle="true" derivedAnchor="LinearPrediction">
          <front>
            <title>Linear prediction</title>
            <author>
              <organization showOnFrontPage="true">Wikipedia</organization>
            </author>
            <date month="August" year="2023"/>
          </front>
        </reference>
        <reference anchor="Lossless-Compression" target="https://ieeexplore.ieee.org/document/939834" quoteTitle="true" derivedAnchor="Lossless-Compression">
          <front>
            <title>Lossless compression of digital audio</title>
            <author fullname="Mat Hans" initials="M" surname="Hans">
              <organization showOnFrontPage="true">Client and Media Systems Laboratory, HP Laboratories Palo Alto</organization>
            </author>
            <author fullname="Ronald W. Schafer" initials="R. W" surname="Schafer">
              <organization showOnFrontPage="true">Center for Signal &amp; Image Processing at the School of Electrical and Computer Engineering, Georgia Institute of the Technology, Atlanta, Georgia</organization>
            </author>
            <date year="2001" month="July"/>
          </front>
          <seriesInfo name="DOI" value="10.1109/79.939834"/>
          <refcontent>IEEE Signal Processing Magazine, vol. 18, no. 4, pp. 21-32</refcontent>
        </reference>
        <reference anchor="lossyWAV" target="https://wiki.hydrogenaud.io/index.php?title=LossyWAV&amp;oldid=32877" quoteTitle="true" derivedAnchor="lossyWAV">
          <front>
            <title>lossyWAV</title>
            <author>
              <organization showOnFrontPage="true">Hydrogenaudio Knowledgebase</organization>
            </author>
            <date month="July" year="2021"/>
          </front>
        </reference>
        <reference anchor="MLP" target="https://www.aes.org/e-lib/online/browse.cfm?elib=8082" quoteTitle="true" derivedAnchor="MLP">
          <front>
            <title>The MLP Lossless Compression System</title>
            <author fullname="Michael A. Gerzon" initials="M. A" surname="Gerzon"/>
            <author fullname="Peter G. Craven" initials="P. G" surname="Craven">
              <organization showOnFrontPage="true">Algol Applications Ltd, Hove, England</organization>
            </author>
            <author fullname="J. Robert Stuart" initials="J. R" surname="Stuart">
              <organization showOnFrontPage="true">Meridian Audio Ltd, Huntingdon, England</organization>
            </author>
            <author fullname="Malcolm J. Law" initials="M. J" surname="Law">
              <organization showOnFrontPage="true">Algol Applications Ltd, Hove, England</organization>
            </author>
            <author fullname="Rhonda J. Wilson" initials="R. J" surname="Wilson">
              <organization showOnFrontPage="true">Meridian Audio Ltd, Huntingdon, England</organization>
            </author>
            <date year="1999" month="09"/>
          </front>
          <refcontent>Audio Engineering Society Conference: 17th International Conference: High-Quality Audio Codin</refcontent>
        </reference>
        <reference anchor="MusicBrainz" target="https://picard-docs.musicbrainz.org/en/variables/variables.html" quoteTitle="true" derivedAnchor="MusicBrainz">
          <front>
            <title>Tags &amp; Variables</title>
            <author>
              <organization showOnFrontPage="true">MusicBrainz</organization>
            </author>
          </front>
          <refcontent>MusicBrainz Picard v2.10 documentation</refcontent>
        </reference>
        <reference anchor="RFC4732" target="https://www.rfc-editor.org/info/rfc4732" quoteTitle="true" derivedAnchor="RFC4732">
          <front>
            <title>Internet Denial-of-Service Considerations</title>
            <author fullname="M. Handley" initials="M." role="editor" surname="Handley"/>
            <author fullname="E. Rescorla" initials="E." role="editor" surname="Rescorla"/>
            <author>
              <organization abbrev="IAB" showOnFrontPage="true">Internet Architecture Board</organization>
            </author>
            <date month="December" year="2006"/>
            <abstract>
              <t indent="0">This document provides an overview of possible avenues for denial-of-service (DoS) attack on Internet systems. The aim is to encourage protocol designers and network engineers towards designs that are more robust. We discuss partial solutions that reduce the effectiveness of attacks, and how some solutions might inadvertently open up alternative vulnerabilities. This memo provides information for the Internet community.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="4732"/>
          <seriesInfo name="DOI" value="10.17487/RFC4732"/>
        </reference>
        <reference anchor="RFC5334" target="https://www.rfc-editor.org/info/rfc5334" quoteTitle="true" derivedAnchor="RFC5334">
          <front>
            <title>Ogg Media Types</title>
            <author fullname="I. Goncalves" initials="I." surname="Goncalves"/>
            <author fullname="S. Pfeiffer" initials="S." surname="Pfeiffer"/>
            <author fullname="C. Montgomery" initials="C." surname="Montgomery"/>
            <date month="September" year="2008"/>
            <abstract>
              <t indent="0">This document describes the registration of media types for the Ogg container format and conformance requirements for implementations of these types. This document obsoletes RFC 3534. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="5334"/>
          <seriesInfo name="DOI" value="10.17487/RFC5334"/>
        </reference>
        <reference anchor="RFC6716" target="https://www.rfc-editor.org/info/rfc6716" quoteTitle="true" derivedAnchor="RFC6716">
          <front>
            <title>Definition of the Opus Audio Codec</title>
            <author fullname="JM. Valin" initials="JM." surname="Valin"/>
            <author fullname="K. Vos" initials="K." surname="Vos"/>
            <author fullname="T. Terriberry" initials="T." surname="Terriberry"/>
            <date month="September" year="2012"/>
            <abstract>
              <t indent="0">This document defines the Opus interactive speech and audio codec. Opus is designed to handle a wide range of interactive audio applications, including Voice over IP, videoconferencing, in-game chat, and even live, distributed music performances. It scales from low bitrate narrowband speech at 6 kbit/s to very high quality stereo music at 510 kbit/s. Opus uses both Linear Prediction (LP) and the Modified Discrete Cosine Transform (MDCT) to achieve good compression of both speech and music. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6716"/>
          <seriesInfo name="DOI" value="10.17487/RFC6716"/>
        </reference>
        <reference anchor="RFC8126" target="https://www.rfc-editor.org/info/rfc8126" quoteTitle="true" derivedAnchor="RFC8126">
          <front>
            <title>Guidelines for Writing an IANA Considerations Section in RFCs</title>
            <author fullname="M. Cotton" initials="M." surname="Cotton"/>
            <author fullname="B. Leiba" initials="B." surname="Leiba"/>
            <author fullname="T. Narten" initials="T." surname="Narten"/>
            <date month="June" year="2017"/>
            <abstract>
              <t indent="0">Many protocols make use of points of extensibility that use constants to identify various protocol parameters. To ensure that the values in these fields do not have conflicting uses and to promote interoperability, their allocations are often coordinated by a central record keeper. For IETF protocols, that role is filled by the Internet Assigned Numbers Authority (IANA).</t>
              <t indent="0">To make assignments in a given registry prudently, guidance describing the conditions under which new values should be assigned, as well as when and how modifications to existing values can be made, is needed. This document defines a framework for the documentation of these guidelines by specification authors, in order to assure that the provided guidance for the IANA Considerations is clear and addresses the various issues that are likely in the operation of a registry.</t>
              <t indent="0">This is the third edition of this document; it obsoletes RFC 5226.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="26"/>
          <seriesInfo name="RFC" value="8126"/>
          <seriesInfo name="DOI" value="10.17487/RFC8126"/>
        </reference>
        <reference anchor="Rice" target="https://ieeexplore.ieee.org/document/1090789" quoteTitle="true" derivedAnchor="Rice">
          <front>
            <title>Adaptive Variable-Length Coding for Efficient Compression of Spacecraft Television Data</title>
            <author fullname="Robert Rice" initials="R. F" surname="Rice">
              <organization showOnFrontPage="true">Jet Propulsion Laboratory, California Institute of Technology, Pasadena, CA, USA</organization>
            </author>
            <author initials="J. R" surname="Plaunt">
              <organization showOnFrontPage="true">Jet Propulsion Laboratory, California Institute of Technology, Pasadena, CA, USA</organization>
            </author>
            <date year="1971" month="12"/>
          </front>
          <seriesInfo name="DOI" value="10.1109/TCOM.1971.1090789"/>
          <refcontent>IEEE Transactions on Communication Technology, vol. 19, no. 6, pp. 889-897</refcontent>
        </reference>
        <reference anchor="Robinson-TR156" target="https://mi.eng.cam.ac.uk/reports/svr-ftp/auto-pdf/robinson_tr156.pdf" quoteTitle="true" derivedAnchor="Robinson-TR156">
          <front>
            <title>SHORTEN: Simple lossless and near-lossless waveform compression</title>
            <author fullname="Tony Robinson" initials="T" surname="Robinson">
              <organization showOnFrontPage="true">Cambridge University Engineering Department</organization>
            </author>
            <date year="1994" month="12"/>
          </front>
          <refcontent>Cambridge University Engineering Department Technical Report CUED/F-INFENG/TR.156</refcontent>
        </reference>
        <reference anchor="Shannon" target="https://ieeexplore.ieee.org/document/1697831" quoteTitle="true" derivedAnchor="Shannon">
          <front>
            <title>Communication in the Presence of Noise</title>
            <author fullname="Claude Shannon" initials="C. E" surname="Shannon">
              <organization showOnFrontPage="true">Bell Telephone Laboratories, Inc., Murray Hill, NJ, USA</organization>
            </author>
            <date year="1949" month="01"/>
          </front>
          <seriesInfo name="DOI" value="10.1109/JRPROC.1949.232969"/>
          <refcontent>Proceedings of the IRE, vol. 37, no. 1, pp. 10-21</refcontent>
        </reference>
        <reference anchor="VarLengthCode" target="https://en.wikipedia.org/w/index.php?title=Variable-length_code&amp;oldid=1220260423" quoteTitle="true" derivedAnchor="VarLengthCode">
          <front>
            <title>Variable-length code</title>
            <author>
              <organization showOnFrontPage="true">Wikipedia</organization>
            </author>
            <date month="April" year="2024"/>
          </front>
        </reference>
        <reference anchor="Vorbis" target="https://xiph.org/vorbis/doc/v-comment.html" quoteTitle="true" derivedAnchor="Vorbis">
          <front>
            <title>Ogg Vorbis I format specification: comment field and header specification</title>
            <author>
              <organization showOnFrontPage="true">Xiph.Org</organization>
            </author>
            <date/>
          </front>
        </reference>
      </references>
    </references>
    <section anchor="numerical-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a">
      <name slugifiedName="name-numerical-considerations">Numerical Considerations</name>
      <t indent="0" pn="section-appendix.a-1">In order to maintain lossless behavior, all arithmetic used in encoding and decoding sample values must be done with integer data types to eliminate the possibility of introducing rounding errors associated with floating-point arithmetic. Use of floating-point representations in analysis (e.g., finding a good predictor or Rice parameter) is not a concern as long as the process of using the found predictor and Rice parameter to encode audio samples is implemented with only integer math.</t>
      <t indent="0" pn="section-appendix.a-2">Furthermore, the possibility of integer overflow can be eliminated by using data types that are large enough. Choosing a 64-bit signed data type for all arithmetic involving sample values would make sure the possibility for overflow is eliminated, but usually, smaller data types are chosen for increased performance, especially in embedded devices. This appendix provides guidelines for choosing the appropriate data type for each step of encoding and decoding FLAC files.</t>
      <t indent="0" pn="section-appendix.a-3">In this appendix, signed data types are signed two's complement.</t>
      <section anchor="determining-the-necessary-data-type-size" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a.1">
        <name slugifiedName="name-determining-the-necessary-d">Determining the Necessary Data Type Size</name>
        <t indent="0" pn="section-appendix.a.1-1">To find the smallest data type size that is guaranteed not to overflow for a certain sequence of arithmetic operations, the combination of values producing the largest possible result should be considered.</t>
        <t indent="0" pn="section-appendix.a.1-2">For example, if two 16-bit signed integers are added, the largest possible result forms if both values are the largest number that can be represented with a 16-bit signed integer. To store the result, a signed integer data type with at least 17 bits is needed. Similarly, when adding 4 of these values, 18 bits are needed; when adding 8, 19 bits are needed, etc. In general, the number of bits necessary when adding numbers together is increased by the log base 2 of the number of values rounded up to the nearest integer. So, when adding 18 unknown values stored in 8-bit signed integers, we need a signed integer data type of at least 13 bits to store the result, as the log base 2 of 18 rounded up is 5.</t>
        <t indent="0" pn="section-appendix.a.1-3">When multiplying two numbers, the number of bits needed for the result is the size of the first number plus the size of the second number. For example, if a 16-bit signed integer is multiplied by another 16-bit signed integer, the result needs at least 32 bits to be stored without overflowing. To show this in practice, the largest signed value that can be stored in 4 bits is -8. (-8)*(-8) is 64, which needs at least 8 bits (signed) to store.</t>
      </section>
      <section anchor="stereo-decorrelation" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a.2">
        <name slugifiedName="name-stereo-decorrelation">Stereo Decorrelation</name>
        <t indent="0" pn="section-appendix.a.2-1">When stereo decorrelation is used, the side channel will have one extra bit of bit depth; see <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/>.</t>
        <t indent="0" pn="section-appendix.a.2-2">This means that while 16-bit signed integers have sufficient range to store samples from a fully decoded FLAC frame with a bit depth of 16 bits, the decoding of a side subframe in such a file will need a data type with at least 17 bits to store decoded subframe samples before undoing stereo decorrelation.</t>
        <t indent="0" pn="section-appendix.a.2-3">Most FLAC decoders store decoded (subframe) samples as 32-bit values, which is sufficient for files with bit depths up to (and including) 31 bits.</t>
      </section>
      <section anchor="prediction-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a.3">
        <name slugifiedName="name-prediction-2">Prediction</name>
        <t indent="0" pn="section-appendix.a.3-1">A prediction (which is used to calculate the residual on encoding or added to the residual to calculate the sample value on decoding) is formed by multiplying and summing preceding sample values. In order to eliminate the possibility of integer overflow, the combination of preceding sample values and predictor coefficients producing the largest possible value should be considered.</t>
        <t indent="0" pn="section-appendix.a.3-2">To determine the size of the data type needed to calculate either a residual sample (on encoding) or an audio sample value (on decoding) in a fixed predictor subframe, the maximum possible value for these is calculated as described in <xref target="determining-the-necessary-data-type-size" format="default" sectionFormat="of" derivedContent="Appendix A.1"/> and in the following table. For example, if a frame codes for 16-bit audio and has some form of stereo decorrelation, the subframe coding for the side channel would need 16+1+3 bits if a third-order fixed predictor is used.</t>
        <table align="center" pn="table-26">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Order</th>
              <th align="left" colspan="1" rowspan="1">Calculation of Residual</th>
              <th align="left" colspan="1" rowspan="1">Sample Values Summed</th>
              <th align="left" colspan="1" rowspan="1">Extra Bits</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">0</td>
              <td align="left" colspan="1" rowspan="1">a(n)</td>
              <td align="left" colspan="1" rowspan="1">1</td>
              <td align="left" colspan="1" rowspan="1">0</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">1</td>
              <td align="left" colspan="1" rowspan="1">a(n) - a(n-1)</td>
              <td align="left" colspan="1" rowspan="1">2</td>
              <td align="left" colspan="1" rowspan="1">1</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">2</td>
              <td align="left" colspan="1" rowspan="1">a(n) - 2 * a(n-1) + a(n-2)</td>
              <td align="left" colspan="1" rowspan="1">4</td>
              <td align="left" colspan="1" rowspan="1">2</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">3</td>
              <td align="left" colspan="1" rowspan="1">a(n) - 3 * a(n-1) + 3 * a(n-2) - a(n-3)</td>
              <td align="left" colspan="1" rowspan="1">8</td>
              <td align="left" colspan="1" rowspan="1">3</td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">4</td>
              <td align="left" colspan="1" rowspan="1">a(n) - 4 * a(n-1) + 6 * a(n-2) - 4 * a(n-3) + a(n-4)</td>
              <td align="left" colspan="1" rowspan="1">16</td>
              <td align="left" colspan="1" rowspan="1">4</td>
            </tr>
          </tbody>
        </table>
        <t indent="0" pn="section-appendix.a.3-4">Where:</t>
        <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-appendix.a.3-5">
          <li pn="section-appendix.a.3-5.1">n is the number of the sample being predicted.</li>
          <li pn="section-appendix.a.3-5.2">a(n) is the sample being predicted.</li>
          <li pn="section-appendix.a.3-5.3">a(n-1) is the sample before the one being predicted, a(n-2) is the sample before that, etc.</li>
        </ul>
        <t indent="0" pn="section-appendix.a.3-6">For subframes with a linear predictor, the calculation is a little more complicated. Each prediction is the sum of several multiplications. Each of these multiply a sample value with a predictor coefficient. The extra bits needed can be calculated by adding the predictor coefficient precision (in bits) to the bit depth of the audio samples. To account for the summing of these multiplications, the log base 2 of the predictor order rounded up is added.</t>
        <t indent="0" pn="section-appendix.a.3-7">For example, if the sample bit depth of the source is 24, the current subframe encodes a side channel (see <xref target="interchannel-decorrelation" format="default" sectionFormat="of" derivedContent="Section 4.2"/>), the predictor order is 12, and the predictor coefficient precision is 15 bits, the minimum required size of the used signed integer data type is at least (24 + 1) + 15 + ceil(log2(12)) = 44 bits. As another example, with a side-channel subframe bit depth of 16, a predictor order of 8, and a predictor coefficient precision of 12 bits, the minimum required size of the used signed integer data type is (16 + 1) + 12 + ceil(log2(8)) = 32 bits.</t>
      </section>
      <section anchor="residual" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a.4">
        <name slugifiedName="name-residual">Residual</name>
        <t indent="0" pn="section-appendix.a.4-1">As stated in <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/>, an encoder must make sure residual samples are representable by a 32-bit integer, signed two's complement, excluding the most negative value. As in the previous section, it is possible to calculate when residual samples already implicitly fit and when an additional check is needed. This implicit fit is achieved when residuals would fit a theoretical 31-bit signed integer, as that satisfies both of the mentioned criteria. When this implicit fit is not achieved, all residual values must be calculated and checked individually.</t>
        <t indent="0" pn="section-appendix.a.4-2">For the residual of a fixed predictor, the maximum residual sample size was already calculated in the previous section. However, for a linear predictor, the prediction is shifted right by a certain amount. The number of bits needed for the residual is the number of bits calculated in the previous section, reduced by the prediction right shift, and increased by one bit to account for the subtraction of the prediction from the current sample on encoding.</t>
        <t indent="0" pn="section-appendix.a.4-3">Taking the last example of the previous section, where 32 bits were needed for the prediction, the required data type size for the residual samples in case of a right shift of 10 bits would be 32 - 10 + 1 = 23 bits, which means it is not necessary to perform the aforementioned check.</t>
        <t indent="0" pn="section-appendix.a.4-4">As another example, when encoding 32-bit PCM with fixed predictors, all predictor orders must be checked. While the zero-order fixed predictor is guaranteed to have residual samples that fit a 32-bit signed integer, it might produce a residual sample value that is the most negative representable value of that 32-bit signed integer.</t>
        <t indent="0" pn="section-appendix.a.4-5">Note that on decoding, while the residual sample values are limited to the aforementioned range, the predictions are not. This means that while the decoding of the residual samples can happen fully in 32-bit signed integers, decoders must be sure to execute the addition of each residual sample to its accompanying prediction with a signed integer data type that is wide enough, as with encoding.</t>
      </section>
      <section anchor="rice-coding" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.a.5">
        <name slugifiedName="name-rice-coding">Rice Coding</name>
        <t indent="0" pn="section-appendix.a.5-1">When folding (i.e., zigzag encoding) the residual sample values, no extra bits are needed when the absolute value of each residual sample is first stored in an unsigned data type of the size of the last step, then doubled, and then has one subtracted depending on whether the residual sample was positive or negative. However, many implementations choose to require one extra bit of data type size so zigzag encoding can happen in one step without a cast instead of the procedure described in the previous sentence.</t>
      </section>
    </section>
    <section anchor="past-format-changes" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b">
      <name slugifiedName="name-past-format-changes">Past Format Changes</name>
      <t indent="0" pn="section-appendix.b-1">This informational appendix documents the changes made to the FLAC format over the years. This information might be of use when encountering FLAC files that were made with software following the format as it was before the changes documented in this appendix.</t>
      <t indent="0" pn="section-appendix.b-2">The FLAC format was first specified in December 2000, and the bitstream format was considered frozen with the release of FLAC 1.0 (the reference encoder/decoder) in July 2001. Only changes made since this first stable release are considered in this appendix. Changes made to the FLAC streamable subset definition (see <xref target="streamable-subset" format="default" sectionFormat="of" derivedContent="Section 7"/>) are not considered.</t>
      <section anchor="addition-of-blocking-strategy-bit" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.1">
        <name slugifiedName="name-addition-of-blocking-strate">Addition of Blocking Strategy Bit</name>
        <t indent="0" pn="section-appendix.b.1-1">Perhaps the largest backwards-incompatible change to the specification was published in July 2007. Before this change, variable block size streams were not explicitly marked as such by a flag bit in the frame header. A decoder had two ways to detect a variable block size stream: by comparing the minimum and maximum block sizes in the streaminfo metadata block (which are equal for a fixed block size stream) or by detecting a change of block size during a stream if a decoder did not receive a streaminfo metadata block, which could not happen at all in theory. As the meaning of the coded number in the frame header depends on whether or not a stream has a variable block size, this presented a problem: the meaning of the coded number could not be reliably determined. To fix this problem, one of the reserved bits was changed to be used as a blocking strategy bit. See also <xref target="frame-header" format="default" sectionFormat="of" derivedContent="Section 9.1"/>.</t>
        <t indent="0" pn="section-appendix.b.1-2">Along with the addition of a new flag, the meaning of the block size bits (see <xref target="block-size-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.1"/>) was subtly changed. Initially, block size bits patterns 0b0001-0b0101 and 0b1000-0b1111 could only be used for fixed block size streams, while 0b0110 and 0b0111 could be used for both fixed block size and variable block size streams. With this change, these restrictions were lifted, and patterns 0b0001-0b1111 are now used for both variable block size and fixed block size streams.</t>
      </section>
      <section anchor="restriction-of-encoded-residual-samples" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.2">
        <name slugifiedName="name-restriction-of-encoded-resi">Restriction of Encoded Residual Samples</name>
        <t indent="0" pn="section-appendix.b.2-1">Another change to the specification was deemed necessary during standardization by the CELLAR Working Group of the IETF. As specified in <xref target="coded-residual" format="default" sectionFormat="of" derivedContent="Section 9.2.7"/>, a limit is imposed on residual samples. This limit was not specified prior to the IETF standardization effort. However, as far as was known to the working group, no FLAC encoder at that time produced FLAC files containing residual samples exceeding this limit. This is mostly because it is very unlikely to encounter residual samples exceeding this limit when encoding 24-bit PCM, and encoding of PCM with higher bit depths was not yet implemented in any known encoder. In fact, these FLAC encoders would produce corrupt files upon being triggered to produce such residual samples, and it is unlikely any non-experimental encoder would ever do so, even when presented with crafted material. Therefore, it was not expected that existing implementations would be rendered non-compliant by this change.</t>
      </section>
      <section anchor="addition-of-5-bit-rice-parameters" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.3">
        <name slugifiedName="name-addition-of-5-bit-rice-para">Addition of 5-Bit Rice Parameters</name>
        <t indent="0" pn="section-appendix.b.3-1">One significant addition to the format was the residual coding method using
5-bit Rice parameters. Prior to publication of this addition in July 2007, a
partitioned Rice code with 4-bit Rice parameters was the only residual coding
method specified. The range offered by this coding method proved too small
when encoding 24-bit PCM; therefore, a second residual coding method was
specified that was identical to the first, but with 5-bit Rice parameters.</t>
      </section>
      <section anchor="restriction-of-lpc-shift-to-non-negative-values" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.b.4">
        <name slugifiedName="name-restriction-of-lpc-shift-to">Restriction of LPC Shift to Non-negative Values</name>
        <t indent="0" pn="section-appendix.b.4-1">As stated in <xref target="linear-predictor-subframe" format="default" sectionFormat="of" derivedContent="Section 9.2.6"/>, the predictor right shift is a number signed two's complement, which <bcp14>MUST NOT</bcp14> be negative. This is because shifting a number to the right by a negative amount is undefined behavior in the C programming language standard. The intended behavior was that a positive number would be a right shift and a negative number would be a left shift. The FLAC reference encoder was changed in 2007 to not generate LPC subframes with a negative predictor right shift, as it turned out that the use of such subframes would only very rarely provide any benefit and the decoders that were already widely in use at that point were not able to handle such subframes.</t>
      </section>
    </section>
    <section anchor="interoperability-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c">
      <name slugifiedName="name-interoperability-considerat">Interoperability
Considerations</name>
      <t indent="0" pn="section-appendix.c-1">As documented in <xref target="past-format-changes" format="default" sectionFormat="of" derivedContent="Appendix B"/>, there have been some changes and additions to the FLAC format. Additionally, implementation of certain features of the FLAC format took many years, meaning early decoder implementations could not be tested against files with these features. Finally, many lower-quality FLAC decoders only implement just enough features required for playback of the most common FLAC files.</t>
      <t indent="0" pn="section-appendix.c-2">This appendix provides some considerations for encoder implementations aiming to create highly compatible files. As this topic is one that might change after this document is published, consult <xref target="FLAC-wiki-interoperability" format="default" sectionFormat="of" derivedContent="FLAC-wiki-interoperability"/> for more up-to-date information.</t>
      <section anchor="features-outside-of-the-streamable-subset" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.1">
        <name slugifiedName="name-features-outside-of-the-str">Features outside of the Streamable Subset</name>
        <t indent="0" pn="section-appendix.c.1-1">As described in <xref target="streamable-subset" format="default" sectionFormat="of" derivedContent="Section 7"/>, FLAC specifies a subset of its capabilities as the FLAC streamable subset. Certain decoders may choose to only decode FLAC files conforming to the limitations imposed by the streamable subset. Therefore, maximum compatibility with decoders is achieved when the limitations of the FLAC streamable subset are followed when creating FLAC files.</t>
      </section>
      <section anchor="variable-block-size" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.2">
        <name slugifiedName="name-variable-block-size">Variable Block Size</name>
        <t indent="0" pn="section-appendix.c.2-1">Because it is often difficult to find the optimal arrangement of block sizes for maximum compression, most encoders choose to create files with a fixed block size. Because of this, many decoder implementations receive minimal use when handling variable block size streams, and this can reveal bugs or reveal that implementations do not decode them at all. Furthermore, as explained in <xref target="addition-of-blocking-strategy-bit" format="default" sectionFormat="of" derivedContent="Appendix B.1"/>, there have been some changes to the way variable block size streams are encoded. Because of this, maximum compatibility with decoders is achieved when FLAC files are created using fixed block size streams.</t>
      </section>
      <section anchor="rice-parameter-5-bit" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.3">
        <name slugifiedName="name-5-bit-rice-parameters">5-Bit Rice Parameters</name>
        <t indent="0" pn="section-appendix.c.3-1">   As the addition of the coding method using 5-bit Rice parameters,
   as described in <xref target="addition-of-5-bit-rice-parameters" format="default" sectionFormat="of" derivedContent="Appendix B.3"/>, occurred quite a few years after the
   FLAC format was first introduced, some early decoders might not
   be able to decode files containing such Rice parameters. The introduction of this was specifically aimed at improving compression of 24-bit PCM audio, and compression of 16-bit PCM audio only rarely benefits from using 5-bit Rice parameters. Therefore, maximum compatibility with decoders is achieved when FLAC files containing audio with a bit depth of 16 bits or less are created without any use of 5-bit Rice parameters.</t>
      </section>
      <section anchor="rice-escape-code" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.4">
        <name slugifiedName="name-rice-escape-code">Rice Escape Code</name>
        <t indent="0" pn="section-appendix.c.4-1">Escaped Rice partitions are seldom used, as it turned out their use provides only a very small compression improvement. As many encoders do not use these by default or are not capable of producing them at all, it is likely that many decoder implementations are not able to decode them correctly. Therefore, maximum compatibility with decoders is achieved when FLAC files are created without any use of escaped Rice partitions.</t>
      </section>
      <section anchor="uncommon-block-size-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.5">
        <name slugifiedName="name-uncommon-block-size-2">Uncommon Block Size</name>
        <t indent="0" pn="section-appendix.c.5-1">For unknown reasons, some decoders have chosen to support only common block sizes for all but the last block of a stream. Therefore, maximum compatibility with decoders is achieved when creating FLAC files using common block sizes, as listed in <xref target="block-size-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.1"/>, for all but the last block of a stream.</t>
      </section>
      <section anchor="uncommon-bit-depth" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.6">
        <name slugifiedName="name-uncommon-bit-depth">Uncommon Bit Depth</name>
        <t indent="0" pn="section-appendix.c.6-1">Most audio is stored in bit depths that are a whole number of bytes, e.g., 8, 16, or 24 bits. However, there is audio with different bit depths. A few examples:</t>
        <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-appendix.c.6-2">
          <li pn="section-appendix.c.6-2.1">DVD-Audio has the possibility to store 20-bit PCM audio.</li>
          <li pn="section-appendix.c.6-2.2">DAT and DV can store 12-bit PCM audio.</li>
          <li pn="section-appendix.c.6-2.3">NICAM-728 samples at 14 bits, which is companded to 10 bits.</li>
          <li pn="section-appendix.c.6-2.4">8-bit µ-law can be losslessly converted to 14-bit (Linear) PCM.</li>
          <li pn="section-appendix.c.6-2.5">8-bit A-law can be losslessly converted to 13-bit (Linear) PCM.</li>
        </ul>
        <t indent="0" pn="section-appendix.c.6-3">The FLAC format can contain these bit depths directly, but because they are uncommon, some decoders are not able to process the resulting files correctly. It is possible to store these formats in a FLAC file with a more common bit depth without sacrificing compression by padding each sample with zero bits to a bit depth that is a whole byte. The FLAC format can efficiently compress these wasted bits. See <xref target="wasted-bits-per-sample" format="default" sectionFormat="of" derivedContent="Section 9.2.2"/> for details.</t>
        <t indent="0" pn="section-appendix.c.6-4">Therefore, maximum compatibility with decoders is achieved when FLAC files are created by padding samples of such audio with zero bits to the bit depth that is the next whole number of bytes.</t>
        <t indent="0" pn="section-appendix.c.6-5">In cases where the original signal is already padded, this operation cannot be reversed losslessly without knowing the original bit depth. 
To leave no ambiguity, the original bit depth needs to be stored, for example,
in a Vorbis comment field or by storing the header of the original file. The
choice of a suitable method is left to the implementor.</t>
        <t indent="0" pn="section-appendix.c.6-6">Besides audio with a "non-whole byte" bit depth, some decoder implementations have chosen to only accept FLAC files coding for PCM audio with a bit depth of 16 bits. Many implementations support bit depths up to 24 bits, but no higher. Consult <xref target="FLAC-wiki-interoperability" format="default" sectionFormat="of" derivedContent="FLAC-wiki-interoperability"/> for more up-to-date information.</t>
      </section>
      <section anchor="multi-channel-audio-and-uncommon-sample-rates" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.7">
        <name slugifiedName="name-multi-channel-audio-and-unc">Multi-Channel Audio and Uncommon Sample Rates</name>
        <t indent="0" pn="section-appendix.c.7-1">Many FLAC audio players are unable to render multi-channel audio or audio with an uncommon sample rate. While this is not a concern specific to the FLAC format, it is of note when requiring maximum compatibility with decoders. Unlike the previously mentioned interoperability considerations, this is one where compatibility cannot be improved without sacrificing the lossless nature of the FLAC format.</t>
        <t indent="0" pn="section-appendix.c.7-2">From a non-exhaustive inquiry, it seems that a non-negligible number of players, especially hardware players, do not support audio with 3 or more channels or sample rates other than those considered common; see <xref target="sample-rate-bits" format="default" sectionFormat="of" derivedContent="Section 9.1.2"/>.</t>
        <t indent="0" pn="section-appendix.c.7-3">For those players that do support and are able to render multi-channel audio, many do not parse and use the WAVEFORMATEXTENSIBLE_CHANNEL_MASK tag (see <xref target="channel-mask" format="default" sectionFormat="of" derivedContent="Section 8.6.2"/>). This is also an interoperability consideration because compatibility cannot be improved without sacrificing the lossless nature of the FLAC format.</t>
      </section>
      <section anchor="changing-audio-properties-mid-stream" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.c.8">
        <name slugifiedName="name-changing-audio-properties-m">Changing Audio Properties Mid-Stream</name>
        <t indent="0" pn="section-appendix.c.8-1">Each FLAC frame header stores the audio sample rate, number of bits per sample, and number of channels independently of the streaminfo metadata block and other frame headers. This was done to permit multicasting of FLAC files, but it also allows these properties to change mid-stream. However, many FLAC decoders do not handle such changes, as few other formats are capable of holding such streams and changing playback properties during playback is often not possible without interrupting playback. Also, as explained in <xref target="frame-structure" format="default" sectionFormat="of" derivedContent="Section 9"/>, using this feature of FLAC results in various practical problems.</t>
        <t indent="0" pn="section-appendix.c.8-2">However, even when storing an audio stream with changing properties in FLAC encapsulated in a container capable of handling such changes, as recommended in <xref target="frame-structure" format="default" sectionFormat="of" derivedContent="Section 9"/>, many decoders are not able to decode such a stream correctly. Therefore, maximum compatibility with decoders is achieved when FLAC files are created with a single set of audio properties, in which the properties coded in the streaminfo metadata block (see <xref target="streaminfo" format="default" sectionFormat="of" derivedContent="Section 8.2"/>) and the properties coded in all frame headers (see <xref target="frame-header" format="default" sectionFormat="of" derivedContent="Section 9.1"/>) are the same. This can be achieved by splitting up an input stream with changing audio properties at the points where these properties change into separate streams or files.</t>
      </section>
    </section>
    <section anchor="examples" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d">
      <name slugifiedName="name-examples">Examples</name>
      <t indent="0" pn="section-appendix.d-1">This informational appendix contains short examples of FLAC files that are decoded step by step. These examples provide a more engaging way to understand the FLAC format than the formal specification. The text explaining these examples assumes the reader has at least cursorily read the specification and that the reader refers to the specification for explanation of the terminology used. These examples mostly focus on the layout of several metadata blocks, subframe types, and the implications of certain aspects (e.g., wasted bits and stereo decorrelation) on this layout.</t>
      <t indent="0" pn="section-appendix.d-2">The examples feature files generated by various FLAC encoders. These are presented in hexadecimal or binary format, followed by tables and text referring to various features by their starting bit positions in these representations. Each starting position (shortened to "start" in the tables) is a hexadecimal byte position and a start bit within that byte, separated by a plus sign. Counts for these start at zero. For example, a feature starting at the 3rd bit of the 17th byte is referred to as starting at 0x10+2. The files that are explored in these examples can be found at <xref target="FLAC-specification-github" format="default" sectionFormat="of" derivedContent="FLAC-specification-github"/>.</t>
      <t indent="0" pn="section-appendix.d-3">All data in this appendix has been thoroughly verified. However, as this appendix is informational, if any information here conflicts with statements in the formal specification, the latter takes precedence.</t>
      <section anchor="decoding-example-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.1">
        <name slugifiedName="name-decoding-example-1">Decoding Example 1</name>
        <t indent="0" pn="section-appendix.d.1-1">This very short example FLAC file codes for PCM audio that has two channels, each containing one sample. The focus of this example is on the essential parts of a FLAC file.</t>
        <section anchor="example-file-1-in-hexadecimal-representation" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.1.1">
          <name slugifiedName="name-example-file-1-in-hexadecim">Example File 1 in Hexadecimal Representation</name>
          <artwork type="" align="left" pn="section-appendix.d.1.1-1">
00000000: 664c 6143 8000 0022 1000 1000  fLaC..."....
0000000c: 0000 0f00 000f 0ac4 42f0 0000  ........B...
00000018: 0001 3e84 b418 07dc 6903 0758  ..&gt;.....i..X
00000024: 6a3d ad1a 2e0f fff8 6918 0000  j=......i...
00000030: bf03 58fd 0312 8baa 9a         ..X......
</artwork>
        </section>
        <section anchor="example-file-1-in-binary-representation" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.1.2">
          <name slugifiedName="name-example-file-1-in-binary-re">Example File 1 in Binary Representation</name>
          <artwork type="" align="left" pn="section-appendix.d.1.2-1">
00000000: 01100110 01001100 01100001 01000011  fLaC
00000004: 10000000 00000000 00000000 00100010  ..."
00000008: 00010000 00000000 00010000 00000000  ....
0000000c: 00000000 00000000 00001111 00000000  ....
00000010: 00000000 00001111 00001010 11000100  ....
00000014: 01000010 11110000 00000000 00000000  B...
00000018: 00000000 00000001 00111110 10000100  ..&gt;.
0000001c: 10110100 00011000 00000111 11011100  ....
00000020: 01101001 00000011 00000111 01011000  i..X
00000024: 01101010 00111101 10101101 00011010  j=..
00000028: 00101110 00001111 11111111 11111000  ....
0000002c: 01101001 00011000 00000000 00000000  i...
00000030: 10111111 00000011 01011000 11111101  ..X.
00000034: 00000011 00010010 10001011 10101010  ....
00000038: 10011010
</artwork>
        </section>
        <section anchor="signature-and-streaminfo" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.1.3">
          <name slugifiedName="name-signature-and-streaminfo">Signature and Streaminfo</name>
          <t indent="0" pn="section-appendix.d.1.3-1">The first 4 bytes of the file contain the <tt>fLaC</tt> file signature. Directly following it is a metadata block. The signature and the first metadata block header are broken down in the following table.</t>
          <table align="center" pn="table-27">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x00+0</td>
                <td align="left" colspan="1" rowspan="1">4 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x664C6143</td>
                <td align="left" colspan="1" rowspan="1">
                  <tt>fLaC</tt></td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x04+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Last metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x04+1</td>
                <td align="left" colspan="1" rowspan="1">7 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000000</td>
                <td align="left" colspan="1" rowspan="1">Streaminfo metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x05+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x000022</td>
                <td align="left" colspan="1" rowspan="1">Length of 34 bytes</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.1.3-3">As the header indicates that this is the last metadata block, the position of the first audio frame can now be calculated as the position of the first byte after the metadata block header + the length of the block, i.e., 8+34 = 42 or 0x2a. Thus, 0x2a indeed contains the frame sync code for fixed block size streams -- 0xfff8.</t>
          <t indent="0" pn="section-appendix.d.1.3-4">The streaminfo metadata block contents are broken down in the following table.</t>
          <table align="center" pn="table-28">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x08+0</td>
                <td align="left" colspan="1" rowspan="1">2 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x1000</td>
                <td align="left" colspan="1" rowspan="1">Min. block size 4096</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0a+0</td>
                <td align="left" colspan="1" rowspan="1">2 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x1000</td>
                <td align="left" colspan="1" rowspan="1">Max. block size 4096</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0c+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x00000f</td>
                <td align="left" colspan="1" rowspan="1">Min. frame size 15 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0f+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x00000f</td>
                <td align="left" colspan="1" rowspan="1">Max. frame size 15 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x12+0</td>
                <td align="left" colspan="1" rowspan="1">20 bits</td>
                <td align="left" colspan="1" rowspan="1">0x0ac4, 0b0100</td>
                <td align="left" colspan="1" rowspan="1">Sample rate 44100 hertz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x14+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b001</td>
                <td align="left" colspan="1" rowspan="1">2 channels</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x14+7</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01111</td>
                <td align="left" colspan="1" rowspan="1">Sample bit depth 16</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x15+4</td>
                <td align="left" colspan="1" rowspan="1">36 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000, 0x00000001</td>
                <td align="left" colspan="1" rowspan="1">Total no. of samples 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x1a</td>
                <td align="left" colspan="1" rowspan="1">16 bytes</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">MD5 checksum</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.1.3-6">The minimum and maximum block sizes are both 4096. This was apparently the block size the encoder planned to use, but as only 1 interchannel sample was provided, no frames with 4096 samples are actually present in this file.</t>
          <t indent="0" pn="section-appendix.d.1.3-7">Note that anywhere a number of samples is mentioned (block size, total number of samples, sample rate), interchannel samples are meant.</t>
          <t indent="0" pn="section-appendix.d.1.3-8">The MD5 checksum (starting at 0x1a) is 0x3e84 b418 07dc 6903 0758 6a3d ad1a 2e0f. This will be validated after decoding the samples.</t>
        </section>
        <section anchor="audio-frames" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.1.4">
          <name slugifiedName="name-audio-frames">Audio Frames</name>
          <t indent="0" pn="section-appendix.d.1.4-1">The frame header starts at position 0x2a and is broken down in the following table.</t>
          <table align="center" pn="table-29">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2a+0</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0xff, 0b1111100</td>
                <td align="left" colspan="1" rowspan="1">Frame sync</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2b+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Blocking strategy</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2c+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2c+4</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1001</td>
                <td align="left" colspan="1" rowspan="1">Sample rate 44.1 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2d+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">Stereo, no decorrelation</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2d+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b100</td>
                <td align="left" colspan="1" rowspan="1">Bit depth 16 bits</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2d+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2e+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x00</td>
                <td align="left" colspan="1" rowspan="1">Frame number 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2f+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x00</td>
                <td align="left" colspan="1" rowspan="1">Block size 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x30+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0xbf</td>
                <td align="left" colspan="1" rowspan="1">Frame header CRC</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.1.4-3">As the stream is a fixed block size stream, the number at 0x2e contains a frame number. Because the value is smaller than 128, only 1 byte is used for the encoding.</t>
          <t indent="0" pn="section-appendix.d.1.4-4">At byte 0x31, the first subframe starts, which is broken down in the following table.</t>
          <table align="center" pn="table-30">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x31+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x31+1</td>
                <td align="left" colspan="1" rowspan="1">6 bits</td>
                <td align="left" colspan="1" rowspan="1">0b000001</td>
                <td align="left" colspan="1" rowspan="1">Verbatim subframe</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x31+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x32+0</td>
                <td align="left" colspan="1" rowspan="1">2 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01</td>
                <td align="left" colspan="1" rowspan="1">2 wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x32+2</td>
                <td align="left" colspan="1" rowspan="1">14 bits</td>
                <td align="left" colspan="1" rowspan="1">0b011000, 0xfd</td>
                <td align="left" colspan="1" rowspan="1">14-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.1.4-6">As the wasted bits flag is 1 in this subframe, a unary-coded number follows. Starting at 0x32, we see 0b01, which unary codes for 1, meaning that this subframe uses 2 wasted bits.</t>
          <t indent="0" pn="section-appendix.d.1.4-7">As this is a verbatim subframe, the subframe only contains unencoded sample values. With a block size of 1, it contains only a single sample. The bit depth of the audio is 16 bits, but as the subframe header signals the use of 2 wasted bits, only 14 bits are stored. As no stereo decorrelation is used, a bit depth increase for the side channel is not applicable. So, the next 14 bits (starting at position 0x32+2) contain the unencoded sample coded big-endian, signed two's complement. The value reads 0b011000 11111101, or 6397. This value needs to be shifted left by 2 bits to account for the wasted bits. The value is then 0b011000 11111101 00, or 25588.</t>
          <t indent="0" pn="section-appendix.d.1.4-8">The second subframe starts at 0x34 and is broken down in the following table.</t>
          <table align="center" pn="table-31">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x34+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x34+1</td>
                <td align="left" colspan="1" rowspan="1">6 bits</td>
                <td align="left" colspan="1" rowspan="1">0b000001</td>
                <td align="left" colspan="1" rowspan="1">Verbatim subframe</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x34+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x35+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">4 wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x35+4</td>
                <td align="left" colspan="1" rowspan="1">12 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0010, 0x8b</td>
                <td align="left" colspan="1" rowspan="1">12-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.1.4-10">The wasted bits flag is also one, but the unary-coded number that follows it is 4 bits long, indicating the use of 4 wasted bits. This means the sample is stored in 12 bits. The sample value is 0b0010 10001011, or 651. This value now has to be shifted left by 4 bits, i.e., 0b0010 10001011 0000, or 10416.</t>
          <t indent="0" pn="section-appendix.d.1.4-11">At this point, we would undo stereo decorrelation if that was applicable.</t>
          <t indent="0" pn="section-appendix.d.1.4-12">As the last subframe ends byte-aligned, no padding bits follow it. The next 2 bytes, starting at 0x38, contain the frame CRC. As this is the only frame in the file, the file ends with the CRC.</t>
          <t indent="0" pn="section-appendix.d.1.4-13">To validate the MD5 checksum, we line up the samples interleaved, byte-aligned, little-endian, signed two's complement. The first sample, with value 25588, translates to 0xf463, and the second sample, with value 10416, translates to 0xb028. When computing the MD5 checksum with 0xf463b028 as input, we get the MD5 checksum found in the header, so decoding was lossless.</t>
        </section>
      </section>
      <section anchor="decoding-example-2" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2">
        <name slugifiedName="name-decoding-example-2">Decoding Example 2</name>
        <t indent="0" pn="section-appendix.d.2-1">This FLAC file is larger than the first example, but still contains very little audio. The focus of this example is on decoding a subframe with a fixed predictor and a coded residual, but it also contains a very short seek table, a Vorbis comment metadata block, and a padding metadata block.</t>
        <section anchor="example-file-2-in-hexadecimal-representation" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.1">
          <name slugifiedName="name-example-file-2-in-hexadecim">Example File 2 in Hexadecimal Representation</name>
          <artwork align="left" pn="section-appendix.d.2.1-1">
00000000: 664c 6143 0000 0022 0010 0010  fLaC..."....
0000000c: 0000 1700 0044 0ac4 42f0 0000  .....D..B...
00000018: 0013 d5b0 5649 75e9 8b8d 8b93  ....VIu.....
00000024: 0422 757b 8103 0300 0012 0000  ."u{........
00000030: 0000 0000 0000 0000 0000 0000  ............
0000003c: 0000 0010 0400 003a 2000 0000  .......: ...
00000048: 7265 6665 7265 6e63 6520 6c69  reference li
00000054: 6246 4c41 4320 312e 332e 3320  bFLAC 1.3.3
00000060: 3230 3139 3038 3034 0100 0000  20190804....
0000006c: 0e00 0000 5449 544c 453d d7a9  ....TITLE=..
00000078: d79c d795 d79d 8100 0006 0000  ............
00000084: 0000 0000 fff8 6998 000f 9912  ......i.....
00000090: 0867 0162 3d14 4299 8f5d f70d  .g.b=.B..]..
0000009c: 6fe0 0c17 caeb 2100 0ee7 a77a  o.....!....z
000000a8: 24a1 590c 1217 b603 097b 784f  $.Y......{xO
000000b4: aa9a 33d2 85e0 70ad 5b1b 4851  ..3...p.[.HQ
000000c0: b401 0d99 d2cd 1a68 f1e6 b810  .......h....
000000cc: fff8 6918 0102 a402 c382 c40b  ..i.........
000000d8: c14a 03ee 48dd 03b6 7c13 30    .J..H...|.0
</artwork>
        </section>
        <section anchor="example-file-2-in-binary-representation-only-audio-frames" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.2">
          <name slugifiedName="name-example-file-2-in-binary-re">Example File 2 in Binary Representation (Only Audio Frames)</name>
          <artwork type="" align="left" pn="section-appendix.d.2.2-1">
00000088: 11111111 11111000 01101001 10011000  ..i.
0000008c: 00000000 00001111 10011001 00010010  ....
00000090: 00001000 01100111 00000001 01100010  .g.b
00000094: 00111101 00010100 01000010 10011001  =.B.
00000098: 10001111 01011101 11110111 00001101  .]..
0000009c: 01101111 11100000 00001100 00010111  o...
000000a0: 11001010 11101011 00100001 00000000  ..!.
000000a4: 00001110 11100111 10100111 01111010  ...z
000000a8: 00100100 10100001 01011001 00001100  $.Y.
000000ac: 00010010 00010111 10110110 00000011  ....
000000b0: 00001001 01111011 01111000 01001111  .{xO
000000b4: 10101010 10011010 00110011 11010010  ..3.
000000b8: 10000101 11100000 01110000 10101101  ..p.
000000bc: 01011011 00011011 01001000 01010001  [.HQ
000000c0: 10110100 00000001 00001101 10011001  ....
000000c4: 11010010 11001101 00011010 01101000  ...h
000000c8: 11110001 11100110 10111000 00010000  ....
000000cc: 11111111 11111000 01101001 00011000  ..i.
000000d0: 00000001 00000010 10100100 00000010  ....
000000d4: 11000011 10000010 11000100 00001011  ....
000000d8: 11000001 01001010 00000011 11101110  .J..
000000dc: 01001000 11011101 00000011 10110110  H...
000000e0: 01111100 00010011 00110000           |.0
</artwork>
        </section>
        <section anchor="streaminfo-metadata-block" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.3">
          <name slugifiedName="name-streaminfo-metadata-block">Streaminfo Metadata Block</name>
          <t indent="0" pn="section-appendix.d.2.3-1">Most of the streaminfo metadata block, including its header, is the same as in example 1, so only parts that are different are listed in the following table.</t>
          <table align="center" pn="table-32">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x04+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Not the last metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x08+0</td>
                <td align="left" colspan="1" rowspan="1">2 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x0010</td>
                <td align="left" colspan="1" rowspan="1">Min. block size 16</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0a+0</td>
                <td align="left" colspan="1" rowspan="1">2 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x0010</td>
                <td align="left" colspan="1" rowspan="1">Max. block size 16</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0c+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x000017</td>
                <td align="left" colspan="1" rowspan="1">Min. frame size 23 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0f+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x000044</td>
                <td align="left" colspan="1" rowspan="1">Max. frame size 68 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x15+4</td>
                <td align="left" colspan="1" rowspan="1">36 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000, 0x00000013</td>
                <td align="left" colspan="1" rowspan="1">Total no. of samples 19</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x1a</td>
                <td align="left" colspan="1" rowspan="1">16 bytes</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">MD5 checksum</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.3-3">This time, the minimum and maximum block sizes are reflected in the file: there is one block of 16 samples, and the last block (which has 3 samples) is not considered for the minimum block size. The MD5 checksum is 0xd5b0 5649 75e9 8b8d 8b93 0422 757b 8103. This will be verified at the end of this example.</t>
        </section>
        <section anchor="seektable-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.4">
          <name slugifiedName="name-seek-table-2">Seek Table</name>
          <t indent="0" pn="section-appendix.d.2.4-1">The seek table metadata block only holds one entry. It is not really useful here, as it points to the first frame, but it is enough for this example. The seek table metadata block is broken down in the following table.</t>
          <table align="center" pn="table-33">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2a+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Not the last metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2a+1</td>
                <td align="left" colspan="1" rowspan="1">7 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000011</td>
                <td align="left" colspan="1" rowspan="1">Seek table metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2b+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x000012</td>
                <td align="left" colspan="1" rowspan="1">Length 18 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2e+0</td>
                <td align="left" colspan="1" rowspan="1">8 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x0000000000000000</td>
                <td align="left" colspan="1" rowspan="1">Seek point to sample 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x36+0</td>
                <td align="left" colspan="1" rowspan="1">8 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x0000000000000000</td>
                <td align="left" colspan="1" rowspan="1">Seek point to offset 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3e+0</td>
                <td align="left" colspan="1" rowspan="1">2 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x0010</td>
                <td align="left" colspan="1" rowspan="1">Seek point to block size 16</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="vorbis-comment-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.5">
          <name slugifiedName="name-vorbis-comment-2">Vorbis Comment</name>
          <t indent="0" pn="section-appendix.d.2.5-1">The Vorbis comment metadata block contains the vendor string and a single comment. It is broken down in the following table.</t>
          <table align="center" pn="table-34">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x40+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Not the last metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x40+1</td>
                <td align="left" colspan="1" rowspan="1">7 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000100</td>
                <td align="left" colspan="1" rowspan="1">Vorbis comment metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x41+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x00003a</td>
                <td align="left" colspan="1" rowspan="1">Length 58 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x44+0</td>
                <td align="left" colspan="1" rowspan="1">4 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x20000000</td>
                <td align="left" colspan="1" rowspan="1">Vendor string length 32 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x48+0</td>
                <td align="left" colspan="1" rowspan="1">32 bytes</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">Vendor string</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x68+0</td>
                <td align="left" colspan="1" rowspan="1">4 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x01000000</td>
                <td align="left" colspan="1" rowspan="1">Number of fields 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x6c+0</td>
                <td align="left" colspan="1" rowspan="1">4 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x0e000000</td>
                <td align="left" colspan="1" rowspan="1">Field length 14 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x70+0</td>
                <td align="left" colspan="1" rowspan="1">14 bytes</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">Field contents</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.5-3">The vendor string is reference libFLAC 1.3.3 20190804, and the field contents of the only field is </t>
          <artwork align="left" pn="section-appendix.d.2.5-4">
TITLE=שלום
</artwork>
          <t indent="0" pn="section-appendix.d.2.5-5">where in direction of reading, the sequence of characters forming the field content is: 
<u format="lit-name-num" pn="u-1">ש</u>,
<u format="lit-name-num" pn="u-2">ל</u>,
<u format="lit-name-num" pn="u-3">ו</u>,
<u format="lit-name-num" pn="u-4">ם</u>.
</t>
          <t indent="0" pn="section-appendix.d.2.5-6">
The Vorbis comment field is 14 bytes but only 10 characters in size, because it contains four 2-byte characters.</t>
        </section>
        <section anchor="padding-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.6">
          <name slugifiedName="name-padding-2">Padding</name>
          <t indent="0" pn="section-appendix.d.2.6-1">The last metadata block is a (very short) padding block.</t>
          <table align="center" pn="table-35">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x7e+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Last metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x7e+1</td>
                <td align="left" colspan="1" rowspan="1">7 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000001</td>
                <td align="left" colspan="1" rowspan="1">Padding metadata block</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x7f+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x000006</td>
                <td align="left" colspan="1" rowspan="1">Length 6 byte</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x82+0</td>
                <td align="left" colspan="1" rowspan="1">6 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x000000000000</td>
                <td align="left" colspan="1" rowspan="1">Padding bytes</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="first-audio-frame" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.7">
          <name slugifiedName="name-first-audio-frame">First Audio Frame</name>
          <t indent="0" pn="section-appendix.d.2.7-1">The frame header starts at position 0x88 and is broken down in the following table.</t>
          <table align="center" pn="table-36">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x88+0</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0xff, 0b1111100</td>
                <td align="left" colspan="1" rowspan="1">Frame sync</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x89+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Blocking strategy</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8a+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8a+4</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1001</td>
                <td align="left" colspan="1" rowspan="1">Sample rate 44.1 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8b+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1001</td>
                <td align="left" colspan="1" rowspan="1">Side-right stereo</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8b+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b100</td>
                <td align="left" colspan="1" rowspan="1">Bit depth 16 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8b+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8c+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x00</td>
                <td align="left" colspan="1" rowspan="1">Frame number 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8d+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x0f</td>
                <td align="left" colspan="1" rowspan="1">Block size 16</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8e+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x99</td>
                <td align="left" colspan="1" rowspan="1">Frame header CRC</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.7-3">The first subframe starts at byte 0x8f, and it is broken down in the following table, excluding the coded residual. As this subframe codes for a side channel, the bit depth is increased by 1 bit from 16 bits to 17 bits. This is most clearly present in the unencoded warm-up sample.</t>
          <table align="center" pn="table-37">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8f+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8f+1</td>
                <td align="left" colspan="1" rowspan="1">6 bits</td>
                <td align="left" colspan="1" rowspan="1">0b001001</td>
                <td align="left" colspan="1" rowspan="1">Fixed subframe, 1st order</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x8f+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">No wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x90+0</td>
                <td align="left" colspan="1" rowspan="1">17 bits</td>
                <td align="left" colspan="1" rowspan="1">0x0867, 0b0</td>
                <td align="left" colspan="1" rowspan="1">Unencoded warm-up sample</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.7-5">The coded residual is broken down in the following table. All quotients are unary coded, and all remainders are stored unencoded with a number of bits specified by the Rice parameter.</t>
          <table align="center" pn="table-38">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x92+1</td>
                <td align="left" colspan="1" rowspan="1">2 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00</td>
                <td align="left" colspan="1" rowspan="1">Rice code with 4-bit parameter</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x92+3</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000</td>
                <td align="left" colspan="1" rowspan="1">Partition order 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x92+7</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1011</td>
                <td align="left" colspan="1" rowspan="1">Rice parameter 11</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x93+3</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">Quotient 3</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x93+7</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00011110100</td>
                <td align="left" colspan="1" rowspan="1">Remainder 244</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x95+2</td>
                <td align="left" colspan="1" rowspan="1">2 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01</td>
                <td align="left" colspan="1" rowspan="1">Quotient 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x95+4</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01000100001</td>
                <td align="left" colspan="1" rowspan="1">Remainder 545</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x96+7</td>
                <td align="left" colspan="1" rowspan="1">2 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01</td>
                <td align="left" colspan="1" rowspan="1">Quotient 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x97+1</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00110011000</td>
                <td align="left" colspan="1" rowspan="1">Remainder 408</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x98+4</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x98+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b11101011101</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1885</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9a+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9a+1</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b11101110000</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1904</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9b+4</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9b+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b10101101111</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1391</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9d+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9d+1</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b11000000000</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1536</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9e+4</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x9e+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b10000010111</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1047</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa0+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa0+1</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b10010101110</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1198</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa1+4</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa1+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01100100001</td>
                <td align="left" colspan="1" rowspan="1">Remainder 801</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa3+0</td>
                <td align="left" colspan="1" rowspan="1">13 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000000000001</td>
                <td align="left" colspan="1" rowspan="1">Quotient 12</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa4+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b11011100111</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1767</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa6+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa6+1</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01001110111</td>
                <td align="left" colspan="1" rowspan="1">Remainder 631</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa7+4</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa7+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01000100100</td>
                <td align="left" colspan="1" rowspan="1">Remainder 548</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa9+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xa9+1</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01000010101</td>
                <td align="left" colspan="1" rowspan="1">Remainder 533</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xaa+4</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xaa+5</td>
                <td align="left" colspan="1" rowspan="1">11 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00100001100</td>
                <td align="left" colspan="1" rowspan="1">Remainder 268</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.7-7">At this point, the decoder should know it is done decoding the coded residual, as it received 16 samples: 1 warm-up sample and 15 residual samples. 

Each residual sample can be calculated from the quotient and remainder and from undoing the zigzag encoding. For example, the value of the first zigzag-encoded residual sample is 3 * 2<sup>11</sup> + 244 = 6388. As this is an even number, the zigzag encoding is undone by dividing by 2; the residual sample value is 3194. This is done for all residual samples in the next table.</t>
          <table align="center" pn="table-39">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Quotient</th>
                <th align="left" colspan="1" rowspan="1">Remainder</th>
                <th align="left" colspan="1" rowspan="1">Zigzag Encoded</th>
                <th align="left" colspan="1" rowspan="1">Residual Sample Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">3</td>
                <td align="left" colspan="1" rowspan="1">244</td>
                <td align="left" colspan="1" rowspan="1">6388</td>
                <td align="left" colspan="1" rowspan="1">3194</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">545</td>
                <td align="left" colspan="1" rowspan="1">2593</td>
                <td align="left" colspan="1" rowspan="1">-1297</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">408</td>
                <td align="left" colspan="1" rowspan="1">2456</td>
                <td align="left" colspan="1" rowspan="1">1228</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1885</td>
                <td align="left" colspan="1" rowspan="1">1885</td>
                <td align="left" colspan="1" rowspan="1">-943</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1904</td>
                <td align="left" colspan="1" rowspan="1">1904</td>
                <td align="left" colspan="1" rowspan="1">952</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1391</td>
                <td align="left" colspan="1" rowspan="1">1391</td>
                <td align="left" colspan="1" rowspan="1">-696</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1536</td>
                <td align="left" colspan="1" rowspan="1">1536</td>
                <td align="left" colspan="1" rowspan="1">768</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1047</td>
                <td align="left" colspan="1" rowspan="1">1047</td>
                <td align="left" colspan="1" rowspan="1">-524</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1198</td>
                <td align="left" colspan="1" rowspan="1">1198</td>
                <td align="left" colspan="1" rowspan="1">599</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">801</td>
                <td align="left" colspan="1" rowspan="1">801</td>
                <td align="left" colspan="1" rowspan="1">-401</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">12</td>
                <td align="left" colspan="1" rowspan="1">1767</td>
                <td align="left" colspan="1" rowspan="1">26343</td>
                <td align="left" colspan="1" rowspan="1">-13172</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">631</td>
                <td align="left" colspan="1" rowspan="1">631</td>
                <td align="left" colspan="1" rowspan="1">-316</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">548</td>
                <td align="left" colspan="1" rowspan="1">548</td>
                <td align="left" colspan="1" rowspan="1">274</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">533</td>
                <td align="left" colspan="1" rowspan="1">533</td>
                <td align="left" colspan="1" rowspan="1">-267</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">268</td>
                <td align="left" colspan="1" rowspan="1">268</td>
                <td align="left" colspan="1" rowspan="1">134</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.7-9">In this case, using a Rice code is more efficient than storing values
unencoded. The Rice code (excluding the partition order and parameter) is 199
bits in length. The largest residual value (-13172) would need 15 bits to be
stored unencoded, so storing all 15 samples with 15 bits results in a sequence
with a length of 225 bits.</t>
          <t indent="0" pn="section-appendix.d.2.7-10">The next step is using the predictor and the residuals to restore the sample values. As this subframe uses a fixed predictor with order 1, the residual value is added to the value of the previous sample.</t>
          <table align="center" pn="table-40">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Residual</th>
                <th align="left" colspan="1" rowspan="1">Sample Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">(warm-up)</td>
                <td align="left" colspan="1" rowspan="1">4302</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">3194</td>
                <td align="left" colspan="1" rowspan="1">7496</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-1297</td>
                <td align="left" colspan="1" rowspan="1">6199</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1228</td>
                <td align="left" colspan="1" rowspan="1">7427</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-943</td>
                <td align="left" colspan="1" rowspan="1">6484</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">952</td>
                <td align="left" colspan="1" rowspan="1">7436</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-696</td>
                <td align="left" colspan="1" rowspan="1">6740</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">768</td>
                <td align="left" colspan="1" rowspan="1">7508</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-524</td>
                <td align="left" colspan="1" rowspan="1">6984</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">599</td>
                <td align="left" colspan="1" rowspan="1">7583</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-401</td>
                <td align="left" colspan="1" rowspan="1">7182</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-13172</td>
                <td align="left" colspan="1" rowspan="1">-5990</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-316</td>
                <td align="left" colspan="1" rowspan="1">-6306</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">274</td>
                <td align="left" colspan="1" rowspan="1">-6032</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-267</td>
                <td align="left" colspan="1" rowspan="1">-6299</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">134</td>
                <td align="left" colspan="1" rowspan="1">-6165</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.7-12">With this, the decoding of the first subframe is complete. The decoding of the second subframe is very similar, as it also uses a fixed predictor of order 1. This is left as an exercise for the reader; the results are in the next table. The next step is undoing stereo decorrelation, which is done in the following table. As the stereo decorrelation is side-right, the samples in the right channel come directly from the second subframe, while the samples in the left channel are found by adding the values of both subframes for each sample.</t>
          <table align="center" pn="table-41">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Subframe 1</th>
                <th align="left" colspan="1" rowspan="1">Subframe 2</th>
                <th align="left" colspan="1" rowspan="1">Left</th>
                <th align="left" colspan="1" rowspan="1">Right</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">4302</td>
                <td align="left" colspan="1" rowspan="1">6070</td>
                <td align="left" colspan="1" rowspan="1">10372</td>
                <td align="left" colspan="1" rowspan="1">6070</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7496</td>
                <td align="left" colspan="1" rowspan="1">10545</td>
                <td align="left" colspan="1" rowspan="1">18041</td>
                <td align="left" colspan="1" rowspan="1">10545</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">6199</td>
                <td align="left" colspan="1" rowspan="1">8743</td>
                <td align="left" colspan="1" rowspan="1">14942</td>
                <td align="left" colspan="1" rowspan="1">8743</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7427</td>
                <td align="left" colspan="1" rowspan="1">10449</td>
                <td align="left" colspan="1" rowspan="1">17876</td>
                <td align="left" colspan="1" rowspan="1">10449</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">6484</td>
                <td align="left" colspan="1" rowspan="1">9143</td>
                <td align="left" colspan="1" rowspan="1">15627</td>
                <td align="left" colspan="1" rowspan="1">9143</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7436</td>
                <td align="left" colspan="1" rowspan="1">10463</td>
                <td align="left" colspan="1" rowspan="1">17899</td>
                <td align="left" colspan="1" rowspan="1">10463</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">6740</td>
                <td align="left" colspan="1" rowspan="1">9502</td>
                <td align="left" colspan="1" rowspan="1">16242</td>
                <td align="left" colspan="1" rowspan="1">9502</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7508</td>
                <td align="left" colspan="1" rowspan="1">10569</td>
                <td align="left" colspan="1" rowspan="1">18077</td>
                <td align="left" colspan="1" rowspan="1">10569</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">6984</td>
                <td align="left" colspan="1" rowspan="1">9840</td>
                <td align="left" colspan="1" rowspan="1">16824</td>
                <td align="left" colspan="1" rowspan="1">9840</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7583</td>
                <td align="left" colspan="1" rowspan="1">10680</td>
                <td align="left" colspan="1" rowspan="1">18263</td>
                <td align="left" colspan="1" rowspan="1">10680</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">7182</td>
                <td align="left" colspan="1" rowspan="1">10113</td>
                <td align="left" colspan="1" rowspan="1">17295</td>
                <td align="left" colspan="1" rowspan="1">10113</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-5990</td>
                <td align="left" colspan="1" rowspan="1">-8428</td>
                <td align="left" colspan="1" rowspan="1">-14418</td>
                <td align="left" colspan="1" rowspan="1">-8428</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-6306</td>
                <td align="left" colspan="1" rowspan="1">-8895</td>
                <td align="left" colspan="1" rowspan="1">-15201</td>
                <td align="left" colspan="1" rowspan="1">-8895</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-6032</td>
                <td align="left" colspan="1" rowspan="1">-8476</td>
                <td align="left" colspan="1" rowspan="1">-14508</td>
                <td align="left" colspan="1" rowspan="1">-8476</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-6299</td>
                <td align="left" colspan="1" rowspan="1">-8896</td>
                <td align="left" colspan="1" rowspan="1">-15195</td>
                <td align="left" colspan="1" rowspan="1">-8896</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-6165</td>
                <td align="left" colspan="1" rowspan="1">-8653</td>
                <td align="left" colspan="1" rowspan="1">-14818</td>
                <td align="left" colspan="1" rowspan="1">-8653</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.7-14">As the second subframe ends byte-aligned, no padding bits follow it. Finally, the last 2 bytes of the frame contain the frame CRC.</t>
        </section>
        <section anchor="second-audio-frame" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.8">
          <name slugifiedName="name-second-audio-frame">Second Audio Frame</name>
          <t indent="0" pn="section-appendix.d.2.8-1">The second audio frame is very similar to the frame decoded in the first example, but this time, 3 samples (not 1) are present.</t>
          <t indent="0" pn="section-appendix.d.2.8-2">The frame header starts at position 0xcc and is broken down in the following table.</t>
          <table align="center" pn="table-42">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xcc+0</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0xff, 0b1111100</td>
                <td align="left" colspan="1" rowspan="1">Frame sync</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xcd+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Blocking strategy</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xce+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xce+4</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1001</td>
                <td align="left" colspan="1" rowspan="1">Sample rate 44.1 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xcf+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">Stereo, no decorrelation</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xcf+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b100</td>
                <td align="left" colspan="1" rowspan="1">Bit depth 16 bits</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xcf+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd0+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x01</td>
                <td align="left" colspan="1" rowspan="1">Frame number 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd1+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x02</td>
                <td align="left" colspan="1" rowspan="1">Block size 3</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd2+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0xa4</td>
                <td align="left" colspan="1" rowspan="1">Frame header CRC</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.8-4">The first subframe starts at 0xd3+0 and is broken down in the following table.</t>
          <table align="center" pn="table-43">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd3+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd3+1</td>
                <td align="left" colspan="1" rowspan="1">6 bits</td>
                <td align="left" colspan="1" rowspan="1">0b000001</td>
                <td align="left" colspan="1" rowspan="1">Verbatim subframe</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd3+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">No wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd4+0</td>
                <td align="left" colspan="1" rowspan="1">16 bits</td>
                <td align="left" colspan="1" rowspan="1">0xc382</td>
                <td align="left" colspan="1" rowspan="1">16-bit unencoded sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd6+0</td>
                <td align="left" colspan="1" rowspan="1">16 bits</td>
                <td align="left" colspan="1" rowspan="1">0xc40b</td>
                <td align="left" colspan="1" rowspan="1">16-bit unencoded sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xd8+0</td>
                <td align="left" colspan="1" rowspan="1">16 bits</td>
                <td align="left" colspan="1" rowspan="1">0xc14a</td>
                <td align="left" colspan="1" rowspan="1">16-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.8-6">The second subframe starts at 0xda+0 and is broken down in the following table.</t>
          <table align="center" pn="table-44">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xda+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xda+1</td>
                <td align="left" colspan="1" rowspan="1">6 bits</td>
                <td align="left" colspan="1" rowspan="1">0b000001</td>
                <td align="left" colspan="1" rowspan="1">Verbatim subframe</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xda+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xdb+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">1 wasted bit used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xdb+1</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0b110111001001000</td>
                <td align="left" colspan="1" rowspan="1">15-bit unencoded sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xdd+0</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0b110111010000001</td>
                <td align="left" colspan="1" rowspan="1">15-bit unencoded sample</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0xde+7</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0b110110110011111</td>
                <td align="left" colspan="1" rowspan="1">15-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.2.8-8">As this subframe uses wasted bits, the 15-bit unencoded samples need to be shifted left by 1 bit. For example, sample 1 is stored as -4536 and becomes -9072 after shifting left 1 bit.</t>
          <t indent="0" pn="section-appendix.d.2.8-9">As the last subframe does not end on byte alignment, 2 padding bits are added before the 2-byte frame CRC, which follows at 0xe1+0.</t>
        </section>
        <section anchor="md5-checksum-verification" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.2.9">
          <name slugifiedName="name-md5-checksum-verification">MD5 Checksum Verification</name>
          <t indent="0" pn="section-appendix.d.2.9-1">All samples in the file have been decoded, and we can now verify the MD5 checksum. All sample values must be interleaved and stored signed coded little-endian. The result of this follows in groups of 12 samples (i.e., 6 interchannel samples) per line.</t>
          <artwork type="" align="left" pn="section-appendix.d.2.9-2">
0x8428 B617 7946 3129 5E3A 2722 D445 D128 0B3D B723 EB45 DF28
0x723f 1E25 9D46 4929 B841 7026 5747 B829 8F43 8127 AEC7 14DF
0x9FC4 41DD 54C7 E4DE A5C4 40DD 1EC6 33DE 82C3 90DC 0BC4 02DD
0x4AC1 3EDB
</artwork>
          <t indent="0" pn="section-appendix.d.2.9-3">The MD5 checksum of this is indeed the same as the one found in the streaminfo metadata block.</t>
        </section>
      </section>
      <section anchor="decoding-example-3" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.3">
        <name slugifiedName="name-decoding-example-3">Decoding Example 3</name>
        <t indent="0" pn="section-appendix.d.3-1">This example is once again a very short FLAC file. The focus of this example is on decoding a subframe with a linear predictor and a coded residual with more than one partition.</t>
        <section anchor="example-file-3-in-hexadecimal-representation" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.3.1">
          <name slugifiedName="name-example-file-3-in-hexadecim">Example File 3 in Hexadecimal Representation</name>
          <artwork type="" align="left" pn="section-appendix.d.3.1-1">
00000000: 664c 6143 8000 0022 1000 1000  fLaC..."....
0000000c: 0000 1f00 001f 07d0 0070 0000  .........p..
00000018: 0018 f8f9 e396 f5cb cfc6 dc80  ............
00000024: 7f99 7790 6b32 fff8 6802 0017  ..w.k2..h...
00000030: e944 004f 6f31 3d10 47d2 27cb  .D.Oo1=.G.'.
0000003c: 6d09 0831 452b dc28 2222 8057  m..1E+.("".W
00000048: a3                             .
</artwork>
        </section>
        <section anchor="example-file-3-in-binary-representation-only-audio-frame" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.3.2">
          <name slugifiedName="name-example-file-3-in-binary-re">Example File 3 in Binary Representation (Only Audio Frame)</name>
          <artwork type="" align="left" pn="section-appendix.d.3.2-1">
0000002a: 11111111 11111000 01101000 00000010  ..h.
0000002e: 00000000 00010111 11101001 01000100  ...D
00000032: 00000000 01001111 01101111 00110001  .Oo1
00000036: 00111101 00010000 01000111 11010010  =.G.
0000003a: 00100111 11001011 01101101 00001001  '.m.
0000003e: 00001000 00110001 01000101 00101011  .1E+
00000042: 11011100 00101000 00100010 00100010  .(""
00000046: 10000000 01010111 10100011           .W.
</artwork>
        </section>
        <section anchor="streaminfo-metadata-block-1" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.3.3">
          <name slugifiedName="name-streaminfo-metadata-block-2">Streaminfo Metadata Block</name>
          <t indent="0" pn="section-appendix.d.3.3-1">Most of the streaminfo metadata block, including its header, is the same as in example 1, so only parts that are different are listed in the following table.</t>
          <table align="center" pn="table-45">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0c+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x00001f</td>
                <td align="left" colspan="1" rowspan="1">Min. frame size 31 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x0f+0</td>
                <td align="left" colspan="1" rowspan="1">3 bytes</td>
                <td align="left" colspan="1" rowspan="1">0x00001f</td>
                <td align="left" colspan="1" rowspan="1">Max. frame size 31 bytes</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x12+0</td>
                <td align="left" colspan="1" rowspan="1">20 bits</td>
                <td align="left" colspan="1" rowspan="1">0x07d0, 0x0000</td>
                <td align="left" colspan="1" rowspan="1">Sample rate 32000 hertz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x14+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b000</td>
                <td align="left" colspan="1" rowspan="1">1 channel</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x14+7</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00111</td>
                <td align="left" colspan="1" rowspan="1">Sample bit depth 8 bits</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x15+4</td>
                <td align="left" colspan="1" rowspan="1">36 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000, 0x00000018</td>
                <td align="left" colspan="1" rowspan="1">Total no. of samples 24</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x1a</td>
                <td align="left" colspan="1" rowspan="1">16 bytes</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">MD5 checksum</td>
              </tr>
            </tbody>
          </table>
        </section>
        <section anchor="audio-frame" numbered="true" removeInRFC="false" toc="include" pn="section-appendix.d.3.4">
          <name slugifiedName="name-audio-frame">Audio Frame</name>
          <t indent="0" pn="section-appendix.d.3.4-1">The frame header starts at position 0x2a and is broken down in the following table.</t>
          <table align="center" pn="table-46">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2a+0</td>
                <td align="left" colspan="1" rowspan="1">15 bits</td>
                <td align="left" colspan="1" rowspan="1">0xff, 0b1111100</td>
                <td align="left" colspan="1" rowspan="1">Frame sync</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2b+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">blocking strategy</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2c+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0110</td>
                <td align="left" colspan="1" rowspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2c+4</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1000</td>
                <td align="left" colspan="1" rowspan="1">Sample rate 32 kHz</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2d+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0000</td>
                <td align="left" colspan="1" rowspan="1">Mono audio (1 channel)</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2d+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b001</td>
                <td align="left" colspan="1" rowspan="1">Bit depth 8 bits</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2d+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2e+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x00</td>
                <td align="left" colspan="1" rowspan="1">Frame number 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x2f+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0x17</td>
                <td align="left" colspan="1" rowspan="1">Block size 24</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x30+0</td>
                <td align="left" colspan="1" rowspan="1">1 byte</td>
                <td align="left" colspan="1" rowspan="1">0xe9</td>
                <td align="left" colspan="1" rowspan="1">Frame header CRC</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.3.4-3">The first and only subframe starts at byte 0x31. It is broken down in the following table, without the coded residual.</t>
          <table align="center" pn="table-47">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x31+0</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x31+1</td>
                <td align="left" colspan="1" rowspan="1">6 bits</td>
                <td align="left" colspan="1" rowspan="1">0b100010</td>
                <td align="left" colspan="1" rowspan="1">Linear prediction subframe, 3rd order</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x31+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b0</td>
                <td align="left" colspan="1" rowspan="1">No wasted bits used</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x32+0</td>
                <td align="left" colspan="1" rowspan="1">8 bits</td>
                <td align="left" colspan="1" rowspan="1">0x00</td>
                <td align="left" colspan="1" rowspan="1">Unencoded warm-up sample 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x33+0</td>
                <td align="left" colspan="1" rowspan="1">8 bits</td>
                <td align="left" colspan="1" rowspan="1">0x4f</td>
                <td align="left" colspan="1" rowspan="1">Unencoded warm-up sample 79</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x34+0</td>
                <td align="left" colspan="1" rowspan="1">8 bits</td>
                <td align="left" colspan="1" rowspan="1">0x6f</td>
                <td align="left" colspan="1" rowspan="1">Unencoded warm-up sample 111</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x35+0</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0011</td>
                <td align="left" colspan="1" rowspan="1">Coefficient precision 4 bit</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x35+4</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00010</td>
                <td align="left" colspan="1" rowspan="1">Prediction right shift 2</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x36+1</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0111</td>
                <td align="left" colspan="1" rowspan="1">Predictor coefficient 7</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x36+5</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1010</td>
                <td align="left" colspan="1" rowspan="1">Predictor coefficient -6</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x37+1</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0010</td>
                <td align="left" colspan="1" rowspan="1">Predictor coefficient 2</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.3.4-5">The data stream continues with the coded residual, which is broken down in the following table. Residual partitions 3 and 4 are left as an exercise for the reader.</t>
          <table align="center" pn="table-48">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Start</th>
                <th align="left" colspan="1" rowspan="1">Length</th>
                <th align="left" colspan="1" rowspan="1">Contents</th>
                <th align="left" colspan="1" rowspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x37+5</td>
                <td align="left" colspan="1" rowspan="1">2 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00</td>
                <td align="left" colspan="1" rowspan="1">Rice-coded residual, 4-bit parameter</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x37+7</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0010</td>
                <td align="left" colspan="1" rowspan="1">Partition order 2</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x38+3</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0011</td>
                <td align="left" colspan="1" rowspan="1">Rice parameter 3</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x38+7</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x39+0</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b110</td>
                <td align="left" colspan="1" rowspan="1">Remainder 6</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x39+3</td>
                <td align="left" colspan="1" rowspan="1">1 bit</td>
                <td align="left" colspan="1" rowspan="1">0b1</td>
                <td align="left" colspan="1" rowspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x39+4</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b001</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x39+7</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">Quotient 3</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3a+3</td>
                <td align="left" colspan="1" rowspan="1">3 bits</td>
                <td align="left" colspan="1" rowspan="1">0b001</td>
                <td align="left" colspan="1" rowspan="1">Remainder 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3a+6</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b1111</td>
                <td align="left" colspan="1" rowspan="1">No Rice parameter, escape code</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3b+2</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00101</td>
                <td align="left" colspan="1" rowspan="1">Partition encoded with 5 bits</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3b+7</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b10110</td>
                <td align="left" colspan="1" rowspan="1">Residual -10</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3c+4</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b11010</td>
                <td align="left" colspan="1" rowspan="1">Residual -6</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3d+1</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00010</td>
                <td align="left" colspan="1" rowspan="1">Residual 2</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3d+6</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01000</td>
                <td align="left" colspan="1" rowspan="1">Residual 8</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3e+3</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b01000</td>
                <td align="left" colspan="1" rowspan="1">Residual 8</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3f+0</td>
                <td align="left" colspan="1" rowspan="1">5 bits</td>
                <td align="left" colspan="1" rowspan="1">0b00110</td>
                <td align="left" colspan="1" rowspan="1">Residual 6</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x3f+5</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0010</td>
                <td align="left" colspan="1" rowspan="1">Rice parameter 2</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x40+1</td>
                <td align="left" colspan="1" rowspan="1">22 bits</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">Residual partition 3</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x42+7</td>
                <td align="left" colspan="1" rowspan="1">4 bits</td>
                <td align="left" colspan="1" rowspan="1">0b0001</td>
                <td align="left" colspan="1" rowspan="1">Rice parameter 1</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x43+3</td>
                <td align="left" colspan="1" rowspan="1">23 bits</td>
                <td align="left" colspan="1" rowspan="1">(...)</td>
                <td align="left" colspan="1" rowspan="1">Residual partition 4</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.3.4-7">The frame ends with 6 padding bits and a 2-byte frame CRC.</t>
          <t indent="0" pn="section-appendix.d.3.4-8">To decode this subframe, 21 predictions have to be calculated and added to their corresponding residuals. This is a sequential process: as each prediction uses previous samples, it is not possible to start this decoding halfway through a subframe or decode a subframe with parallel threads.</t>
          <t indent="0" pn="section-appendix.d.3.4-9">The following table breaks down the calculation for each sample. For example, the predictor without shift value of row 4 is found by applying the predictor with the three warm-up samples: 7*111 - 6*79 + 2*0 = 303. This value is then shifted right by 2 bits: 303 &gt;&gt; 2 = 75. Then, the decoded residual sample is added: 75 + 3 = 78.</t>
          <table align="center" pn="table-49">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Residual</th>
                <th align="left" colspan="1" rowspan="1">Predictor w/o Shift</th>
                <th align="left" colspan="1" rowspan="1">Predictor</th>
                <th align="left" colspan="1" rowspan="1">Sample Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">(warm-up)</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
                <td align="left" colspan="1" rowspan="1">0</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">(warm-up)</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
                <td align="left" colspan="1" rowspan="1">79</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">(warm-up)</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
                <td align="left" colspan="1" rowspan="1">N/A</td>
                <td align="left" colspan="1" rowspan="1">111</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">3</td>
                <td align="left" colspan="1" rowspan="1">303</td>
                <td align="left" colspan="1" rowspan="1">75</td>
                <td align="left" colspan="1" rowspan="1">78</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-1</td>
                <td align="left" colspan="1" rowspan="1">38</td>
                <td align="left" colspan="1" rowspan="1">9</td>
                <td align="left" colspan="1" rowspan="1">8</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-13</td>
                <td align="left" colspan="1" rowspan="1">-190</td>
                <td align="left" colspan="1" rowspan="1">-48</td>
                <td align="left" colspan="1" rowspan="1">-61</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-10</td>
                <td align="left" colspan="1" rowspan="1">-319</td>
                <td align="left" colspan="1" rowspan="1">-80</td>
                <td align="left" colspan="1" rowspan="1">-90</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-6</td>
                <td align="left" colspan="1" rowspan="1">-248</td>
                <td align="left" colspan="1" rowspan="1">-62</td>
                <td align="left" colspan="1" rowspan="1">-68</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">-58</td>
                <td align="left" colspan="1" rowspan="1">-15</td>
                <td align="left" colspan="1" rowspan="1">-13</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">8</td>
                <td align="left" colspan="1" rowspan="1">137</td>
                <td align="left" colspan="1" rowspan="1">34</td>
                <td align="left" colspan="1" rowspan="1">42</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">8</td>
                <td align="left" colspan="1" rowspan="1">236</td>
                <td align="left" colspan="1" rowspan="1">59</td>
                <td align="left" colspan="1" rowspan="1">67</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">6</td>
                <td align="left" colspan="1" rowspan="1">191</td>
                <td align="left" colspan="1" rowspan="1">47</td>
                <td align="left" colspan="1" rowspan="1">53</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">53</td>
                <td align="left" colspan="1" rowspan="1">13</td>
                <td align="left" colspan="1" rowspan="1">13</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-3</td>
                <td align="left" colspan="1" rowspan="1">-93</td>
                <td align="left" colspan="1" rowspan="1">-24</td>
                <td align="left" colspan="1" rowspan="1">-27</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-5</td>
                <td align="left" colspan="1" rowspan="1">-161</td>
                <td align="left" colspan="1" rowspan="1">-41</td>
                <td align="left" colspan="1" rowspan="1">-46</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-4</td>
                <td align="left" colspan="1" rowspan="1">-134</td>
                <td align="left" colspan="1" rowspan="1">-34</td>
                <td align="left" colspan="1" rowspan="1">-38</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">-1</td>
                <td align="left" colspan="1" rowspan="1">-44</td>
                <td align="left" colspan="1" rowspan="1">-11</td>
                <td align="left" colspan="1" rowspan="1">-12</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">52</td>
                <td align="left" colspan="1" rowspan="1">13</td>
                <td align="left" colspan="1" rowspan="1">14</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">94</td>
                <td align="left" colspan="1" rowspan="1">23</td>
                <td align="left" colspan="1" rowspan="1">24</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">4</td>
                <td align="left" colspan="1" rowspan="1">60</td>
                <td align="left" colspan="1" rowspan="1">15</td>
                <td align="left" colspan="1" rowspan="1">19</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">17</td>
                <td align="left" colspan="1" rowspan="1">4</td>
                <td align="left" colspan="1" rowspan="1">6</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">-24</td>
                <td align="left" colspan="1" rowspan="1">-6</td>
                <td align="left" colspan="1" rowspan="1">-4</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">-26</td>
                <td align="left" colspan="1" rowspan="1">-7</td>
                <td align="left" colspan="1" rowspan="1">-5</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">1</td>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">0</td>
              </tr>
            </tbody>
          </table>
          <t indent="0" pn="section-appendix.d.3.4-11">By lining up all these samples, we get the following input for the
MD5 checksum calculation process:</t>
          <artwork type="" align="left" pn="section-appendix.d.3.4-12">
0x004F 6F4E 08C3 A6BC F32A 4335 0DE5 D2DA F40E 1813 06FC FB00
</artwork>
          <t indent="0" pn="section-appendix.d.3.4-13">This indeed results in the MD5 checksum found in
the streaminfo metadata block.</t>
        </section>
      </section>
    </section>
    <section numbered="false" anchor="acknowledgments" removeInRFC="false" toc="include" pn="section-appendix.e">
      <name slugifiedName="name-acknowledgments">Acknowledgments</name>
      <t indent="0" pn="section-appendix.e-1">FLAC owes much to the many people who have advanced the audio compression field so freely. For instance:</t>
      <ul bare="false" empty="false" indent="3" spacing="normal" pn="section-appendix.e-2">
        <li pn="section-appendix.e-2.1">
          <t indent="0" pn="section-appendix.e-2.1.1"><contact fullname="Tony Robinson"/>: He worked on Shorten, and his paper
(see <xref target="Robinson-TR156" format="default" sectionFormat="of" derivedContent="Robinson-TR156"/>) is a good starting point on some
of the basic methods used by FLAC. FLAC trivially extends and improves the
fixed predictors, LPC coefficient quantization, and Rice coding used in
Shorten.</t>
        </li>
        <li pn="section-appendix.e-2.2">
          <t indent="0" pn="section-appendix.e-2.2.1"><contact fullname="Solomon W. Golomb"/> and <contact fullname="Robert F. Rice"/>: Their universal codes are used by FLAC's entropy coder. See <xref target="Rice" format="default" sectionFormat="of" derivedContent="Rice"/>.</t>
        </li>
        <li pn="section-appendix.e-2.3">
          <t indent="0" pn="section-appendix.e-2.3.1"><contact fullname="Norman Levinson"/> and <contact fullname="James Durbin"/>:
The FLAC reference encoder uses an algorithm developed and refined by them for
determining the LPC coefficients from the autocorrelation coefficients. See
<xref target="Durbin" format="default" sectionFormat="of" derivedContent="Durbin"/>).</t>
        </li>
        <li pn="section-appendix.e-2.4">
          <t indent="0" pn="section-appendix.e-2.4.1"><contact fullname="Claude Shannon"/>: See <xref target="Shannon" format="default" sectionFormat="of" derivedContent="Shannon"/>.</t>
        </li>
      </ul>
      <t indent="0" pn="section-appendix.e-3">The FLAC format, the FLAC reference implementation <xref target="FLAC-implementation" format="default" sectionFormat="of" derivedContent="FLAC-implementation"/>, and the initial draft version of this document were originally developed by <contact fullname="Josh Coalson"/>. While many others have contributed since, this original effort is
deeply appreciated. </t>
    </section>
    <section anchor="authors-addresses" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.f">
      <name slugifiedName="name-authors-addresses">Authors' Addresses</name>
      <author initials="M.Q.C." surname="van Beurden" fullname="Martijn van Beurden">
        <address>
          <postal>
            <country>Netherlands</country>
          </postal>
          <email>mvanb1@gmail.com</email>
        </address>
      </author>
      <author initials="A" surname="Weaver" fullname="Andrew Weaver">
        <address>
          <email>theandrewjw@gmail.com</email>
        </address>
      </author>
    </section>
  </back>
</rfc>
